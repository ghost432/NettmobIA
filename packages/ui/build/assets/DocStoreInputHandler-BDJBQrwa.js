import{af as jn,r as E,bZ as Wu,aq as Qe,j as p,y as Tt,q as oe,P as X,cg as Uu,az as W,w as yt,aH as Gu,bH as qu,k as Cs,l as Es,aP as ne,aJ as fo,aO as mr,aU as An,ch as Ku,aN as Xu,bv as Yu,b2 as Ms,bJ as ar,B as we,bx as Zu,bw as Ju,a as js,bI as yr,ap as Qu,o as Ae,ar as yi,bR as ho,as as Br,bL as qt,f as Tn,s as Bt,v as In,H as st,D as ot,m as jt,n as it,bN as As,p as At,aa as Nn,b4 as Ts,c as ed,a1 as wn,a2 as Kt,a3 as Or,a4 as Fr,h as $e,a5 as zt,S as Jn,aj as Wr,ah as po,ag as go,aA as td,aB as nd,C as bi,t as Is,i as nt,L as Ns,N as Ds,b8 as Ur,bK as Ye,ci as rd,cj as mo,aw as sd,ck as od,cl as id,d as ad,bz as ud,cm as Gr}from"./index-B5bgjFPS.js";import{D as is}from"./Dropdown-D8Rr64ju.js";import{M as wi}from"./MultiDropdown-BUXEvYds.js";import{C as _i,A as vi}from"./CredentialInputHandler-C4W2GUgN.js";import{I as xi}from"./Input-CajAyvOv.js";import{d as dd}from"./Delete-4D-T7tnN.js";import{I as Ls}from"./IconPlus-j8jP5X4Z.js";import{G as cd}from"./GridActionsCellItem-B3aQ_RGo.js";import{D as ld,s as ki,a as fd}from"./Grid-DGDGmzGP.js";import{F as Si}from"./File-km8sc6Tq.js";import{S as Ci}from"./Switch-D5M093wC.js";import{J as $s}from"./CredentialListDialog-ZkUPpHPz.js";import{T as as,H as hd}from"./TooltipWithParser-D26Faoyy.js";import{C as Ei}from"./CodeEditor-BbQJOBPh.js";import{E as Dn,P as an,a as un,i as pd,D as Rs,b as zs,N as Ge,w as vn,m as _e,M as br,c as Qt,d as en,T as Xt,t as us,S as xn,e as gd,k as md,F as yo,f as Mi,g as Hs,h as yd,j as bd,l as wd,n as _d,o as vd,p as xd,q as kd,s as Sd,u as ji,x as Ai,y as Ti}from"./suggestionOption-DCQ-1oAJ.js";import{T as Ii}from"./TabPanel-C-h4h7GL.js";import{d as Qn}from"./ExpandMore-BZIzyY2F.js";import{n as Cd}from"./nodes-Qb-8otVq.js";import{A as Ni,d as Di,e as Li,M as $i}from"./MemoizedReactMarkdown-mGWPD7hJ.js";import{B as Ri}from"./BackdropLoader-Ch3nVEPr.js";import{E as zi}from"./ExpandTextDialog-XWdUWqGp.js";import{F as $t}from"./FormControl-o0rphY-g.js";import{I as Hi}from"./IconTrash-CekgWF9B.js";import{I as Vi}from"./IconArrowsMaximize-BLCViMbK.js";import{I as Pi}from"./IconAlertTriangle-7YQ2ldQl.js";import{I as Bi}from"./IconRefresh-CtZoTUkg.js";import{I as Ed,T as Md}from"./ToolDialog-DZ6z_iak.js";import{A as jd}from"./AssistantDialog-CJzYVebb.js";import{I as _n}from"./InputLabel-BtU13bbu.js";import{S as Ad,a as Td,b as Id}from"./Stepper-BCbMjc86.js";import{T as Oi}from"./TextField-OmGdqrIf.js";import{a as Fi}from"./assistants-DZYxhrU8.js";import{L as Nd}from"./LoadingButton-CJHvS9bV.js";import{a as Dd,I as Ld}from"./IconSearch-4bUU90FL.js";import{I as $d}from"./IconLanguage-BXvwKb3u.js";import{d as bo}from"./documentstore-CRtiIDJT.js";import{i as Dt,a as wo,b as Rd,d as _o}from"./string-BbYD24iH.js";import{I as vo}from"./IconBulb-BQTovKvQ.js";import{T as Wi,t as zd}from"./Tooltip-CXmeiPEa.js";import{A as Hd,a as Vd}from"./Autocomplete-CinIIKT5.js";/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=[["path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3",key:"svg-0"}],["path",{d:"M18 13.3l-6.3 -6.3",key:"svg-1"}]],Bd=jn("outline","eraser","Eraser",Pd);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]],Fd=jn("outline","mail","Mail",Od);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=[["path",{d:"M6 4h11a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-11a1 1 0 0 1 -1 -1v-14a1 1 0 0 1 1 -1m3 0v18",key:"svg-0"}],["path",{d:"M13 8l2 0",key:"svg-1"}],["path",{d:"M13 12l2 0",key:"svg-2"}]],Ud=jn("outline","notebook","Notebook",Wd);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=[["path",{d:"M8 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h5.697",key:"svg-0"}],["path",{d:"M18 14v4h4",key:"svg-1"}],["path",{d:"M18 11v-4a2 2 0 0 0 -2 -2h-2",key:"svg-2"}],["path",{d:"M8 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-3"}],["path",{d:"M18 18m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-4"}],["path",{d:"M8 11h4",key:"svg-5"}],["path",{d:"M8 15h3",key:"svg-6"}]],qd=jn("outline","report","Report",Gd);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=[["path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3",key:"svg-0"}],["path",{d:"M15 6l3 3",key:"svg-1"}],["path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2",key:"svg-2"}],["path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2",key:"svg-3"}]],ds=jn("outline","wand","Wand",Kd),Xd=Tt(ld)(({theme:e})=>({border:`1px solid ${e.palette.mode==="light"?"#b4b4b4":"#303030"}`,letterSpacing:"normal","& .MuiDataGrid-columnsContainer":{backgroundColor:e.palette.mode==="light"?"#fafafa":"#1d1d1d"},"& .MuiDataGrid-iconSeparator":{display:"none"},"& .MuiDataGrid-columnHeader, .MuiDataGrid-cell":{borderRight:`1px solid ${e.palette.mode==="light"?"#f0f0f0":"#303030"}`},"& .MuiDataGrid-columnsContainer, .MuiDataGrid-cell":{borderBottom:`1px solid ${e.palette.mode==="light"?"#f0f0f0":"#303030"}`},"& .MuiPaginationItem-root":{borderRadius:0},"& .MuiDataGrid-columnHeader:last-child, .MuiDataGrid-cell:last-child":{borderRight:"none"}})),Vs=({columns:e,rows:t,style:n,disabled:r=!1,hideFooter:s=!1,onChange:a})=>{const[i,u]=E.useState(Wu(t)??[]),l=E.useCallback(I=>()=>{let A=[];u(T=>{let C=[...Qe.cloneDeep(T)];return C=C.filter(D=>D.id!==I),A=C,C}),a(JSON.stringify(A))},[]),g=(I=>[...I,{field:"actions",type:"actions",width:80,getActions:A=>[p.jsx(cd,{icon:p.jsx(dd,{}),label:"Delete",onClick:l(A.id)},"Delete")]}])(e),m=I=>{let A=[];return u(T=>{let C=[...Qe.cloneDeep(T)];const D=C.findIndex($=>$.id===I.id);return D>=0&&(C[D]={...I}),A=C,C}),a(JSON.stringify(A)),I},v=()=>{var A;const I={};for(let T=0;T<g.length;T+=1)I[(A=g[T])==null?void 0:A.field]="";return I},_=()=>{u(I=>{let A=[...Qe.cloneDeep(I)];const T=A.length?A[A.length-1].id+1:1;return A.push({...v(),id:T}),A})};return p.jsxs(p.Fragment,{children:[i&&g&&p.jsx("div",{style:{marginTop:10,height:210,width:"100%",...n},children:p.jsx(Xd,{processRowUpdate:m,isCellEditable:()=>!r,hideFooter:s,onProcessRowUpdateError:I=>console.error(I),rows:i,columns:g})}),!r&&p.jsx(oe,{sx:{mt:1},variant:"outlined",onClick:_,startIcon:p.jsx(Ls,{}),children:"Add Item"})]})};Vs.propTypes={rows:X.array,columns:X.array,style:X.any,disabled:X.bool,hideFooter:X.bool,onChange:X.func};function qe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=qe(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const Yd={},xo=e=>{let t;const n=new Set,r=(g,m)=>{const v=typeof g=="function"?g(t):g;if(!Object.is(v,t)){const _=t;t=m??(typeof v!="object"||v===null)?v:Object.assign({},t,v),n.forEach(I=>I(t,_))}},s=()=>t,l={setState:r,getState:s,getInitialState:()=>f,subscribe:g=>(n.add(g),()=>n.delete(g)),destroy:()=>{(Yd?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=t=e(r,s,l);return l},Zd=e=>e?xo(e):xo,{useDebugValue:Jd}=W,{useSyncExternalStoreWithSelector:Qd}=Uu,ec=e=>e;function Ui(e,t=ec,n){const r=Qd(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Jd(r),r}const ko=(e,t)=>{const n=Zd(e),r=(s,a=t)=>Ui(n,s,a);return Object.assign(r,n),r},tc=(e,t)=>e?ko(e,t):ko;function Re(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var nc={value:()=>{}};function wr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new er(n)}function er(e){this._=e}function rc(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}er.prototype=wr.prototype={constructor:er,on:function(e,t){var n=this._,r=rc(e+"",n),s,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((s=(e=r[a]).type)&&(s=sc(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(s=(e=r[a]).type)n[s]=So(n[s],e.name,t);else if(t==null)for(s in n)n[s]=So(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new er(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,s=a.length;r<s;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,a=r.length;s<a;++s)r[s].value.apply(t,n)}};function sc(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function So(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=nc,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var cs="http://www.w3.org/1999/xhtml";const Co={svg:"http://www.w3.org/2000/svg",xhtml:cs,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _r(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Co.hasOwnProperty(t)?{space:Co[t],local:e}:e}function oc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===cs&&t.documentElement.namespaceURI===cs?t.createElement(e):t.createElementNS(n,e)}}function ic(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Gi(e){var t=_r(e);return(t.local?ic:oc)(t)}function ac(){}function Ps(e){return e==null?ac:function(){return this.querySelector(e)}}function uc(e){typeof e!="function"&&(e=Ps(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var a=t[s],i=a.length,u=r[s]=new Array(i),l,f,g=0;g<i;++g)(l=a[g])&&(f=e.call(l,l.__data__,g,a))&&("__data__"in l&&(f.__data__=l.__data__),u[g]=f);return new He(r,this._parents)}function dc(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function cc(){return[]}function qi(e){return e==null?cc:function(){return this.querySelectorAll(e)}}function lc(e){return function(){return dc(e.apply(this,arguments))}}function fc(e){typeof e=="function"?e=lc(e):e=qi(e);for(var t=this._groups,n=t.length,r=[],s=[],a=0;a<n;++a)for(var i=t[a],u=i.length,l,f=0;f<u;++f)(l=i[f])&&(r.push(e.call(l,l.__data__,f,i)),s.push(l));return new He(r,s)}function Ki(e){return function(){return this.matches(e)}}function Xi(e){return function(t){return t.matches(e)}}var hc=Array.prototype.find;function pc(e){return function(){return hc.call(this.children,e)}}function gc(){return this.firstElementChild}function mc(e){return this.select(e==null?gc:pc(typeof e=="function"?e:Xi(e)))}var yc=Array.prototype.filter;function bc(){return Array.from(this.children)}function wc(e){return function(){return yc.call(this.children,e)}}function _c(e){return this.selectAll(e==null?bc:wc(typeof e=="function"?e:Xi(e)))}function vc(e){typeof e!="function"&&(e=Ki(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var a=t[s],i=a.length,u=r[s]=[],l,f=0;f<i;++f)(l=a[f])&&e.call(l,l.__data__,f,a)&&u.push(l);return new He(r,this._parents)}function Yi(e){return new Array(e.length)}function xc(){return new He(this._enter||this._groups.map(Yi),this._parents)}function ur(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ur.prototype={constructor:ur,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function kc(e){return function(){return e}}function Sc(e,t,n,r,s,a){for(var i=0,u,l=t.length,f=a.length;i<f;++i)(u=t[i])?(u.__data__=a[i],r[i]=u):n[i]=new ur(e,a[i]);for(;i<l;++i)(u=t[i])&&(s[i]=u)}function Cc(e,t,n,r,s,a,i){var u,l,f=new Map,g=t.length,m=a.length,v=new Array(g),_;for(u=0;u<g;++u)(l=t[u])&&(v[u]=_=i.call(l,l.__data__,u,t)+"",f.has(_)?s[u]=l:f.set(_,l));for(u=0;u<m;++u)_=i.call(e,a[u],u,a)+"",(l=f.get(_))?(r[u]=l,l.__data__=a[u],f.delete(_)):n[u]=new ur(e,a[u]);for(u=0;u<g;++u)(l=t[u])&&f.get(v[u])===l&&(s[u]=l)}function Ec(e){return e.__data__}function Mc(e,t){if(!arguments.length)return Array.from(this,Ec);var n=t?Cc:Sc,r=this._parents,s=this._groups;typeof e!="function"&&(e=kc(e));for(var a=s.length,i=new Array(a),u=new Array(a),l=new Array(a),f=0;f<a;++f){var g=r[f],m=s[f],v=m.length,_=jc(e.call(g,g&&g.__data__,f,r)),I=_.length,A=u[f]=new Array(I),T=i[f]=new Array(I),C=l[f]=new Array(v);n(g,m,A,T,C,_,t);for(var D=0,$=0,o,c;D<I;++D)if(o=A[D]){for(D>=$&&($=D+1);!(c=T[$])&&++$<I;);o._next=c||null}}return i=new He(i,r),i._enter=u,i._exit=l,i}function jc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ac(){return new He(this._exit||this._groups.map(Yi),this._parents)}function Tc(e,t,n){var r=this.enter(),s=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?a.remove():n(a),r&&s?r.merge(s).order():s}function Ic(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,a=r.length,i=Math.min(s,a),u=new Array(s),l=0;l<i;++l)for(var f=n[l],g=r[l],m=f.length,v=u[l]=new Array(m),_,I=0;I<m;++I)(_=f[I]||g[I])&&(v[I]=_);for(;l<s;++l)u[l]=n[l];return new He(u,this._parents)}function Nc(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,a=r[s],i;--s>=0;)(i=r[s])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function Dc(e){e||(e=Lc);function t(m,v){return m&&v?e(m.__data__,v.__data__):!m-!v}for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a){for(var i=n[a],u=i.length,l=s[a]=new Array(u),f,g=0;g<u;++g)(f=i[g])&&(l[g]=f);l.sort(t)}return new He(s,this._parents).order()}function Lc(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $c(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Rc(){return Array.from(this)}function zc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,a=r.length;s<a;++s){var i=r[s];if(i)return i}return null}function Hc(){let e=0;for(const t of this)++e;return e}function Vc(){return!this.node()}function Pc(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],a=0,i=s.length,u;a<i;++a)(u=s[a])&&e.call(u,u.__data__,a,s);return this}function Bc(e){return function(){this.removeAttribute(e)}}function Oc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Fc(e,t){return function(){this.setAttribute(e,t)}}function Wc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Uc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Gc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function qc(e,t){var n=_r(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Oc:Bc:typeof t=="function"?n.local?Gc:Uc:n.local?Wc:Fc)(n,t))}function Zi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Kc(e){return function(){this.style.removeProperty(e)}}function Xc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Yc(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Zc(e,t,n){return arguments.length>1?this.each((t==null?Kc:typeof t=="function"?Yc:Xc)(e,t,n??"")):tn(this.node(),e)}function tn(e,t){return e.style.getPropertyValue(t)||Zi(e).getComputedStyle(e,null).getPropertyValue(t)}function Jc(e){return function(){delete this[e]}}function Qc(e,t){return function(){this[e]=t}}function el(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function tl(e,t){return arguments.length>1?this.each((t==null?Jc:typeof t=="function"?el:Qc)(e,t)):this.node()[e]}function Ji(e){return e.trim().split(/^|\s+/)}function Bs(e){return e.classList||new Qi(e)}function Qi(e){this._node=e,this._names=Ji(e.getAttribute("class")||"")}Qi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ea(e,t){for(var n=Bs(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function ta(e,t){for(var n=Bs(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function nl(e){return function(){ea(this,e)}}function rl(e){return function(){ta(this,e)}}function sl(e,t){return function(){(t.apply(this,arguments)?ea:ta)(this,e)}}function ol(e,t){var n=Ji(e+"");if(arguments.length<2){for(var r=Bs(this.node()),s=-1,a=n.length;++s<a;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?sl:t?nl:rl)(n,t))}function il(){this.textContent=""}function al(e){return function(){this.textContent=e}}function ul(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function dl(e){return arguments.length?this.each(e==null?il:(typeof e=="function"?ul:al)(e)):this.node().textContent}function cl(){this.innerHTML=""}function ll(e){return function(){this.innerHTML=e}}function fl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function hl(e){return arguments.length?this.each(e==null?cl:(typeof e=="function"?fl:ll)(e)):this.node().innerHTML}function pl(){this.nextSibling&&this.parentNode.appendChild(this)}function gl(){return this.each(pl)}function ml(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yl(){return this.each(ml)}function bl(e){var t=typeof e=="function"?e:Gi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function wl(){return null}function _l(e,t){var n=typeof e=="function"?e:Gi(e),r=t==null?wl:typeof t=="function"?t:Ps(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function vl(){var e=this.parentNode;e&&e.removeChild(this)}function xl(){return this.each(vl)}function kl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Cl(e){return this.select(e?Sl:kl)}function El(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ml(e){return function(t){e.call(this,t,this.__data__)}}function jl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Al(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,a;n<s;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function Tl(e,t,n){return function(){var r=this.__on,s,a=Ml(t);if(r){for(var i=0,u=r.length;i<u;++i)if((s=r[i]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=t;return}}this.addEventListener(e.type,a,n),s={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(s):this.__on=[s]}}function Il(e,t,n){var r=jl(e+""),s,a=r.length,i;if(arguments.length<2){var u=this.node().__on;if(u){for(var l=0,f=u.length,g;l<f;++l)for(s=0,g=u[l];s<a;++s)if((i=r[s]).type===g.type&&i.name===g.name)return g.value}return}for(u=t?Tl:Al,s=0;s<a;++s)this.each(u(r[s],t,n));return this}function na(e,t,n){var r=Zi(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function Nl(e,t){return function(){return na(this,e,t)}}function Dl(e,t){return function(){return na(this,e,t.apply(this,arguments))}}function Ll(e,t){return this.each((typeof t=="function"?Dl:Nl)(e,t))}function*$l(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,a=r.length,i;s<a;++s)(i=r[s])&&(yield i)}var ra=[null];function He(e,t){this._groups=e,this._parents=t}function Ln(){return new He([[document.documentElement]],ra)}function Rl(){return this}He.prototype=Ln.prototype={constructor:He,select:uc,selectAll:fc,selectChild:mc,selectChildren:_c,filter:vc,data:Mc,enter:xc,exit:Ac,join:Tc,merge:Ic,selection:Rl,order:Nc,sort:Dc,call:$c,nodes:Rc,node:zc,size:Hc,empty:Vc,each:Pc,attr:qc,style:Zc,property:tl,classed:ol,text:dl,html:hl,raise:gl,lower:yl,append:bl,insert:_l,remove:xl,clone:Cl,datum:El,on:Il,dispatch:Ll,[Symbol.iterator]:$l};function Ze(e){return typeof e=="string"?new He([[document.querySelector(e)]],[document.documentElement]):new He([[e]],ra)}function zl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function rt(e,t){if(e=zl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const Hl={passive:!1},kn={capture:!0,passive:!1};function qr(e){e.stopImmediatePropagation()}function Yt(e){e.preventDefault(),e.stopImmediatePropagation()}function sa(e){var t=e.document.documentElement,n=Ze(e).on("dragstart.drag",Yt,kn);"onselectstart"in t?n.on("selectstart.drag",Yt,kn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function oa(e,t){var n=e.document.documentElement,r=Ze(e).on("dragstart.drag",null);t&&(r.on("click.drag",Yt,kn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Wn=e=>()=>e;function ls(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:a,x:i,y:u,dx:l,dy:f,dispatch:g}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:g}})}ls.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Vl(e){return!e.ctrlKey&&!e.button}function Pl(){return this.parentNode}function Bl(e,t){return t??{x:e.x,y:e.y}}function Ol(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fl(){var e=Vl,t=Pl,n=Bl,r=Ol,s={},a=wr("start","drag","end"),i=0,u,l,f,g,m=0;function v(o){o.on("mousedown.drag",_).filter(r).on("touchstart.drag",T).on("touchmove.drag",C,Hl).on("touchend.drag touchcancel.drag",D).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(o,c){if(!(g||!e.call(this,o,c))){var d=$(this,t.call(this,o,c),o,c,"mouse");d&&(Ze(o.view).on("mousemove.drag",I,kn).on("mouseup.drag",A,kn),sa(o.view),qr(o),f=!1,u=o.clientX,l=o.clientY,d("start",o))}}function I(o){if(Yt(o),!f){var c=o.clientX-u,d=o.clientY-l;f=c*c+d*d>m}s.mouse("drag",o)}function A(o){Ze(o.view).on("mousemove.drag mouseup.drag",null),oa(o.view,f),Yt(o),s.mouse("end",o)}function T(o,c){if(e.call(this,o,c)){var d=o.changedTouches,y=t.call(this,o,c),w=d.length,x,k;for(x=0;x<w;++x)(k=$(this,y,o,c,d[x].identifier,d[x]))&&(qr(o),k("start",o,d[x]))}}function C(o){var c=o.changedTouches,d=c.length,y,w;for(y=0;y<d;++y)(w=s[c[y].identifier])&&(Yt(o),w("drag",o,c[y]))}function D(o){var c=o.changedTouches,d=c.length,y,w;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),y=0;y<d;++y)(w=s[c[y].identifier])&&(qr(o),w("end",o,c[y]))}function $(o,c,d,y,w,x){var k=a.copy(),M=rt(x||d,c),z,R,b;if((b=n.call(o,new ls("beforestart",{sourceEvent:d,target:v,identifier:w,active:i,x:M[0],y:M[1],dx:0,dy:0,dispatch:k}),y))!=null)return z=b.x-M[0]||0,R=b.y-M[1]||0,function S(h,j,H){var N=M,V;switch(h){case"start":s[w]=S,V=i++;break;case"end":delete s[w],--i;case"drag":M=rt(H||j,c),V=i;break}k.call(h,o,new ls(h,{sourceEvent:j,subject:b,target:v,identifier:w,active:V,x:M[0]+z,y:M[1]+R,dx:M[0]-N[0],dy:M[1]-N[1],dispatch:k}),y)}}return v.filter=function(o){return arguments.length?(e=typeof o=="function"?o:Wn(!!o),v):e},v.container=function(o){return arguments.length?(t=typeof o=="function"?o:Wn(o),v):t},v.subject=function(o){return arguments.length?(n=typeof o=="function"?o:Wn(o),v):n},v.touchable=function(o){return arguments.length?(r=typeof o=="function"?o:Wn(!!o),v):r},v.on=function(){var o=a.on.apply(a,arguments);return o===a?v:o},v.clickDistance=function(o){return arguments.length?(m=(o=+o)*o,v):Math.sqrt(m)},v}var Eo=180/Math.PI,fs={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ia(e,t,n,r,s,a){var i,u,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,l/=u),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:s,translateY:a,rotate:Math.atan2(t,e)*Eo,skewX:Math.atan(l)*Eo,scaleX:i,scaleY:u}}var Un;function Wl(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?fs:ia(t.a,t.b,t.c,t.d,t.e,t.f)}function Ul(e){return e==null||(Un||(Un=document.createElementNS("http://www.w3.org/2000/svg","g")),Un.setAttribute("transform",e),!(e=Un.transform.baseVal.consolidate()))?fs:(e=e.matrix,ia(e.a,e.b,e.c,e.d,e.e,e.f))}function aa(e,t,n,r){function s(f){return f.length?f.pop()+" ":""}function a(f,g,m,v,_,I){if(f!==m||g!==v){var A=_.push("translate(",null,t,null,n);I.push({i:A-4,x:Dt(f,m)},{i:A-2,x:Dt(g,v)})}else(m||v)&&_.push("translate("+m+t+v+n)}function i(f,g,m,v){f!==g?(f-g>180?g+=360:g-f>180&&(f+=360),v.push({i:m.push(s(m)+"rotate(",null,r)-2,x:Dt(f,g)})):g&&m.push(s(m)+"rotate("+g+r)}function u(f,g,m,v){f!==g?v.push({i:m.push(s(m)+"skewX(",null,r)-2,x:Dt(f,g)}):g&&m.push(s(m)+"skewX("+g+r)}function l(f,g,m,v,_,I){if(f!==m||g!==v){var A=_.push(s(_)+"scale(",null,",",null,")");I.push({i:A-4,x:Dt(f,m)},{i:A-2,x:Dt(g,v)})}else(m!==1||v!==1)&&_.push(s(_)+"scale("+m+","+v+")")}return function(f,g){var m=[],v=[];return f=e(f),g=e(g),a(f.translateX,f.translateY,g.translateX,g.translateY,m,v),i(f.rotate,g.rotate,m,v),u(f.skewX,g.skewX,m,v),l(f.scaleX,f.scaleY,g.scaleX,g.scaleY,m,v),f=g=null,function(_){for(var I=-1,A=v.length,T;++I<A;)m[(T=v[I]).i]=T.x(_);return m.join("")}}}var Gl=aa(Wl,"px, ","px)","deg)"),ql=aa(Ul,", ",")",")"),Kl=1e-12;function Mo(e){return((e=Math.exp(e))+1/e)/2}function Xl(e){return((e=Math.exp(e))-1/e)/2}function Yl(e){return((e=Math.exp(2*e))-1)/(e+1)}const Zl=function e(t,n,r){function s(a,i){var u=a[0],l=a[1],f=a[2],g=i[0],m=i[1],v=i[2],_=g-u,I=m-l,A=_*_+I*I,T,C;if(A<Kl)C=Math.log(v/f)/t,T=function(y){return[u+y*_,l+y*I,f*Math.exp(t*y*C)]};else{var D=Math.sqrt(A),$=(v*v-f*f+r*A)/(2*f*n*D),o=(v*v-f*f-r*A)/(2*v*n*D),c=Math.log(Math.sqrt($*$+1)-$),d=Math.log(Math.sqrt(o*o+1)-o);C=(d-c)/t,T=function(y){var w=y*C,x=Mo(c),k=f/(n*D)*(x*Yl(t*w+c)-Xl(c));return[u+k*_,l+k*I,f*x/Mo(t*w+c)]}}return T.duration=C*1e3*t/Math.SQRT2,T}return s.rho=function(a){var i=Math.max(.001,+a),u=i*i,l=u*u;return e(i,u,l)},s}(Math.SQRT2,2,4);var nn=0,yn=0,fn=0,ua=1e3,dr,bn,cr=0,Vt=0,vr=0,Sn=typeof performance=="object"&&performance.now?performance:Date,da=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Os(){return Vt||(da(Jl),Vt=Sn.now()+vr)}function Jl(){Vt=0}function lr(){this._call=this._time=this._next=null}lr.prototype=ca.prototype={constructor:lr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Os():+n)+(t==null?0:+t),!this._next&&bn!==this&&(bn?bn._next=this:dr=this,bn=this),this._call=e,this._time=n,hs()},stop:function(){this._call&&(this._call=null,this._time=1/0,hs())}};function ca(e,t,n){var r=new lr;return r.restart(e,t,n),r}function Ql(){Os(),++nn;for(var e=dr,t;e;)(t=Vt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--nn}function jo(){Vt=(cr=Sn.now())+vr,nn=yn=0;try{Ql()}finally{nn=0,tf(),Vt=0}}function ef(){var e=Sn.now(),t=e-cr;t>ua&&(vr-=t,cr=e)}function tf(){for(var e,t=dr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:dr=n);bn=e,hs(r)}function hs(e){if(!nn){yn&&(yn=clearTimeout(yn));var t=e-Vt;t>24?(e<1/0&&(yn=setTimeout(jo,e-Sn.now()-vr)),fn&&(fn=clearInterval(fn))):(fn||(cr=Sn.now(),fn=setInterval(ef,ua)),nn=1,da(jo))}}function Ao(e,t,n){var r=new lr;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var nf=wr("start","end","cancel","interrupt"),rf=[],la=0,To=1,ps=2,tr=3,Io=4,gs=5,nr=6;function xr(e,t,n,r,s,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;sf(e,n,{name:t,index:r,group:s,on:nf,tween:rf,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:la})}function Fs(e,t){var n=et(e,t);if(n.state>la)throw new Error("too late; already scheduled");return n}function at(e,t){var n=et(e,t);if(n.state>tr)throw new Error("too late; already running");return n}function et(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function sf(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=ca(a,0,n.time);function a(f){n.state=To,n.timer.restart(i,n.delay,n.time),n.delay<=f&&i(f-n.delay)}function i(f){var g,m,v,_;if(n.state!==To)return l();for(g in r)if(_=r[g],_.name===n.name){if(_.state===tr)return Ao(i);_.state===Io?(_.state=nr,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete r[g]):+g<t&&(_.state=nr,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete r[g])}if(Ao(function(){n.state===tr&&(n.state=Io,n.timer.restart(u,n.delay,n.time),u(f))}),n.state=ps,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ps){for(n.state=tr,s=new Array(v=n.tween.length),g=0,m=-1;g<v;++g)(_=n.tween[g].value.call(e,e.__data__,n.index,n.group))&&(s[++m]=_);s.length=m+1}}function u(f){for(var g=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(l),n.state=gs,1),m=-1,v=s.length;++m<v;)s[m].call(e,g);n.state===gs&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=nr,n.timer.stop(),delete r[t];for(var f in r)return;delete e.__transition}}function rr(e,t){var n=e.__transition,r,s,a=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){a=!1;continue}s=r.state>ps&&r.state<gs,r.state=nr,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}a&&delete e.__transition}}function of(e){return this.each(function(){rr(this,e)})}function af(e,t){var n,r;return function(){var s=at(this,e),a=s.tween;if(a!==n){r=n=a;for(var i=0,u=r.length;i<u;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}s.tween=r}}function uf(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var a=at(this,e),i=a.tween;if(i!==r){s=(r=i).slice();for(var u={name:t,value:n},l=0,f=s.length;l<f;++l)if(s[l].name===t){s[l]=u;break}l===f&&s.push(u)}a.tween=s}}function df(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=et(this.node(),n).tween,s=0,a=r.length,i;s<a;++s)if((i=r[s]).name===e)return i.value;return null}return this.each((t==null?af:uf)(n,e,t))}function Ws(e,t,n){var r=e._id;return e.each(function(){var s=at(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return et(s,r).value[t]}}function fa(e,t){var n;return(typeof t=="number"?Dt:t instanceof _o?wo:(n=_o(t))?(t=n,wo):Rd)(e,t)}function cf(e){return function(){this.removeAttribute(e)}}function lf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ff(e,t,n){var r,s=n+"",a;return function(){var i=this.getAttribute(e);return i===s?null:i===r?a:a=t(r=i,n)}}function hf(e,t,n){var r,s=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===s?null:i===r?a:a=t(r=i,n)}}function pf(e,t,n){var r,s,a;return function(){var i,u=n(this),l;return u==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=u+"",i===l?null:i===r&&l===s?a:(s=l,a=t(r=i,u)))}}function gf(e,t,n){var r,s,a;return function(){var i,u=n(this),l;return u==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=u+"",i===l?null:i===r&&l===s?a:(s=l,a=t(r=i,u)))}}function mf(e,t){var n=_r(e),r=n==="transform"?ql:fa;return this.attrTween(e,typeof t=="function"?(n.local?gf:pf)(n,r,Ws(this,"attr."+e,t)):t==null?(n.local?lf:cf)(n):(n.local?hf:ff)(n,r,t))}function yf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function bf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function wf(e,t){var n,r;function s(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&bf(e,a)),n}return s._value=t,s}function _f(e,t){var n,r;function s(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&yf(e,a)),n}return s._value=t,s}function vf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=_r(e);return this.tween(n,(r.local?wf:_f)(r,t))}function xf(e,t){return function(){Fs(this,e).delay=+t.apply(this,arguments)}}function kf(e,t){return t=+t,function(){Fs(this,e).delay=t}}function Sf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xf:kf)(t,e)):et(this.node(),t).delay}function Cf(e,t){return function(){at(this,e).duration=+t.apply(this,arguments)}}function Ef(e,t){return t=+t,function(){at(this,e).duration=t}}function Mf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cf:Ef)(t,e)):et(this.node(),t).duration}function jf(e,t){if(typeof t!="function")throw new Error;return function(){at(this,e).ease=t}}function Af(e){var t=this._id;return arguments.length?this.each(jf(t,e)):et(this.node(),t).ease}function Tf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;at(this,e).ease=n}}function If(e){if(typeof e!="function")throw new Error;return this.each(Tf(this._id,e))}function Nf(e){typeof e!="function"&&(e=Ki(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var a=t[s],i=a.length,u=r[s]=[],l,f=0;f<i;++f)(l=a[f])&&e.call(l,l.__data__,f,a)&&u.push(l);return new gt(r,this._parents,this._name,this._id)}function Df(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,a=Math.min(r,s),i=new Array(r),u=0;u<a;++u)for(var l=t[u],f=n[u],g=l.length,m=i[u]=new Array(g),v,_=0;_<g;++_)(v=l[_]||f[_])&&(m[_]=v);for(;u<r;++u)i[u]=t[u];return new gt(i,this._parents,this._name,this._id)}function Lf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function $f(e,t,n){var r,s,a=Lf(t)?Fs:at;return function(){var i=a(this,e),u=i.on;u!==r&&(s=(r=u).copy()).on(t,n),i.on=s}}function Rf(e,t){var n=this._id;return arguments.length<2?et(this.node(),n).on.on(e):this.each($f(n,e,t))}function zf(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Hf(){return this.on("end.remove",zf(this._id))}function Vf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ps(e));for(var r=this._groups,s=r.length,a=new Array(s),i=0;i<s;++i)for(var u=r[i],l=u.length,f=a[i]=new Array(l),g,m,v=0;v<l;++v)(g=u[v])&&(m=e.call(g,g.__data__,v,u))&&("__data__"in g&&(m.__data__=g.__data__),f[v]=m,xr(f[v],t,n,v,f,et(g,n)));return new gt(a,this._parents,t,n)}function Pf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=qi(e));for(var r=this._groups,s=r.length,a=[],i=[],u=0;u<s;++u)for(var l=r[u],f=l.length,g,m=0;m<f;++m)if(g=l[m]){for(var v=e.call(g,g.__data__,m,l),_,I=et(g,n),A=0,T=v.length;A<T;++A)(_=v[A])&&xr(_,t,n,A,v,I);a.push(v),i.push(g)}return new gt(a,i,t,n)}var Bf=Ln.prototype.constructor;function Of(){return new Bf(this._groups,this._parents)}function Ff(e,t){var n,r,s;return function(){var a=tn(this,e),i=(this.style.removeProperty(e),tn(this,e));return a===i?null:a===n&&i===r?s:s=t(n=a,r=i)}}function ha(e){return function(){this.style.removeProperty(e)}}function Wf(e,t,n){var r,s=n+"",a;return function(){var i=tn(this,e);return i===s?null:i===r?a:a=t(r=i,n)}}function Uf(e,t,n){var r,s,a;return function(){var i=tn(this,e),u=n(this),l=u+"";return u==null&&(l=u=(this.style.removeProperty(e),tn(this,e))),i===l?null:i===r&&l===s?a:(s=l,a=t(r=i,u))}}function Gf(e,t){var n,r,s,a="style."+t,i="end."+a,u;return function(){var l=at(this,e),f=l.on,g=l.value[a]==null?u||(u=ha(t)):void 0;(f!==n||s!==g)&&(r=(n=f).copy()).on(i,s=g),l.on=r}}function qf(e,t,n){var r=(e+="")=="transform"?Gl:fa;return t==null?this.styleTween(e,Ff(e,r)).on("end.style."+e,ha(e)):typeof t=="function"?this.styleTween(e,Uf(e,r,Ws(this,"style."+e,t))).each(Gf(this._id,e)):this.styleTween(e,Wf(e,r,t),n).on("end.style."+e,null)}function Kf(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Xf(e,t,n){var r,s;function a(){var i=t.apply(this,arguments);return i!==s&&(r=(s=i)&&Kf(e,i,n)),r}return a._value=t,a}function Yf(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Xf(e,t,n??""))}function Zf(e){return function(){this.textContent=e}}function Jf(e){return function(){var t=e(this);this.textContent=t??""}}function Qf(e){return this.tween("text",typeof e=="function"?Jf(Ws(this,"text",e)):Zf(e==null?"":e+""))}function eh(e){return function(t){this.textContent=e.call(this,t)}}function th(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&eh(s)),t}return r._value=e,r}function nh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,th(e))}function rh(){for(var e=this._name,t=this._id,n=pa(),r=this._groups,s=r.length,a=0;a<s;++a)for(var i=r[a],u=i.length,l,f=0;f<u;++f)if(l=i[f]){var g=et(l,t);xr(l,e,n,f,i,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new gt(r,this._parents,e,n)}function sh(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(a,i){var u={value:i},l={value:function(){--s===0&&a()}};n.each(function(){var f=at(this,r),g=f.on;g!==e&&(t=(e=g).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(l)),f.on=t}),s===0&&a()})}var oh=0;function gt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function pa(){return++oh}var ht=Ln.prototype;gt.prototype={constructor:gt,select:Vf,selectAll:Pf,selectChild:ht.selectChild,selectChildren:ht.selectChildren,filter:Nf,merge:Df,selection:Of,transition:rh,call:ht.call,nodes:ht.nodes,node:ht.node,size:ht.size,empty:ht.empty,each:ht.each,on:Rf,attr:mf,attrTween:vf,style:qf,styleTween:Yf,text:Qf,textTween:nh,remove:Hf,tween:df,delay:Sf,duration:Mf,ease:Af,easeVarying:If,end:sh,[Symbol.iterator]:ht[Symbol.iterator]};function ih(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ah={time:null,delay:0,duration:250,ease:ih};function uh(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function dh(e){var t,n;e instanceof gt?(t=e._id,e=e._name):(t=pa(),(n=ah).time=Os(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,a=0;a<s;++a)for(var i=r[a],u=i.length,l,f=0;f<u;++f)(l=i[f])&&xr(l,e,t,f,i,n||uh(l,t));return new gt(r,this._parents,e,t)}Ln.prototype.interrupt=of;Ln.prototype.transition=dh;const Gn=e=>()=>e;function ch(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function pt(e,t,n){this.k=e,this.x=t,this.y=n}pt.prototype={constructor:pt,scale:function(e){return e===1?this:new pt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new pt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Et=new pt(1,0,0);pt.prototype;function Kr(e){e.stopImmediatePropagation()}function hn(e){e.preventDefault(),e.stopImmediatePropagation()}function lh(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function fh(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function No(){return this.__zoom||Et}function hh(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ph(){return navigator.maxTouchPoints||"ontouchstart"in this}function gh(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function mh(){var e=lh,t=fh,n=gh,r=hh,s=ph,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],u=250,l=Zl,f=wr("start","zoom","end"),g,m,v,_=500,I=150,A=0,T=10;function C(b){b.property("__zoom",No).on("wheel.zoom",w,{passive:!1}).on("mousedown.zoom",x).on("dblclick.zoom",k).filter(s).on("touchstart.zoom",M).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(b,S,h,j){var H=b.selection?b.selection():b;H.property("__zoom",No),b!==H?c(b,S,h,j):H.interrupt().each(function(){d(this,arguments).event(j).start().zoom(null,typeof S=="function"?S.apply(this,arguments):S).end()})},C.scaleBy=function(b,S,h,j){C.scaleTo(b,function(){var H=this.__zoom.k,N=typeof S=="function"?S.apply(this,arguments):S;return H*N},h,j)},C.scaleTo=function(b,S,h,j){C.transform(b,function(){var H=t.apply(this,arguments),N=this.__zoom,V=h==null?o(H):typeof h=="function"?h.apply(this,arguments):h,L=N.invert(V),P=typeof S=="function"?S.apply(this,arguments):S;return n($(D(N,P),V,L),H,i)},h,j)},C.translateBy=function(b,S,h,j){C.transform(b,function(){return n(this.__zoom.translate(typeof S=="function"?S.apply(this,arguments):S,typeof h=="function"?h.apply(this,arguments):h),t.apply(this,arguments),i)},null,j)},C.translateTo=function(b,S,h,j,H){C.transform(b,function(){var N=t.apply(this,arguments),V=this.__zoom,L=j==null?o(N):typeof j=="function"?j.apply(this,arguments):j;return n(Et.translate(L[0],L[1]).scale(V.k).translate(typeof S=="function"?-S.apply(this,arguments):-S,typeof h=="function"?-h.apply(this,arguments):-h),N,i)},j,H)};function D(b,S){return S=Math.max(a[0],Math.min(a[1],S)),S===b.k?b:new pt(S,b.x,b.y)}function $(b,S,h){var j=S[0]-h[0]*b.k,H=S[1]-h[1]*b.k;return j===b.x&&H===b.y?b:new pt(b.k,j,H)}function o(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function c(b,S,h,j){b.on("start.zoom",function(){d(this,arguments).event(j).start()}).on("interrupt.zoom end.zoom",function(){d(this,arguments).event(j).end()}).tween("zoom",function(){var H=this,N=arguments,V=d(H,N).event(j),L=t.apply(H,N),P=h==null?o(L):typeof h=="function"?h.apply(H,N):h,O=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),F=H.__zoom,G=typeof S=="function"?S.apply(H,N):S,ee=l(F.invert(P).concat(O/F.k),G.invert(P).concat(O/G.k));return function(K){if(K===1)K=G;else{var q=ee(K),re=O/q[2];K=new pt(re,P[0]-q[0]*re,P[1]-q[1]*re)}V.zoom(null,K)}})}function d(b,S,h){return!h&&b.__zooming||new y(b,S)}function y(b,S){this.that=b,this.args=S,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,S),this.taps=0}y.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,S){return this.mouse&&b!=="mouse"&&(this.mouse[1]=S.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=S.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=S.invert(this.touch1[0])),this.that.__zoom=S,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var S=Ze(this.that).datum();f.call(b,this.that,new ch(b,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:f}),S)}};function w(b,...S){if(!e.apply(this,arguments))return;var h=d(this,S).event(b),j=this.__zoom,H=Math.max(a[0],Math.min(a[1],j.k*Math.pow(2,r.apply(this,arguments)))),N=rt(b);if(h.wheel)(h.mouse[0][0]!==N[0]||h.mouse[0][1]!==N[1])&&(h.mouse[1]=j.invert(h.mouse[0]=N)),clearTimeout(h.wheel);else{if(j.k===H)return;h.mouse=[N,j.invert(N)],rr(this),h.start()}hn(b),h.wheel=setTimeout(V,I),h.zoom("mouse",n($(D(j,H),h.mouse[0],h.mouse[1]),h.extent,i));function V(){h.wheel=null,h.end()}}function x(b,...S){if(v||!e.apply(this,arguments))return;var h=b.currentTarget,j=d(this,S,!0).event(b),H=Ze(b.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",O,!0),N=rt(b,h),V=b.clientX,L=b.clientY;sa(b.view),Kr(b),j.mouse=[N,this.__zoom.invert(N)],rr(this),j.start();function P(F){if(hn(F),!j.moved){var G=F.clientX-V,ee=F.clientY-L;j.moved=G*G+ee*ee>A}j.event(F).zoom("mouse",n($(j.that.__zoom,j.mouse[0]=rt(F,h),j.mouse[1]),j.extent,i))}function O(F){H.on("mousemove.zoom mouseup.zoom",null),oa(F.view,j.moved),hn(F),j.event(F).end()}}function k(b,...S){if(e.apply(this,arguments)){var h=this.__zoom,j=rt(b.changedTouches?b.changedTouches[0]:b,this),H=h.invert(j),N=h.k*(b.shiftKey?.5:2),V=n($(D(h,N),j,H),t.apply(this,S),i);hn(b),u>0?Ze(this).transition().duration(u).call(c,V,j,b):Ze(this).call(C.transform,V,j,b)}}function M(b,...S){if(e.apply(this,arguments)){var h=b.touches,j=h.length,H=d(this,S,b.changedTouches.length===j).event(b),N,V,L,P;for(Kr(b),V=0;V<j;++V)L=h[V],P=rt(L,this),P=[P,this.__zoom.invert(P),L.identifier],H.touch0?!H.touch1&&H.touch0[2]!==P[2]&&(H.touch1=P,H.taps=0):(H.touch0=P,N=!0,H.taps=1+!!g);g&&(g=clearTimeout(g)),N&&(H.taps<2&&(m=P[0],g=setTimeout(function(){g=null},_)),rr(this),H.start())}}function z(b,...S){if(this.__zooming){var h=d(this,S).event(b),j=b.changedTouches,H=j.length,N,V,L,P;for(hn(b),N=0;N<H;++N)V=j[N],L=rt(V,this),h.touch0&&h.touch0[2]===V.identifier?h.touch0[0]=L:h.touch1&&h.touch1[2]===V.identifier&&(h.touch1[0]=L);if(V=h.that.__zoom,h.touch1){var O=h.touch0[0],F=h.touch0[1],G=h.touch1[0],ee=h.touch1[1],K=(K=G[0]-O[0])*K+(K=G[1]-O[1])*K,q=(q=ee[0]-F[0])*q+(q=ee[1]-F[1])*q;V=D(V,Math.sqrt(K/q)),L=[(O[0]+G[0])/2,(O[1]+G[1])/2],P=[(F[0]+ee[0])/2,(F[1]+ee[1])/2]}else if(h.touch0)L=h.touch0[0],P=h.touch0[1];else return;h.zoom("touch",n($(V,L,P),h.extent,i))}}function R(b,...S){if(this.__zooming){var h=d(this,S).event(b),j=b.changedTouches,H=j.length,N,V;for(Kr(b),v&&clearTimeout(v),v=setTimeout(function(){v=null},_),N=0;N<H;++N)V=j[N],h.touch0&&h.touch0[2]===V.identifier?delete h.touch0:h.touch1&&h.touch1[2]===V.identifier&&delete h.touch1;if(h.touch1&&!h.touch0&&(h.touch0=h.touch1,delete h.touch1),h.touch0)h.touch0[1]=this.__zoom.invert(h.touch0[0]);else if(h.end(),h.taps===2&&(V=rt(V,this),Math.hypot(m[0]-V[0],m[1]-V[1])<T)){var L=Ze(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return C.wheelDelta=function(b){return arguments.length?(r=typeof b=="function"?b:Gn(+b),C):r},C.filter=function(b){return arguments.length?(e=typeof b=="function"?b:Gn(!!b),C):e},C.touchable=function(b){return arguments.length?(s=typeof b=="function"?b:Gn(!!b),C):s},C.extent=function(b){return arguments.length?(t=typeof b=="function"?b:Gn([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),C):t},C.scaleExtent=function(b){return arguments.length?(a[0]=+b[0],a[1]=+b[1],C):[a[0],a[1]]},C.translateExtent=function(b){return arguments.length?(i[0][0]=+b[0][0],i[1][0]=+b[1][0],i[0][1]=+b[0][1],i[1][1]=+b[1][1],C):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},C.constrain=function(b){return arguments.length?(n=b,C):n},C.duration=function(b){return arguments.length?(u=+b,C):u},C.interpolate=function(b){return arguments.length?(l=b,C):l},C.on=function(){var b=f.on.apply(f,arguments);return b===f?C:b},C.clickDistance=function(b){return arguments.length?(A=(b=+b)*b,C):Math.sqrt(A)},C.tapDistance=function(b){return arguments.length?(T=+b,C):T},C}const kr=E.createContext(null),yh=kr.Provider,mt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},ga=mt.error001();function ye(e,t){const n=E.useContext(kr);if(n===null)throw new Error(ga);return Ui(n,e,t)}const Ee=()=>{const e=E.useContext(kr);if(e===null)throw new Error(ga);return E.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},bh=e=>e.userSelectionActive?"none":"all";function wh({position:e,children:t,className:n,style:r,...s}){const a=ye(bh),i=`${e}`.split("-");return W.createElement("div",{className:qe(["react-flow__panel",n,...i]),style:{...r,pointerEvents:a},...s},t)}function _h({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:W.createElement(wh,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},W.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const vh=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:u=2,children:l,className:f,...g})=>{const m=E.useRef(null),[v,_]=E.useState({x:0,y:0,width:0,height:0}),I=qe(["react-flow__edge-textwrapper",f]);return E.useEffect(()=>{if(m.current){const A=m.current.getBBox();_({x:A.x,y:A.y,width:A.width,height:A.height})}},[n]),typeof n>"u"||!n?null:W.createElement("g",{transform:`translate(${e-v.width/2} ${t-v.height/2})`,className:I,visibility:v.width?"visible":"hidden",...g},s&&W.createElement("rect",{width:v.width+2*i[0],x:-i[0],y:-i[1],height:v.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:u,ry:u}),W.createElement("text",{className:"react-flow__edge-text",y:v.height/2,dy:"0.3em",ref:m,style:r},n),l)};var xh=E.memo(vh);const Us=e=>({width:e.offsetWidth,height:e.offsetHeight}),rn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Gs=(e={x:0,y:0},t)=>({x:rn(e.x,t[0][0],t[1][0]),y:rn(e.y,t[0][1],t[1][1])}),Do=(e,t,n)=>e<t?rn(Math.abs(e-t),1,50)/50:e>n?-rn(Math.abs(e-n),1,50)/50:0,ma=(e,t)=>{const n=Do(e.x,35,t.width-35)*20,r=Do(e.y,35,t.height-35)*20;return[n,r]},ya=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},ba=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Cn=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),wa=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Lo=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),C0=(e,t)=>wa(ba(Cn(e),Cn(t))),ms=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},kh=e=>Ue(e.width)&&Ue(e.height)&&Ue(e.x)&&Ue(e.y),Ue=e=>!isNaN(e)&&isFinite(e),me=Symbol.for("internals"),_a=["Enter"," ","Escape"],Sh=(e,t)=>{},Ch=e=>"nativeEvent"in e;function ys(e){var s,a;const t=Ch(e)?e.nativeEvent:e,n=((a=(s=t.composedPath)==null?void 0:s.call(t))==null?void 0:a[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const va=e=>"clientX"in e,Mt=(e,t)=>{var a,i;const n=va(e),r=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,s=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},fr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},$n=({id:e,path:t,labelX:n,labelY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:g,markerEnd:m,markerStart:v,interactionWidth:_=20})=>W.createElement(W.Fragment,null,W.createElement("path",{id:e,style:g,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:m,markerStart:v}),_&&W.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:_,className:"react-flow__edge-interaction"}),s&&Ue(n)&&Ue(r)?W.createElement(xh,{x:n,y:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f}):null);$n.displayName="BaseEdge";function pn(e,t,n){return n===void 0?n:r=>{const s=t().edges.find(a=>a.id===e);s&&n(r,{...s})}}function xa({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,a=n<e?n+s:n-s,i=Math.abs(r-t)/2,u=r<t?r+i:r-i;return[a,u,s,i]}function ka({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:i,targetControlY:u}){const l=e*.125+s*.375+i*.375+n*.125,f=t*.125+a*.375+u*.375+r*.125,g=Math.abs(l-e),m=Math.abs(f-t);return[l,f,g,m]}var Pt;(function(e){e.Strict="strict",e.Loose="loose"})(Pt||(Pt={}));var Rt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Rt||(Rt={}));var En;(function(e){e.Partial="partial",e.Full="full"})(En||(En={}));var Ct;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ct||(Ct={}));var hr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(hr||(hr={}));var J;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(J||(J={}));function $o({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===J.Left||e===J.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function Sa({sourceX:e,sourceY:t,sourcePosition:n=J.Bottom,targetX:r,targetY:s,targetPosition:a=J.Top}){const[i,u]=$o({pos:n,x1:e,y1:t,x2:r,y2:s}),[l,f]=$o({pos:a,x1:r,y1:s,x2:e,y2:t}),[g,m,v,_]=ka({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:i,sourceControlY:u,targetControlX:l,targetControlY:f});return[`M${e},${t} C${i},${u} ${l},${f} ${r},${s}`,g,m,v,_]}const qs=E.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s=J.Bottom,targetPosition:a=J.Top,label:i,labelStyle:u,labelShowBg:l,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:m,style:v,markerEnd:_,markerStart:I,interactionWidth:A})=>{const[T,C,D]=Sa({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:a});return W.createElement($n,{path:T,labelX:C,labelY:D,label:i,labelStyle:u,labelShowBg:l,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:m,style:v,markerEnd:_,markerStart:I,interactionWidth:A})});qs.displayName="SimpleBezierEdge";const Ro={[J.Left]:{x:-1,y:0},[J.Right]:{x:1,y:0},[J.Top]:{x:0,y:-1},[J.Bottom]:{x:0,y:1}},Eh=({source:e,sourcePosition:t=J.Bottom,target:n})=>t===J.Left||t===J.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},zo=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Mh({source:e,sourcePosition:t=J.Bottom,target:n,targetPosition:r=J.Top,center:s,offset:a}){const i=Ro[t],u=Ro[r],l={x:e.x+i.x*a,y:e.y+i.y*a},f={x:n.x+u.x*a,y:n.y+u.y*a},g=Eh({source:l,sourcePosition:t,target:f}),m=g.x!==0?"x":"y",v=g[m];let _=[],I,A;const T={x:0,y:0},C={x:0,y:0},[D,$,o,c]=xa({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[m]*u[m]===-1){I=s.x??D,A=s.y??$;const y=[{x:I,y:l.y},{x:I,y:f.y}],w=[{x:l.x,y:A},{x:f.x,y:A}];i[m]===v?_=m==="x"?y:w:_=m==="x"?w:y}else{const y=[{x:l.x,y:f.y}],w=[{x:f.x,y:l.y}];if(m==="x"?_=i.x===v?w:y:_=i.y===v?y:w,t===r){const R=Math.abs(e[m]-n[m]);if(R<=a){const b=Math.min(a-1,a-R);i[m]===v?T[m]=(l[m]>e[m]?-1:1)*b:C[m]=(f[m]>n[m]?-1:1)*b}}if(t!==r){const R=m==="x"?"y":"x",b=i[m]===u[R],S=l[R]>f[R],h=l[R]<f[R];(i[m]===1&&(!b&&S||b&&h)||i[m]!==1&&(!b&&h||b&&S))&&(_=m==="x"?y:w)}const x={x:l.x+T.x,y:l.y+T.y},k={x:f.x+C.x,y:f.y+C.y},M=Math.max(Math.abs(x.x-_[0].x),Math.abs(k.x-_[0].x)),z=Math.max(Math.abs(x.y-_[0].y),Math.abs(k.y-_[0].y));M>=z?(I=(x.x+k.x)/2,A=_[0].y):(I=_[0].x,A=(x.y+k.y)/2)}return[[e,{x:l.x+T.x,y:l.y+T.y},..._,{x:f.x+C.x,y:f.y+C.y},n],I,A,o,c]}function jh(e,t,n,r){const s=Math.min(zo(e,t)/2,zo(t,n)/2,r),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){const f=e.x<n.x?-1:1,g=e.y<n.y?1:-1;return`L ${a+s*f},${i}Q ${a},${i} ${a},${i+s*g}`}const u=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${a},${i+s*l}Q ${a},${i} ${a+s*u},${i}`}function bs({sourceX:e,sourceY:t,sourcePosition:n=J.Bottom,targetX:r,targetY:s,targetPosition:a=J.Top,borderRadius:i=5,centerX:u,centerY:l,offset:f=20}){const[g,m,v,_,I]=Mh({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:a,center:{x:u,y:l},offset:f});return[g.reduce((T,C,D)=>{let $="";return D>0&&D<g.length-1?$=jh(g[D-1],C,g[D+1],i):$=`${D===0?"M":"L"}${C.x} ${C.y}`,T+=$,T},""),m,v,_,I]}const Sr=E.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:g,sourcePosition:m=J.Bottom,targetPosition:v=J.Top,markerEnd:_,markerStart:I,pathOptions:A,interactionWidth:T})=>{const[C,D,$]=bs({sourceX:e,sourceY:t,sourcePosition:m,targetX:n,targetY:r,targetPosition:v,borderRadius:A==null?void 0:A.borderRadius,offset:A==null?void 0:A.offset});return W.createElement($n,{path:C,labelX:D,labelY:$,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:g,markerEnd:_,markerStart:I,interactionWidth:T})});Sr.displayName="SmoothStepEdge";const Ks=E.memo(e=>{var t;return W.createElement(Sr,{...e,pathOptions:E.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Ks.displayName="StepEdge";function Ah({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,a,i,u]=xa({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,a,i,u]}const Xs=E.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:g,markerEnd:m,markerStart:v,interactionWidth:_})=>{const[I,A,T]=Ah({sourceX:e,sourceY:t,targetX:n,targetY:r});return W.createElement($n,{path:I,labelX:A,labelY:T,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:g,markerEnd:m,markerStart:v,interactionWidth:_})});Xs.displayName="StraightEdge";function qn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ho({pos:e,x1:t,y1:n,x2:r,y2:s,c:a}){switch(e){case J.Left:return[t-qn(t-r,a),n];case J.Right:return[t+qn(r-t,a),n];case J.Top:return[t,n-qn(n-s,a)];case J.Bottom:return[t,n+qn(s-n,a)]}}function Ca({sourceX:e,sourceY:t,sourcePosition:n=J.Bottom,targetX:r,targetY:s,targetPosition:a=J.Top,curvature:i=.25}){const[u,l]=Ho({pos:n,x1:e,y1:t,x2:r,y2:s,c:i}),[f,g]=Ho({pos:a,x1:r,y1:s,x2:e,y2:t,c:i}),[m,v,_,I]=ka({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:u,sourceControlY:l,targetControlX:f,targetControlY:g});return[`M${e},${t} C${u},${l} ${f},${g} ${r},${s}`,m,v,_,I]}const pr=E.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s=J.Bottom,targetPosition:a=J.Top,label:i,labelStyle:u,labelShowBg:l,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:m,style:v,markerEnd:_,markerStart:I,pathOptions:A,interactionWidth:T})=>{const[C,D,$]=Ca({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:a,curvature:A==null?void 0:A.curvature});return W.createElement($n,{path:C,labelX:D,labelY:$,label:i,labelStyle:u,labelShowBg:l,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:m,style:v,markerEnd:_,markerStart:I,interactionWidth:T})});pr.displayName="BezierEdge";const Ys=E.createContext(null),Th=Ys.Provider;Ys.Consumer;const Ih=()=>E.useContext(Ys),Nh=e=>"id"in e&&"source"in e&&"target"in e,Dh=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,ws=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,Lh=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),$h=(e,t)=>{if(!e.source||!e.target)return t;let n;return Nh(e)?n={...e}:n={...e,id:Dh(e)},Lh(n,t)?t:t.concat(n)},_s=({x:e,y:t},[n,r,s],a,[i,u])=>{const l={x:(e-n)/s,y:(t-r)/s};return a?{x:i*Math.round(l.x/i),y:u*Math.round(l.y/u)}:l},Ea=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r}),Zt=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],s={x:e.position.x-n,y:e.position.y-r};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:s}},Zs=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const{x:a,y:i}=Zt(s,t).positionAbsolute;return ba(r,Cn({x:a,y:i,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return wa(n)},Ma=(e,t,[n,r,s]=[0,0,1],a=!1,i=!1,u=[0,0])=>{const l={x:(t.x-n)/s,y:(t.y-r)/s,width:t.width/s,height:t.height/s},f=[];return e.forEach(g=>{const{width:m,height:v,selectable:_=!0,hidden:I=!1}=g;if(i&&!_||I)return!1;const{positionAbsolute:A}=Zt(g,u),T={x:A.x,y:A.y,width:m||0,height:v||0},C=ms(l,T),D=typeof m>"u"||typeof v>"u"||m===null||v===null,$=a&&C>0,o=(m||0)*(v||0);(D||$||C>=o||g.dragging)&&f.push(g)}),f},ja=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Aa=(e,t,n,r,s,a=.1)=>{const i=t/(e.width*(1+a)),u=n/(e.height*(1+a)),l=Math.min(i,u),f=rn(l,r,s),g=e.x+e.width/2,m=e.y+e.height/2,v=t/2-g*f,_=n/2-m*f;return{x:v,y:_,zoom:f}},Lt=(e,t=0)=>e.transition().duration(t);function Vo(e,t,n,r){return(t[n]||[]).reduce((s,a)=>{var i,u;return`${e.id}-${a.id}-${n}`!==r&&s.push({id:a.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+a.x+a.width/2,y:(((u=e.positionAbsolute)==null?void 0:u.y)??0)+a.y+a.height/2}),s},[])}function Rh(e,t,n,r,s,a){const{x:i,y:u}=Mt(e),f=t.elementsFromPoint(i,u).find(I=>I.classList.contains("react-flow__handle"));if(f){const I=f.getAttribute("data-nodeid");if(I){const A=Js(void 0,f),T=f.getAttribute("data-handleid"),C=a({nodeId:I,id:T,type:A});if(C){const D=s.find($=>$.nodeId===I&&$.type===A&&$.id===T);return{handle:{id:T,type:A,nodeId:I,x:(D==null?void 0:D.x)||n.x,y:(D==null?void 0:D.y)||n.y},validHandleResult:C}}}}let g=[],m=1/0;if(s.forEach(I=>{const A=Math.sqrt((I.x-n.x)**2+(I.y-n.y)**2);if(A<=r){const T=a(I);A<=m&&(A<m?g=[{handle:I,validHandleResult:T}]:A===m&&g.push({handle:I,validHandleResult:T}),m=A)}}),!g.length)return{handle:null,validHandleResult:Ta()};if(g.length===1)return g[0];const v=g.some(({validHandleResult:I})=>I.isValid),_=g.some(({handle:I})=>I.type==="target");return g.find(({handle:I,validHandleResult:A})=>_?I.type==="target":v?A.isValid:!0)||g[0]}const zh={source:null,target:null,sourceHandle:null,targetHandle:null},Ta=()=>({handleDomNode:null,isValid:!1,connection:zh,endHandle:null});function Ia(e,t,n,r,s,a,i){const u=s==="target",l=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),f={...Ta(),handleDomNode:l};if(l){const g=Js(void 0,l),m=l.getAttribute("data-nodeid"),v=l.getAttribute("data-handleid"),_=l.classList.contains("connectable"),I=l.classList.contains("connectableend"),A={source:u?m:n,sourceHandle:u?v:r,target:u?n:m,targetHandle:u?r:v};f.connection=A,_&&I&&(t===Pt.Strict?u&&g==="source"||!u&&g==="target":m!==n||v!==r)&&(f.endHandle={nodeId:m,handleId:v,type:g},f.isValid=a(A))}return f}function Hh({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((s,a)=>{if(a[me]){const{handleBounds:i}=a[me];let u=[],l=[];i&&(u=Vo(a,i,"source",`${t}-${n}-${r}`),l=Vo(a,i,"target",`${t}-${n}-${r}`)),s.push(...u,...l)}return s},[])}function Js(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Xr(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Vh(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Na({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:s,getState:a,setState:i,isValidConnection:u,edgeUpdaterType:l,onReconnectEnd:f}){const g=ya(e.target),{connectionMode:m,domNode:v,autoPanOnConnect:_,connectionRadius:I,onConnectStart:A,panBy:T,getNodes:C,cancelConnection:D}=a();let $=0,o;const{x:c,y:d}=Mt(e),y=g==null?void 0:g.elementFromPoint(c,d),w=Js(l,y),x=v==null?void 0:v.getBoundingClientRect();if(!x||!w)return;let k,M=Mt(e,x),z=!1,R=null,b=!1,S=null;const h=Hh({nodes:C(),nodeId:n,handleId:t,handleType:w}),j=()=>{if(!_)return;const[V,L]=ma(M,x);T({x:V,y:L}),$=requestAnimationFrame(j)};i({connectionPosition:M,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:w,connectionStartHandle:{nodeId:n,handleId:t,type:w},connectionEndHandle:null}),A==null||A(e,{nodeId:n,handleId:t,handleType:w});function H(V){const{transform:L}=a();M=Mt(V,x);const{handle:P,validHandleResult:O}=Rh(V,g,_s(M,L,!1,[1,1]),I,h,F=>Ia(F,m,n,t,s?"target":"source",u,g));if(o=P,z||(j(),z=!0),S=O.handleDomNode,R=O.connection,b=O.isValid,i({connectionPosition:o&&b?Ea({x:o.x,y:o.y},L):M,connectionStatus:Vh(!!o,b),connectionEndHandle:O.endHandle}),!o&&!b&&!S)return Xr(k);R.source!==R.target&&S&&(Xr(k),k=S,S.classList.add("connecting","react-flow__handle-connecting"),S.classList.toggle("valid",b),S.classList.toggle("react-flow__handle-valid",b))}function N(V){var L,P;(o||S)&&R&&b&&(r==null||r(R)),(P=(L=a()).onConnectEnd)==null||P.call(L,V),l&&(f==null||f(V)),Xr(k),D(),cancelAnimationFrame($),z=!1,b=!1,R=null,S=null,g.removeEventListener("mousemove",H),g.removeEventListener("mouseup",N),g.removeEventListener("touchmove",H),g.removeEventListener("touchend",N)}g.addEventListener("mousemove",H),g.addEventListener("mouseup",N),g.addEventListener("touchmove",H),g.addEventListener("touchend",N)}const Po=()=>!0,Ph=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Bh=(e,t,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:a,connectionClickStartHandle:i}=r;return{connecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n||(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},Da=E.forwardRef(({type:e="source",position:t=J.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:i,onConnect:u,children:l,className:f,onMouseDown:g,onTouchStart:m,...v},_)=>{var x,k;const I=i||null,A=e==="target",T=Ee(),C=Ih(),{connectOnClick:D,noPanClassName:$}=ye(Ph,Re),{connecting:o,clickConnecting:c}=ye(Bh(C,I,e),Re);C||(k=(x=T.getState()).onError)==null||k.call(x,"010",mt.error010());const d=M=>{const{defaultEdgeOptions:z,onConnect:R,hasDefaultEdges:b}=T.getState(),S={...z,...M};if(b){const{edges:h,setEdges:j}=T.getState();j($h(S,h))}R==null||R(S),u==null||u(S)},y=M=>{if(!C)return;const z=va(M);s&&(z&&M.button===0||!z)&&Na({event:M,handleId:I,nodeId:C,onConnect:d,isTarget:A,getState:T.getState,setState:T.setState,isValidConnection:n||T.getState().isValidConnection||Po}),z?g==null||g(M):m==null||m(M)},w=M=>{const{onClickConnectStart:z,onClickConnectEnd:R,connectionClickStartHandle:b,connectionMode:S,isValidConnection:h}=T.getState();if(!C||!b&&!s)return;if(!b){z==null||z(M,{nodeId:C,handleId:I,handleType:e}),T.setState({connectionClickStartHandle:{nodeId:C,type:e,handleId:I}});return}const j=ya(M.target),H=n||h||Po,{connection:N,isValid:V}=Ia({nodeId:C,id:I,type:e},S,b.nodeId,b.handleId||null,b.type,H,j);V&&d(N),R==null||R(M),T.setState({connectionClickStartHandle:null})};return W.createElement("div",{"data-handleid":I,"data-nodeid":C,"data-handlepos":t,"data-id":`${C}-${I}-${e}`,className:qe(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",$,f,{source:!A,target:A,connectable:r,connectablestart:s,connectableend:a,connecting:c,connectionindicator:r&&(s&&!o||a&&o)}]),onMouseDown:y,onTouchStart:y,onClick:D?w:void 0,ref:_,...v},l)});Da.displayName="Handle";var sn=E.memo(Da);const La=({data:e,isConnectable:t,targetPosition:n=J.Top,sourcePosition:r=J.Bottom})=>W.createElement(W.Fragment,null,W.createElement(sn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,W.createElement(sn,{type:"source",position:r,isConnectable:t}));La.displayName="DefaultNode";var vs=E.memo(La);const $a=({data:e,isConnectable:t,sourcePosition:n=J.Bottom})=>W.createElement(W.Fragment,null,e==null?void 0:e.label,W.createElement(sn,{type:"source",position:n,isConnectable:t}));$a.displayName="InputNode";var Ra=E.memo($a);const za=({data:e,isConnectable:t,targetPosition:n=J.Top})=>W.createElement(W.Fragment,null,W.createElement(sn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);za.displayName="OutputNode";var Ha=E.memo(za);const Qs=()=>null;Qs.displayName="GroupNode";const Oh=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Kn=e=>e.id;function Fh(e,t){return Re(e.selectedNodes.map(Kn),t.selectedNodes.map(Kn))&&Re(e.selectedEdges.map(Kn),t.selectedEdges.map(Kn))}const Va=E.memo(({onSelectionChange:e})=>{const t=Ee(),{selectedNodes:n,selectedEdges:r}=ye(Oh,Fh);return E.useEffect(()=>{const s={nodes:n,edges:r};e==null||e(s),t.getState().onSelectionChange.forEach(a=>a(s))},[n,r,e]),null});Va.displayName="SelectionListener";const Wh=e=>!!e.onSelectionChange;function Uh({onSelectionChange:e}){const t=ye(Wh);return e||t?W.createElement(Va,{onSelectionChange:e}):null}const Gh=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ot(e,t){E.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function se(e,t,n){E.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const qh=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:a,onConnectEnd:i,onClickConnectStart:u,onClickConnectEnd:l,nodesDraggable:f,nodesConnectable:g,nodesFocusable:m,edgesFocusable:v,edgesUpdatable:_,elevateNodesOnSelect:I,minZoom:A,maxZoom:T,nodeExtent:C,onNodesChange:D,onEdgesChange:$,elementsSelectable:o,connectionMode:c,snapGrid:d,snapToGrid:y,translateExtent:w,connectOnClick:x,defaultEdgeOptions:k,fitView:M,fitViewOptions:z,onNodesDelete:R,onEdgesDelete:b,onNodeDrag:S,onNodeDragStart:h,onNodeDragStop:j,onSelectionDrag:H,onSelectionDragStart:N,onSelectionDragStop:V,noPanClassName:L,nodeOrigin:P,rfId:O,autoPanOnConnect:F,autoPanOnNodeDrag:G,onError:ee,connectionRadius:K,isValidConnection:q,nodeDragThreshold:re})=>{const{setNodes:te,setEdges:fe,setDefaultNodesAndEdges:ke,setMinZoom:Me,setMaxZoom:Ne,setTranslateExtent:de,setNodeExtent:Ve,reset:ie}=ye(Gh,Re),Q=Ee();return E.useEffect(()=>{const je=r==null?void 0:r.map(ut=>({...ut,...k}));return ke(n,je),()=>{ie()}},[]),se("defaultEdgeOptions",k,Q.setState),se("connectionMode",c,Q.setState),se("onConnect",s,Q.setState),se("onConnectStart",a,Q.setState),se("onConnectEnd",i,Q.setState),se("onClickConnectStart",u,Q.setState),se("onClickConnectEnd",l,Q.setState),se("nodesDraggable",f,Q.setState),se("nodesConnectable",g,Q.setState),se("nodesFocusable",m,Q.setState),se("edgesFocusable",v,Q.setState),se("edgesUpdatable",_,Q.setState),se("elementsSelectable",o,Q.setState),se("elevateNodesOnSelect",I,Q.setState),se("snapToGrid",y,Q.setState),se("snapGrid",d,Q.setState),se("onNodesChange",D,Q.setState),se("onEdgesChange",$,Q.setState),se("connectOnClick",x,Q.setState),se("fitViewOnInit",M,Q.setState),se("fitViewOnInitOptions",z,Q.setState),se("onNodesDelete",R,Q.setState),se("onEdgesDelete",b,Q.setState),se("onNodeDrag",S,Q.setState),se("onNodeDragStart",h,Q.setState),se("onNodeDragStop",j,Q.setState),se("onSelectionDrag",H,Q.setState),se("onSelectionDragStart",N,Q.setState),se("onSelectionDragStop",V,Q.setState),se("noPanClassName",L,Q.setState),se("nodeOrigin",P,Q.setState),se("rfId",O,Q.setState),se("autoPanOnConnect",F,Q.setState),se("autoPanOnNodeDrag",G,Q.setState),se("onError",ee,Q.setState),se("connectionRadius",K,Q.setState),se("isValidConnection",q,Q.setState),se("nodeDragThreshold",re,Q.setState),Ot(e,te),Ot(t,fe),Ot(A,Me),Ot(T,Ne),Ot(w,de),Ot(C,Ve),null},Bo={display:"none"},Kh={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Pa="react-flow__node-desc",Ba="react-flow__edge-desc",Xh="react-flow__aria-live",Yh=e=>e.ariaLiveMessage;function Zh({rfId:e}){const t=ye(Yh);return W.createElement("div",{id:`${Xh}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Kh},t)}function Jh({rfId:e,disableKeyboardA11y:t}){return W.createElement(W.Fragment,null,W.createElement("div",{id:`${Pa}-${e}`,style:Bo},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),W.createElement("div",{id:`${Ba}-${e}`,style:Bo},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&W.createElement(Zh,{rfId:e}))}var Mn=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=E.useState(!1),s=E.useRef(!1),a=E.useRef(new Set([])),[i,u]=E.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(m=>typeof m=="string").map(m=>m.split("+")),g=f.reduce((m,v)=>m.concat(...v),[]);return[f,g]}return[[],[]]},[e]);return E.useEffect(()=>{const l=typeof document<"u"?document:null,f=(t==null?void 0:t.target)||l;if(e!==null){const g=_=>{if(s.current=_.ctrlKey||_.metaKey||_.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&ys(_))return!1;const A=Fo(_.code,u);a.current.add(_[A]),Oo(i,a.current,!1)&&(_.preventDefault(),r(!0))},m=_=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&ys(_))return!1;const A=Fo(_.code,u);Oo(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(_[A]),_.key==="Meta"&&a.current.clear(),s.current=!1},v=()=>{a.current.clear(),r(!1)};return f==null||f.addEventListener("keydown",g),f==null||f.addEventListener("keyup",m),window.addEventListener("blur",v),()=>{f==null||f.removeEventListener("keydown",g),f==null||f.removeEventListener("keyup",m),window.removeEventListener("blur",v)}}},[e,r]),n};function Oo(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function Fo(e,t){return t.includes(e)?"code":"key"}function Oa(e,t,n,r){var u,l;const s=e.parentNode||e.parentId;if(!s)return n;const a=t.get(s),i=Zt(a,r);return Oa(a,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((u=a[me])==null?void 0:u.z)??0)>(n.z??0)?((l=a[me])==null?void 0:l.z)??0:n.z??0},r)}function Fa(e,t,n){e.forEach(r=>{var a;const s=r.parentNode||r.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||n!=null&&n[r.id]){const{x:i,y:u,z:l}=Oa(r,e,{...r.position,z:((a=r[me])==null?void 0:a.z)??0},t);r.positionAbsolute={x:i,y:u},r[me].z=l,n!=null&&n[r.id]&&(r[me].isParent=!0)}})}function Yr(e,t,n,r){const s=new Map,a={},i=r?1e3:0;return e.forEach(u=>{var _;const l=(Ue(u.zIndex)?u.zIndex:0)+(u.selected?i:0),f=t.get(u.id),g={...u,positionAbsolute:{x:u.position.x,y:u.position.y}},m=u.parentNode||u.parentId;m&&(a[m]=!0);const v=(f==null?void 0:f.type)&&(f==null?void 0:f.type)!==u.type;Object.defineProperty(g,me,{enumerable:!1,value:{handleBounds:v||(_=f==null?void 0:f[me])==null?void 0:_.handleBounds,z:l}}),s.set(u.id,g)}),Fa(s,n,a),s}function Wa(e,t={}){const{getNodes:n,width:r,height:s,minZoom:a,maxZoom:i,d3Zoom:u,d3Selection:l,fitViewOnInitDone:f,fitViewOnInit:g,nodeOrigin:m}=e(),v=t.initial&&!f&&g;if(u&&l&&(v||!t.initial)){const I=n().filter(T=>{var D;const C=t.includeHiddenNodes?T.width&&T.height:!T.hidden;return(D=t.nodes)!=null&&D.length?C&&t.nodes.some($=>$.id===T.id):C}),A=I.every(T=>T.width&&T.height);if(I.length>0&&A){const T=Zs(I,m),{x:C,y:D,zoom:$}=Aa(T,r,s,t.minZoom??a,t.maxZoom??i,t.padding??.1),o=Et.translate(C,D).scale($);return typeof t.duration=="number"&&t.duration>0?u.transform(Lt(l,t.duration),o):u.transform(l,o),!0}}return!1}function Qh(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[me]:r[me],selected:n.selected})}),new Map(t)}function ep(e,t){return t.map(n=>{const r=e.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Xn({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:s,edges:a,onNodesChange:i,onEdgesChange:u,hasDefaultNodes:l,hasDefaultEdges:f}=n();e!=null&&e.length&&(l&&r({nodeInternals:Qh(e,s)}),i==null||i(e)),t!=null&&t.length&&(f&&r({edges:ep(t,a)}),u==null||u(t))}const Ft=()=>{},tp={zoomIn:Ft,zoomOut:Ft,zoomTo:Ft,getZoom:()=>1,setViewport:Ft,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ft,fitBounds:Ft,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},np=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),rp=()=>{const e=Ee(),{d3Zoom:t,d3Selection:n}=ye(np,Re);return E.useMemo(()=>n&&t?{zoomIn:s=>t.scaleBy(Lt(n,s==null?void 0:s.duration),1.2),zoomOut:s=>t.scaleBy(Lt(n,s==null?void 0:s.duration),1/1.2),zoomTo:(s,a)=>t.scaleTo(Lt(n,a==null?void 0:a.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,a)=>{const[i,u,l]=e.getState().transform,f=Et.translate(s.x??i,s.y??u).scale(s.zoom??l);t.transform(Lt(n,a==null?void 0:a.duration),f)},getViewport:()=>{const[s,a,i]=e.getState().transform;return{x:s,y:a,zoom:i}},fitView:s=>Wa(e.getState,s),setCenter:(s,a,i)=>{const{width:u,height:l,maxZoom:f}=e.getState(),g=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:f,m=u/2-s*g,v=l/2-a*g,_=Et.translate(m,v).scale(g);t.transform(Lt(n,i==null?void 0:i.duration),_)},fitBounds:(s,a)=>{const{width:i,height:u,minZoom:l,maxZoom:f}=e.getState(),{x:g,y:m,zoom:v}=Aa(s,i,u,l,f,(a==null?void 0:a.padding)??.1),_=Et.translate(g,m).scale(v);t.transform(Lt(n,a==null?void 0:a.duration),_)},project:s=>{const{transform:a,snapToGrid:i,snapGrid:u}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),_s(s,a,i,u)},screenToFlowPosition:s=>{const{transform:a,snapToGrid:i,snapGrid:u,domNode:l}=e.getState();if(!l)return s;const{x:f,y:g}=l.getBoundingClientRect(),m={x:s.x-f,y:s.y-g};return _s(m,a,i,u)},flowToScreenPosition:s=>{const{transform:a,domNode:i}=e.getState();if(!i)return s;const{x:u,y:l}=i.getBoundingClientRect(),f=Ea(s,a);return{x:f.x+u,y:f.y+l}},viewportInitialized:!0}:tp,[t,n])};function Ua(){const e=rp(),t=Ee(),n=E.useCallback(()=>t.getState().getNodes().map(A=>({...A})),[]),r=E.useCallback(A=>t.getState().nodeInternals.get(A),[]),s=E.useCallback(()=>{const{edges:A=[]}=t.getState();return A.map(T=>({...T}))},[]),a=E.useCallback(A=>{const{edges:T=[]}=t.getState();return T.find(C=>C.id===A)},[]),i=E.useCallback(A=>{const{getNodes:T,setNodes:C,hasDefaultNodes:D,onNodesChange:$}=t.getState(),o=T(),c=typeof A=="function"?A(o):A;if(D)C(c);else if($){const d=c.length===0?o.map(y=>({type:"remove",id:y.id})):c.map(y=>({item:y,type:"reset"}));$(d)}},[]),u=E.useCallback(A=>{const{edges:T=[],setEdges:C,hasDefaultEdges:D,onEdgesChange:$}=t.getState(),o=typeof A=="function"?A(T):A;if(D)C(o);else if($){const c=o.length===0?T.map(d=>({type:"remove",id:d.id})):o.map(d=>({item:d,type:"reset"}));$(c)}},[]),l=E.useCallback(A=>{const T=Array.isArray(A)?A:[A],{getNodes:C,setNodes:D,hasDefaultNodes:$,onNodesChange:o}=t.getState();if($){const d=[...C(),...T];D(d)}else if(o){const c=T.map(d=>({item:d,type:"add"}));o(c)}},[]),f=E.useCallback(A=>{const T=Array.isArray(A)?A:[A],{edges:C=[],setEdges:D,hasDefaultEdges:$,onEdgesChange:o}=t.getState();if($)D([...C,...T]);else if(o){const c=T.map(d=>({item:d,type:"add"}));o(c)}},[]),g=E.useCallback(()=>{const{getNodes:A,edges:T=[],transform:C}=t.getState(),[D,$,o]=C;return{nodes:A().map(c=>({...c})),edges:T.map(c=>({...c})),viewport:{x:D,y:$,zoom:o}}},[]),m=E.useCallback(({nodes:A,edges:T})=>{const{nodeInternals:C,getNodes:D,edges:$,hasDefaultNodes:o,hasDefaultEdges:c,onNodesDelete:d,onEdgesDelete:y,onNodesChange:w,onEdgesChange:x}=t.getState(),k=(A||[]).map(S=>S.id),M=(T||[]).map(S=>S.id),z=D().reduce((S,h)=>{const j=h.parentNode||h.parentId,H=!k.includes(h.id)&&j&&S.find(V=>V.id===j);return(typeof h.deletable=="boolean"?h.deletable:!0)&&(k.includes(h.id)||H)&&S.push(h),S},[]),R=$.filter(S=>typeof S.deletable=="boolean"?S.deletable:!0),b=R.filter(S=>M.includes(S.id));if(z||b){const S=ja(z,R),h=[...b,...S],j=h.reduce((H,N)=>(H.includes(N.id)||H.push(N.id),H),[]);if((c||o)&&(c&&t.setState({edges:$.filter(H=>!j.includes(H.id))}),o&&(z.forEach(H=>{C.delete(H.id)}),t.setState({nodeInternals:new Map(C)}))),j.length>0&&(y==null||y(h),x&&x(j.map(H=>({id:H,type:"remove"})))),z.length>0&&(d==null||d(z),w)){const H=z.map(N=>({id:N.id,type:"remove"}));w(H)}}},[]),v=E.useCallback(A=>{const T=kh(A),C=T?null:t.getState().nodeInternals.get(A.id);return!T&&!C?[null,null,T]:[T?A:Lo(C),C,T]},[]),_=E.useCallback((A,T=!0,C)=>{const[D,$,o]=v(A);return D?(C||t.getState().getNodes()).filter(c=>{if(!o&&(c.id===$.id||!c.positionAbsolute))return!1;const d=Lo(c),y=ms(d,D);return T&&y>0||y>=D.width*D.height}):[]},[]),I=E.useCallback((A,T,C=!0)=>{const[D]=v(A);if(!D)return!1;const $=ms(D,T);return C&&$>0||$>=D.width*D.height},[]);return E.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:s,getEdge:a,setNodes:i,setEdges:u,addNodes:l,addEdges:f,toObject:g,deleteElements:m,getIntersectingNodes:_,isNodeIntersecting:I}),[e,n,r,s,a,i,u,l,f,g,m,_,I])}const sp={actInsideInputWithModifier:!1};var op=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Ee(),{deleteElements:r}=Ua(),s=Mn(e,sp),a=Mn(t);E.useEffect(()=>{if(s){const{edges:i,getNodes:u}=n.getState(),l=u().filter(g=>g.selected),f=i.filter(g=>g.selected);r({nodes:l,edges:f}),n.setState({nodesSelectionActive:!1})}},[s]),E.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function ip(e){const t=Ee();E.useEffect(()=>{let n;const r=()=>{var a,i;if(!e.current)return;const s=Us(e.current);(s.height===0||s.width===0)&&((i=(a=t.getState()).onError)==null||i.call(a,"004",mt.error004())),t.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const eo={position:"absolute",width:"100%",height:"100%",top:0,left:0},ap=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Yn=e=>({x:e.x,y:e.y,zoom:e.k}),Wt=(e,t)=>e.target.closest(`.${t}`),Wo=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Uo=e=>{const t=e.ctrlKey&&fr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},up=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),dp=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:u=.5,panOnScrollMode:l=Rt.Free,zoomOnDoubleClick:f=!0,elementsSelectable:g,panOnDrag:m=!0,defaultViewport:v,translateExtent:_,minZoom:I,maxZoom:A,zoomActivationKeyCode:T,preventScrolling:C=!0,children:D,noWheelClassName:$,noPanClassName:o})=>{const c=E.useRef(),d=Ee(),y=E.useRef(!1),w=E.useRef(!1),x=E.useRef(null),k=E.useRef({x:0,y:0,zoom:0}),{d3Zoom:M,d3Selection:z,d3ZoomHandler:R,userSelectionActive:b}=ye(up,Re),S=Mn(T),h=E.useRef(0),j=E.useRef(!1),H=E.useRef();return ip(x),E.useEffect(()=>{if(x.current){const N=x.current.getBoundingClientRect(),V=mh().scaleExtent([I,A]).translateExtent(_),L=Ze(x.current).call(V),P=Et.translate(v.x,v.y).scale(rn(v.zoom,I,A)),O=[[0,0],[N.width,N.height]],F=V.constrain()(P,O,_);V.transform(L,F),V.wheelDelta(Uo),d.setState({d3Zoom:V,d3Selection:L,d3ZoomHandler:L.on("wheel.zoom"),transform:[F.x,F.y,F.k],domNode:x.current.closest(".react-flow")})}},[]),E.useEffect(()=>{z&&M&&(i&&!S&&!b?z.on("wheel.zoom",N=>{if(Wt(N,$))return!1;N.preventDefault(),N.stopImmediatePropagation();const V=z.property("__zoom").k||1;if(N.ctrlKey&&a){const q=rt(N),re=Uo(N),te=V*Math.pow(2,re);M.scaleTo(z,te,q,N);return}const L=N.deltaMode===1?20:1;let P=l===Rt.Vertical?0:N.deltaX*L,O=l===Rt.Horizontal?0:N.deltaY*L;!fr()&&N.shiftKey&&l!==Rt.Vertical&&(P=N.deltaY*L,O=0),M.translateBy(z,-(P/V)*u,-(O/V)*u,{internal:!0});const F=Yn(z.property("__zoom")),{onViewportChangeStart:G,onViewportChange:ee,onViewportChangeEnd:K}=d.getState();clearTimeout(H.current),j.current||(j.current=!0,t==null||t(N,F),G==null||G(F)),j.current&&(e==null||e(N,F),ee==null||ee(F),H.current=setTimeout(()=>{n==null||n(N,F),K==null||K(F),j.current=!1},150))},{passive:!1}):typeof R<"u"&&z.on("wheel.zoom",function(N,V){if(!C&&N.type==="wheel"&&!N.ctrlKey||Wt(N,$))return null;N.preventDefault(),R.call(this,N,V)},{passive:!1}))},[b,i,l,z,M,R,S,a,C,$,t,e,n]),E.useEffect(()=>{M&&M.on("start",N=>{var P,O;if(!N.sourceEvent||N.sourceEvent.internal)return null;h.current=(P=N.sourceEvent)==null?void 0:P.button;const{onViewportChangeStart:V}=d.getState(),L=Yn(N.transform);y.current=!0,k.current=L,((O=N.sourceEvent)==null?void 0:O.type)==="mousedown"&&d.setState({paneDragging:!0}),V==null||V(L),t==null||t(N.sourceEvent,L)})},[M,t]),E.useEffect(()=>{M&&(b&&!y.current?M.on("zoom",null):b||M.on("zoom",N=>{var L;const{onViewportChange:V}=d.getState();if(d.setState({transform:[N.transform.x,N.transform.y,N.transform.k]}),w.current=!!(r&&Wo(m,h.current??0)),(e||V)&&!((L=N.sourceEvent)!=null&&L.internal)){const P=Yn(N.transform);V==null||V(P),e==null||e(N.sourceEvent,P)}}))},[b,M,e,m,r]),E.useEffect(()=>{M&&M.on("end",N=>{if(!N.sourceEvent||N.sourceEvent.internal)return null;const{onViewportChangeEnd:V}=d.getState();if(y.current=!1,d.setState({paneDragging:!1}),r&&Wo(m,h.current??0)&&!w.current&&r(N.sourceEvent),w.current=!1,(n||V)&&ap(k.current,N.transform)){const L=Yn(N.transform);k.current=L,clearTimeout(c.current),c.current=setTimeout(()=>{V==null||V(L),n==null||n(N.sourceEvent,L)},i?150:0)}})},[M,i,m,n,r]),E.useEffect(()=>{M&&M.filter(N=>{const V=S||s,L=a&&N.ctrlKey;if((m===!0||Array.isArray(m)&&m.includes(1))&&N.button===1&&N.type==="mousedown"&&(Wt(N,"react-flow__node")||Wt(N,"react-flow__edge")))return!0;if(!m&&!V&&!i&&!f&&!a||b||!f&&N.type==="dblclick"||Wt(N,$)&&N.type==="wheel"||Wt(N,o)&&(N.type!=="wheel"||i&&N.type==="wheel"&&!S)||!a&&N.ctrlKey&&N.type==="wheel"||!V&&!i&&!L&&N.type==="wheel"||!m&&(N.type==="mousedown"||N.type==="touchstart")||Array.isArray(m)&&!m.includes(N.button)&&N.type==="mousedown")return!1;const P=Array.isArray(m)&&m.includes(N.button)||!N.button||N.button<=1;return(!N.ctrlKey||N.type==="wheel")&&P})},[b,M,s,a,i,f,m,g,S]),W.createElement("div",{className:"react-flow__renderer",ref:x,style:eo},D)},cp=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function lp(){const{userSelectionActive:e,userSelectionRect:t}=ye(cp,Re);return e&&t?W.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Go(e,t){const n=t.parentNode||t.parentId,r=e.find(s=>s.id===n);if(r){const s=t.position.x+t.width-r.width,a=t.position.y+t.height-r.height;if(s>0||a>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),a>0&&(r.style.height+=a),t.position.x<0){const i=Math.abs(t.position.x);r.position.x=r.position.x-i,r.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);r.position.y=r.position.y-i,r.style.height+=i,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Ga(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,s)=>{const a=e.filter(u=>u.id===s.id);if(a.length===0)return r.push(s),r;const i={...s};for(const u of a)if(u)switch(u.type){case"select":{i.selected=u.selected;break}case"position":{typeof u.position<"u"&&(i.position=u.position),typeof u.positionAbsolute<"u"&&(i.positionAbsolute=u.positionAbsolute),typeof u.dragging<"u"&&(i.dragging=u.dragging),i.expandParent&&Go(r,i);break}case"dimensions":{typeof u.dimensions<"u"&&(i.width=u.dimensions.width,i.height=u.dimensions.height),typeof u.updateStyle<"u"&&(i.style={...i.style||{},...u.dimensions}),typeof u.resizing=="boolean"&&(i.resizing=u.resizing),i.expandParent&&Go(r,i);break}case"remove":return r}return r.push(i),r},n)}function qa(e,t){return Ga(e,t)}function fp(e,t){return Ga(e,t)}const kt=(e,t)=>({id:e,type:"select",selected:t});function Gt(e,t){return e.reduce((n,r)=>{const s=t.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(kt(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(kt(r.id,!1))),n},[])}const Zr=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},hp=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Ka=E.memo(({isSelecting:e,selectionMode:t=En.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:i,onPaneScroll:u,onPaneMouseEnter:l,onPaneMouseMove:f,onPaneMouseLeave:g,children:m})=>{const v=E.useRef(null),_=Ee(),I=E.useRef(0),A=E.useRef(0),T=E.useRef(),{userSelectionActive:C,elementsSelectable:D,dragging:$}=ye(hp,Re),o=()=>{_.setState({userSelectionActive:!1,userSelectionRect:null}),I.current=0,A.current=0},c=R=>{a==null||a(R),_.getState().resetSelectedElements(),_.setState({nodesSelectionActive:!1})},d=R=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){R.preventDefault();return}i==null||i(R)},y=u?R=>u(R):void 0,w=R=>{const{resetSelectedElements:b,domNode:S}=_.getState();if(T.current=S==null?void 0:S.getBoundingClientRect(),!D||!e||R.button!==0||R.target!==v.current||!T.current)return;const{x:h,y:j}=Mt(R,T.current);b(),_.setState({userSelectionRect:{width:0,height:0,startX:h,startY:j,x:h,y:j}}),r==null||r(R)},x=R=>{const{userSelectionRect:b,nodeInternals:S,edges:h,transform:j,onNodesChange:H,onEdgesChange:N,nodeOrigin:V,getNodes:L}=_.getState();if(!e||!T.current||!b)return;_.setState({userSelectionActive:!0,nodesSelectionActive:!1});const P=Mt(R,T.current),O=b.startX??0,F=b.startY??0,G={...b,x:P.x<O?P.x:O,y:P.y<F?P.y:F,width:Math.abs(P.x-O),height:Math.abs(P.y-F)},ee=L(),K=Ma(S,G,j,t===En.Partial,!0,V),q=ja(K,h).map(te=>te.id),re=K.map(te=>te.id);if(I.current!==re.length){I.current=re.length;const te=Gt(ee,re);te.length&&(H==null||H(te))}if(A.current!==q.length){A.current=q.length;const te=Gt(h,q);te.length&&(N==null||N(te))}_.setState({userSelectionRect:G})},k=R=>{if(R.button!==0)return;const{userSelectionRect:b}=_.getState();!C&&b&&R.target===v.current&&(c==null||c(R)),_.setState({nodesSelectionActive:I.current>0}),o(),s==null||s(R)},M=R=>{C&&(_.setState({nodesSelectionActive:I.current>0}),s==null||s(R)),o()},z=D&&(e||C);return W.createElement("div",{className:qe(["react-flow__pane",{dragging:$,selection:e}]),onClick:z?void 0:Zr(c,v),onContextMenu:Zr(d,v),onWheel:Zr(y,v),onMouseEnter:z?void 0:l,onMouseDown:z?w:void 0,onMouseMove:z?x:f,onMouseUp:z?k:void 0,onMouseLeave:z?M:g,ref:v,style:eo},m,W.createElement(lp,null))});Ka.displayName="Pane";function Xa(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:Xa(r,t):!1}function qo(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function pp(e,t,n,r){return Array.from(e.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!Xa(s,e))&&(s.draggable||t&&typeof s.draggable>"u")).map(s=>{var a,i;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((a=s.positionAbsolute)==null?void 0:a.x)??0),y:n.y-(((i=s.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function gp(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Ya(e,t,n,r,s=[0,0],a){const i=gp(e,e.extent||r);let u=i;const l=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(l&&e.width&&e.height){const m=n.get(l),{x:v,y:_}=Zt(m,s).positionAbsolute;u=m&&Ue(v)&&Ue(_)&&Ue(m.width)&&Ue(m.height)?[[v+e.width*s[0],_+e.height*s[1]],[v+m.width-e.width+e.width*s[0],_+m.height-e.height+e.height*s[1]]]:u}else a==null||a("005",mt.error005()),u=i;else if(e.extent&&l&&e.extent!=="parent"){const m=n.get(l),{x:v,y:_}=Zt(m,s).positionAbsolute;u=[[e.extent[0][0]+v,e.extent[0][1]+_],[e.extent[1][0]+v,e.extent[1][1]+_]]}let f={x:0,y:0};if(l){const m=n.get(l);f=Zt(m,s).positionAbsolute}const g=u&&u!=="parent"?Gs(t,u):t;return{position:{x:g.x-f.x,y:g.y-f.y},positionAbsolute:g}}function Jr({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?r.find(s=>s.id===e):r[0],r]}const Ko=(e,t,n,r)=>{const s=t.querySelectorAll(e);if(!s||!s.length)return null;const a=Array.from(s),i=t.getBoundingClientRect(),u={x:i.width*r[0],y:i.height*r[1]};return a.map(l=>{const f=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(f.left-i.left-u.x)/n,y:(f.top-i.top-u.y)/n,...Us(l)}})};function gn(e,t,n){return n===void 0?n:r=>{const s=t().nodeInternals.get(e);s&&n(r,{...s})}}function xs({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:i,nodeInternals:u,onError:l}=t.getState(),f=u.get(e);if(!f){l==null||l("012",mt.error012(e));return}t.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&i)&&(a({nodes:[f],edges:[]}),requestAnimationFrame(()=>{var g;return(g=r==null?void 0:r.current)==null?void 0:g.blur()})):s([e])}function mp(){const e=Ee();return E.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:a}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,u=n.touches?n.touches[0].clientY:n.clientY,l={x:(i-r[0])/r[2],y:(u-r[1])/r[2]};return{xSnapped:a?s[0]*Math.round(l.x/s[0]):l.x,ySnapped:a?s[1]*Math.round(l.y/s[1]):l.y,...l}},[])}function Qr(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Za({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:a,selectNodesOnDrag:i}){const u=Ee(),[l,f]=E.useState(!1),g=E.useRef([]),m=E.useRef({x:null,y:null}),v=E.useRef(0),_=E.useRef(null),I=E.useRef({x:0,y:0}),A=E.useRef(null),T=E.useRef(!1),C=E.useRef(!1),D=E.useRef(!1),$=mp();return E.useEffect(()=>{if(e!=null&&e.current){const o=Ze(e.current),c=({x:w,y:x})=>{const{nodeInternals:k,onNodeDrag:M,onSelectionDrag:z,updateNodePositions:R,nodeExtent:b,snapGrid:S,snapToGrid:h,nodeOrigin:j,onError:H}=u.getState();m.current={x:w,y:x};let N=!1,V={x:0,y:0,x2:0,y2:0};if(g.current.length>1&&b){const P=Zs(g.current,j);V=Cn(P)}if(g.current=g.current.map(P=>{const O={x:w-P.distance.x,y:x-P.distance.y};h&&(O.x=S[0]*Math.round(O.x/S[0]),O.y=S[1]*Math.round(O.y/S[1]));const F=[[b[0][0],b[0][1]],[b[1][0],b[1][1]]];g.current.length>1&&b&&!P.extent&&(F[0][0]=P.positionAbsolute.x-V.x+b[0][0],F[1][0]=P.positionAbsolute.x+(P.width??0)-V.x2+b[1][0],F[0][1]=P.positionAbsolute.y-V.y+b[0][1],F[1][1]=P.positionAbsolute.y+(P.height??0)-V.y2+b[1][1]);const G=Ya(P,O,k,F,j,H);return N=N||P.position.x!==G.position.x||P.position.y!==G.position.y,P.position=G.position,P.positionAbsolute=G.positionAbsolute,P}),!N)return;R(g.current,!0,!0),f(!0);const L=s?M:Qr(z);if(L&&A.current){const[P,O]=Jr({nodeId:s,dragItems:g.current,nodeInternals:k});L(A.current,P,O)}},d=()=>{if(!_.current)return;const[w,x]=ma(I.current,_.current);if(w!==0||x!==0){const{transform:k,panBy:M}=u.getState();m.current.x=(m.current.x??0)-w/k[2],m.current.y=(m.current.y??0)-x/k[2],M({x:w,y:x})&&c(m.current)}v.current=requestAnimationFrame(d)},y=w=>{var j;const{nodeInternals:x,multiSelectionActive:k,nodesDraggable:M,unselectNodesAndEdges:z,onNodeDragStart:R,onSelectionDragStart:b}=u.getState();C.current=!0;const S=s?R:Qr(b);(!i||!a)&&!k&&s&&((j=x.get(s))!=null&&j.selected||z()),s&&a&&i&&xs({id:s,store:u,nodeRef:e});const h=$(w);if(m.current=h,g.current=pp(x,M,h,s),S&&g.current){const[H,N]=Jr({nodeId:s,dragItems:g.current,nodeInternals:x});S(w.sourceEvent,H,N)}};if(t)o.on(".drag",null);else{const w=Fl().on("start",x=>{const{domNode:k,nodeDragThreshold:M}=u.getState();M===0&&y(x),D.current=!1;const z=$(x);m.current=z,_.current=(k==null?void 0:k.getBoundingClientRect())||null,I.current=Mt(x.sourceEvent,_.current)}).on("drag",x=>{var R,b;const k=$(x),{autoPanOnNodeDrag:M,nodeDragThreshold:z}=u.getState();if(x.sourceEvent.type==="touchmove"&&x.sourceEvent.touches.length>1&&(D.current=!0),!D.current){if(!T.current&&C.current&&M&&(T.current=!0,d()),!C.current){const S=k.xSnapped-(((R=m==null?void 0:m.current)==null?void 0:R.x)??0),h=k.ySnapped-(((b=m==null?void 0:m.current)==null?void 0:b.y)??0);Math.sqrt(S*S+h*h)>z&&y(x)}(m.current.x!==k.xSnapped||m.current.y!==k.ySnapped)&&g.current&&C.current&&(A.current=x.sourceEvent,I.current=Mt(x.sourceEvent,_.current),c(k))}}).on("end",x=>{if(!(!C.current||D.current)&&(f(!1),T.current=!1,C.current=!1,cancelAnimationFrame(v.current),g.current)){const{updateNodePositions:k,nodeInternals:M,onNodeDragStop:z,onSelectionDragStop:R}=u.getState(),b=s?z:Qr(R);if(k(g.current,!1,!1),b){const[S,h]=Jr({nodeId:s,dragItems:g.current,nodeInternals:M});b(x.sourceEvent,S,h)}}}).filter(x=>{const k=x.target;return!x.button&&(!n||!qo(k,`.${n}`,e))&&(!r||qo(k,r,e))});return o.call(w),()=>{o.on(".drag",null)}}}},[e,t,n,r,a,u,s,i,$]),l}function Ja(){const e=Ee();return E.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:a,getNodes:i,snapToGrid:u,snapGrid:l,onError:f,nodesDraggable:g}=e.getState(),m=i().filter(D=>D.selected&&(D.draggable||g&&typeof D.draggable>"u")),v=u?l[0]:5,_=u?l[1]:5,I=n.isShiftPressed?4:1,A=n.x*v*I,T=n.y*_*I,C=m.map(D=>{if(D.positionAbsolute){const $={x:D.positionAbsolute.x+A,y:D.positionAbsolute.y+T};u&&($.x=l[0]*Math.round($.x/l[0]),$.y=l[1]*Math.round($.y/l[1]));const{positionAbsolute:o,position:c}=Ya(D,$,r,s,void 0,f);D.position=c,D.positionAbsolute=o}return D});a(C,!0,!1)},[])}const Jt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var mn=e=>{const t=({id:n,type:r,data:s,xPos:a,yPos:i,xPosOrigin:u,yPosOrigin:l,selected:f,onClick:g,onMouseEnter:m,onMouseMove:v,onMouseLeave:_,onContextMenu:I,onDoubleClick:A,style:T,className:C,isDraggable:D,isSelectable:$,isConnectable:o,isFocusable:c,selectNodesOnDrag:d,sourcePosition:y,targetPosition:w,hidden:x,resizeObserver:k,dragHandle:M,zIndex:z,isParent:R,noDragClassName:b,noPanClassName:S,initialized:h,disableKeyboardA11y:j,ariaLabel:H,rfId:N,hasHandleBounds:V})=>{const L=Ee(),P=E.useRef(null),O=E.useRef(null),F=E.useRef(y),G=E.useRef(w),ee=E.useRef(r),K=$||D||g||m||v||_,q=Ja(),re=gn(n,L.getState,m),te=gn(n,L.getState,v),fe=gn(n,L.getState,_),ke=gn(n,L.getState,I),Me=gn(n,L.getState,A),Ne=ie=>{const{nodeDragThreshold:Q}=L.getState();if($&&(!d||!D||Q>0)&&xs({id:n,store:L,nodeRef:P}),g){const je=L.getState().nodeInternals.get(n);je&&g(ie,{...je})}},de=ie=>{if(!ys(ie)&&!j)if(_a.includes(ie.key)&&$){const Q=ie.key==="Escape";xs({id:n,store:L,unselect:Q,nodeRef:P})}else D&&f&&Object.prototype.hasOwnProperty.call(Jt,ie.key)&&(L.setState({ariaLiveMessage:`Moved selected node ${ie.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~i}`}),q({x:Jt[ie.key].x,y:Jt[ie.key].y,isShiftPressed:ie.shiftKey}))};E.useEffect(()=>()=>{O.current&&(k==null||k.unobserve(O.current),O.current=null)},[]),E.useEffect(()=>{if(P.current&&!x){const ie=P.current;(!h||!V||O.current!==ie)&&(O.current&&(k==null||k.unobserve(O.current)),k==null||k.observe(ie),O.current=ie)}},[x,h,V]),E.useEffect(()=>{const ie=ee.current!==r,Q=F.current!==y,je=G.current!==w;P.current&&(ie||Q||je)&&(ie&&(ee.current=r),Q&&(F.current=y),je&&(G.current=w),L.getState().updateNodeDimensions([{id:n,nodeElement:P.current,forceUpdate:!0}]))},[n,r,y,w]);const Ve=Za({nodeRef:P,disabled:x||!D,noDragClassName:b,handleSelector:M,nodeId:n,isSelectable:$,selectNodesOnDrag:d});return x?null:W.createElement("div",{className:qe(["react-flow__node",`react-flow__node-${r}`,{[S]:D},C,{selected:f,selectable:$,parent:R,dragging:Ve}]),ref:P,style:{zIndex:z,transform:`translate(${u}px,${l}px)`,pointerEvents:K?"all":"none",visibility:h?"visible":"hidden",...T},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:re,onMouseMove:te,onMouseLeave:fe,onContextMenu:ke,onClick:Ne,onDoubleClick:Me,onKeyDown:c?de:void 0,tabIndex:c?0:void 0,role:c?"button":void 0,"aria-describedby":j?void 0:`${Pa}-${N}`,"aria-label":H},W.createElement(Th,{value:n},W.createElement(e,{id:n,data:s,type:r,xPos:a,yPos:i,selected:f,isConnectable:o,sourcePosition:y,targetPosition:w,dragging:Ve,dragHandle:M,zIndex:z})))};return t.displayName="NodeWrapper",E.memo(t)};const yp=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Zs(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function bp({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ee(),{width:s,height:a,x:i,y:u,transformString:l,userSelectionActive:f}=ye(yp,Re),g=Ja(),m=E.useRef(null);if(E.useEffect(()=>{var I;n||(I=m.current)==null||I.focus({preventScroll:!0})},[n]),Za({nodeRef:m}),f||!s||!a)return null;const v=e?I=>{const A=r.getState().getNodes().filter(T=>T.selected);e(I,A)}:void 0,_=I=>{Object.prototype.hasOwnProperty.call(Jt,I.key)&&g({x:Jt[I.key].x,y:Jt[I.key].y,isShiftPressed:I.shiftKey})};return W.createElement("div",{className:qe(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},W.createElement("div",{ref:m,className:"react-flow__nodesselection-rect",onContextMenu:v,tabIndex:n?void 0:-1,onKeyDown:n?void 0:_,style:{width:s,height:a,top:u,left:i}}))}var wp=E.memo(bp);const _p=e=>e.nodesSelectionActive,Qa=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,deleteKeyCode:u,onMove:l,onMoveStart:f,onMoveEnd:g,selectionKeyCode:m,selectionOnDrag:v,selectionMode:_,onSelectionStart:I,onSelectionEnd:A,multiSelectionKeyCode:T,panActivationKeyCode:C,zoomActivationKeyCode:D,elementsSelectable:$,zoomOnScroll:o,zoomOnPinch:c,panOnScroll:d,panOnScrollSpeed:y,panOnScrollMode:w,zoomOnDoubleClick:x,panOnDrag:k,defaultViewport:M,translateExtent:z,minZoom:R,maxZoom:b,preventScrolling:S,onSelectionContextMenu:h,noWheelClassName:j,noPanClassName:H,disableKeyboardA11y:N})=>{const V=ye(_p),L=Mn(m),P=Mn(C),O=P||k,F=P||d,G=L||v&&O!==!0;return op({deleteKeyCode:u,multiSelectionKeyCode:T}),W.createElement(dp,{onMove:l,onMoveStart:f,onMoveEnd:g,onPaneContextMenu:a,elementsSelectable:$,zoomOnScroll:o,zoomOnPinch:c,panOnScroll:F,panOnScrollSpeed:y,panOnScrollMode:w,zoomOnDoubleClick:x,panOnDrag:!L&&O,defaultViewport:M,translateExtent:z,minZoom:R,maxZoom:b,zoomActivationKeyCode:D,preventScrolling:S,noWheelClassName:j,noPanClassName:H},W.createElement(Ka,{onSelectionStart:I,onSelectionEnd:A,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:O,isSelecting:!!G,selectionMode:_},e,V&&W.createElement(wp,{onSelectionContextMenu:h,noPanClassName:H,disableKeyboardA11y:N})))};Qa.displayName="FlowRenderer";var vp=E.memo(Qa);function xp(e){return ye(E.useCallback(n=>e?Ma(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function kp(e){const t={input:mn(e.input||Ra),default:mn(e.default||vs),output:mn(e.output||Ha),group:mn(e.group||Qs)},n={},r=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,a)=>(s[a]=mn(e[a]||vs),s),n);return{...t,...r}}const Sp=({x:e,y:t,width:n,height:r,origin:s})=>!n||!r?{x:e,y:t}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:t}:{x:e-n*s[0],y:t-r*s[1]},Cp=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),eu=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:a,onError:i}=ye(Cp,Re),u=xp(e.onlyRenderVisibleElements),l=E.useRef(),f=E.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const g=new ResizeObserver(m=>{const v=m.map(_=>({id:_.target.getAttribute("data-id"),nodeElement:_.target,forceUpdate:!0}));a(v)});return l.current=g,g},[]);return E.useEffect(()=>()=>{var g;(g=l==null?void 0:l.current)==null||g.disconnect()},[]),W.createElement("div",{className:"react-flow__nodes",style:eo},u.map(g=>{var c,d,y;let m=g.type||"default";e.nodeTypes[m]||(i==null||i("003",mt.error003(m)),m="default");const v=e.nodeTypes[m]||e.nodeTypes.default,_=!!(g.draggable||t&&typeof g.draggable>"u"),I=!!(g.selectable||s&&typeof g.selectable>"u"),A=!!(g.connectable||n&&typeof g.connectable>"u"),T=!!(g.focusable||r&&typeof g.focusable>"u"),C=e.nodeExtent?Gs(g.positionAbsolute,e.nodeExtent):g.positionAbsolute,D=(C==null?void 0:C.x)??0,$=(C==null?void 0:C.y)??0,o=Sp({x:D,y:$,width:g.width??0,height:g.height??0,origin:e.nodeOrigin});return W.createElement(v,{key:g.id,id:g.id,className:g.className,style:g.style,type:m,data:g.data,sourcePosition:g.sourcePosition||J.Bottom,targetPosition:g.targetPosition||J.Top,hidden:g.hidden,xPos:D,yPos:$,xPosOrigin:o.x,yPosOrigin:o.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!g.selected,isDraggable:_,isSelectable:I,isConnectable:A,isFocusable:T,resizeObserver:f,dragHandle:g.dragHandle,zIndex:((c=g[me])==null?void 0:c.z)??0,isParent:!!((d=g[me])!=null&&d.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!g.width&&!!g.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:g.ariaLabel,hasHandleBounds:!!((y=g[me])!=null&&y.handleBounds)})}))};eu.displayName="NodeRenderer";var Ep=E.memo(eu);const Mp=(e,t,n)=>n===J.Left?e-t:n===J.Right?e+t:e,jp=(e,t,n)=>n===J.Top?e-t:n===J.Bottom?e+t:e,Xo="react-flow__edgeupdater",Yo=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:a,onMouseOut:i,type:u})=>W.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:i,className:qe([Xo,`${Xo}-${u}`]),cx:Mp(t,r,e),cy:jp(n,r,e),r,stroke:"transparent",fill:"transparent"}),Ap=()=>!0;var Ut=e=>{const t=({id:n,className:r,type:s,data:a,onClick:i,onEdgeDoubleClick:u,selected:l,animated:f,label:g,labelStyle:m,labelShowBg:v,labelBgStyle:_,labelBgPadding:I,labelBgBorderRadius:A,style:T,source:C,target:D,sourceX:$,sourceY:o,targetX:c,targetY:d,sourcePosition:y,targetPosition:w,elementsSelectable:x,hidden:k,sourceHandleId:M,targetHandleId:z,onContextMenu:R,onMouseEnter:b,onMouseMove:S,onMouseLeave:h,reconnectRadius:j,onReconnect:H,onReconnectStart:N,onReconnectEnd:V,markerEnd:L,markerStart:P,rfId:O,ariaLabel:F,isFocusable:G,isReconnectable:ee,pathOptions:K,interactionWidth:q,disableKeyboardA11y:re})=>{const te=E.useRef(null),[fe,ke]=E.useState(!1),[Me,Ne]=E.useState(!1),de=Ee(),Ve=E.useMemo(()=>`url('#${ws(P,O)}')`,[P,O]),ie=E.useMemo(()=>`url('#${ws(L,O)}')`,[L,O]);if(k)return null;const Q=ve=>{var ze;const{edges:De,addSelectedEdges:Le,unselectNodesAndEdges:lt,multiSelectionActive:Oe}=de.getState(),Xe=De.find(Fe=>Fe.id===n);Xe&&(x&&(de.setState({nodesSelectionActive:!1}),Xe.selected&&Oe?(lt({nodes:[],edges:[Xe]}),(ze=te.current)==null||ze.blur()):Le([n])),i&&i(ve,Xe))},je=pn(n,de.getState,u),ut=pn(n,de.getState,R),It=pn(n,de.getState,b),bt=pn(n,de.getState,S),Pe=pn(n,de.getState,h),Ke=(ve,De)=>{if(ve.button!==0)return;const{edges:Le,isValidConnection:lt}=de.getState(),Oe=De?D:C,Xe=(De?z:M)||null,ze=De?"target":"source",Fe=lt||Ap,vt=De,Nt=Le.find(ft=>ft.id===n);Ne(!0),N==null||N(ve,Nt,ze);const dn=ft=>{Ne(!1),V==null||V(ft,Nt,ze)};Na({event:ve,handleId:Xe,nodeId:Oe,onConnect:ft=>H==null?void 0:H(Nt,ft),isTarget:vt,getState:de.getState,setState:de.setState,isValidConnection:Fe,edgeUpdaterType:ze,onReconnectEnd:dn})},wt=ve=>Ke(ve,!0),dt=ve=>Ke(ve,!1),ct=()=>ke(!0),ue=()=>ke(!1),Be=!x&&!i,_t=ve=>{var De;if(!re&&_a.includes(ve.key)&&x){const{unselectNodesAndEdges:Le,addSelectedEdges:lt,edges:Oe}=de.getState();ve.key==="Escape"?((De=te.current)==null||De.blur(),Le({edges:[Oe.find(ze=>ze.id===n)]})):lt([n])}};return W.createElement("g",{className:qe(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:l,animated:f,inactive:Be,updating:fe}]),onClick:Q,onDoubleClick:je,onContextMenu:ut,onMouseEnter:It,onMouseMove:bt,onMouseLeave:Pe,onKeyDown:G?_t:void 0,tabIndex:G?0:void 0,role:G?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":F===null?void 0:F||`Edge from ${C} to ${D}`,"aria-describedby":G?`${Ba}-${O}`:void 0,ref:te},!Me&&W.createElement(e,{id:n,source:C,target:D,selected:l,animated:f,label:g,labelStyle:m,labelShowBg:v,labelBgStyle:_,labelBgPadding:I,labelBgBorderRadius:A,data:a,style:T,sourceX:$,sourceY:o,targetX:c,targetY:d,sourcePosition:y,targetPosition:w,sourceHandleId:M,targetHandleId:z,markerStart:Ve,markerEnd:ie,pathOptions:K,interactionWidth:q}),ee&&W.createElement(W.Fragment,null,(ee==="source"||ee===!0)&&W.createElement(Yo,{position:y,centerX:$,centerY:o,radius:j,onMouseDown:wt,onMouseEnter:ct,onMouseOut:ue,type:"source"}),(ee==="target"||ee===!0)&&W.createElement(Yo,{position:w,centerX:c,centerY:d,radius:j,onMouseDown:dt,onMouseEnter:ct,onMouseOut:ue,type:"target"})))};return t.displayName="EdgeWrapper",E.memo(t)};function Tp(e){const t={default:Ut(e.default||pr),straight:Ut(e.bezier||Xs),step:Ut(e.step||Ks),smoothstep:Ut(e.step||Sr),simplebezier:Ut(e.simplebezier||qs)},n={},r=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,a)=>(s[a]=Ut(e[a]||pr),s),n);return{...t,...r}}function Zo(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,s=((n==null?void 0:n.y)||0)+t.y,a=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case J.Top:return{x:r+a/2,y:s};case J.Right:return{x:r+a,y:s+i/2};case J.Bottom:return{x:r+a/2,y:s+i};case J.Left:return{x:r,y:s+i/2}}}function Jo(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const Ip=(e,t,n,r,s,a)=>{const i=Zo(n,e,t),u=Zo(a,r,s);return{sourceX:i.x,sourceY:i.y,targetX:u.x,targetY:u.y}};function Np({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:a,width:i,height:u,transform:l}){const f={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+s),y2:Math.max(e.y+r,t.y+a)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const g=Cn({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:u/l[2]}),m=Math.max(0,Math.min(g.x2,f.x2)-Math.max(g.x,f.x)),v=Math.max(0,Math.min(g.y2,f.y2)-Math.max(g.y,f.y));return Math.ceil(m*v)>0}function Qo(e){var r,s,a,i,u;const t=((r=e==null?void 0:e[me])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((u=e==null?void 0:e.positionAbsolute)==null?void 0:u.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Dp=[{level:0,isMaxLevel:!0,edges:[]}];function Lp(e,t,n=!1){let r=-1;const s=e.reduce((i,u)=>{var g,m;const l=Ue(u.zIndex);let f=l?u.zIndex:0;if(n){const v=t.get(u.target),_=t.get(u.source),I=u.selected||(v==null?void 0:v.selected)||(_==null?void 0:_.selected),A=Math.max(((g=_==null?void 0:_[me])==null?void 0:g.z)||0,((m=v==null?void 0:v[me])==null?void 0:m.z)||0,1e3);f=(l?u.zIndex:0)+(I?A:0)}return i[f]?i[f].push(u):i[f]=[u],r=f>r?f:r,i},{}),a=Object.entries(s).map(([i,u])=>{const l=+i;return{edges:u,level:l,isMaxLevel:l===r}});return a.length===0?Dp:a}function $p(e,t,n){const r=ye(E.useCallback(s=>e?s.edges.filter(a=>{const i=t.get(a.source),u=t.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(u==null?void 0:u.width)&&(u==null?void 0:u.height)&&Np({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:u.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:u.width,targetHeight:u.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,t]));return Lp(r,t,n)}const Rp=({color:e="none",strokeWidth:t=1})=>W.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),zp=({color:e="none",strokeWidth:t=1})=>W.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ei={[hr.Arrow]:Rp,[hr.ArrowClosed]:zp};function Hp(e){const t=Ee();return E.useMemo(()=>{var s,a;return Object.prototype.hasOwnProperty.call(ei,e)?ei[e]:((a=(s=t.getState()).onError)==null||a.call(s,"009",mt.error009(e)),null)},[e])}const Vp=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:u="auto-start-reverse"})=>{const l=Hp(t);return l?W.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:u,refX:"0",refY:"0"},W.createElement(l,{color:n,strokeWidth:i})):null},Pp=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((s,a)=>([a.markerStart,a.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const u=ws(i,t);r.includes(u)||(s.push({id:u,color:i.color||e,...i}),r.push(u))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))},tu=({defaultColor:e,rfId:t})=>{const n=ye(E.useCallback(Pp({defaultColor:e,rfId:t}),[e,t]),(r,s)=>!(r.length!==s.length||r.some((a,i)=>a.id!==s[i].id)));return W.createElement("defs",null,n.map(r=>W.createElement(Vp,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};tu.displayName="MarkerDefinitions";var Bp=E.memo(tu);const Op=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),nu=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:a,onEdgeContextMenu:i,onEdgeMouseEnter:u,onEdgeMouseMove:l,onEdgeMouseLeave:f,onEdgeClick:g,onEdgeDoubleClick:m,onReconnect:v,onReconnectStart:_,onReconnectEnd:I,reconnectRadius:A,children:T,disableKeyboardA11y:C})=>{const{edgesFocusable:D,edgesUpdatable:$,elementsSelectable:o,width:c,height:d,connectionMode:y,nodeInternals:w,onError:x}=ye(Op,Re),k=$p(t,w,n);return c?W.createElement(W.Fragment,null,k.map(({level:M,edges:z,isMaxLevel:R})=>W.createElement("svg",{key:M,style:{zIndex:M},width:c,height:d,className:"react-flow__edges react-flow__container"},R&&W.createElement(Bp,{defaultColor:e,rfId:r}),W.createElement("g",null,z.map(b=>{const[S,h,j]=Qo(w.get(b.source)),[H,N,V]=Qo(w.get(b.target));if(!j||!V)return null;let L=b.type||"default";s[L]||(x==null||x("011",mt.error011(L)),L="default");const P=s[L]||s.default,O=y===Pt.Strict?N.target:(N.target??[]).concat(N.source??[]),F=Jo(h.source,b.sourceHandle),G=Jo(O,b.targetHandle),ee=(F==null?void 0:F.position)||J.Bottom,K=(G==null?void 0:G.position)||J.Top,q=!!(b.focusable||D&&typeof b.focusable>"u"),re=b.reconnectable||b.updatable,te=typeof v<"u"&&(re||$&&typeof re>"u");if(!F||!G)return x==null||x("008",mt.error008(F,b)),null;const{sourceX:fe,sourceY:ke,targetX:Me,targetY:Ne}=Ip(S,F,ee,H,G,K);return W.createElement(P,{key:b.id,id:b.id,className:qe([b.className,a]),type:L,data:b.data,selected:!!b.selected,animated:!!b.animated,hidden:!!b.hidden,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,style:b.style,source:b.source,target:b.target,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerEnd:b.markerEnd,markerStart:b.markerStart,sourceX:fe,sourceY:ke,targetX:Me,targetY:Ne,sourcePosition:ee,targetPosition:K,elementsSelectable:o,onContextMenu:i,onMouseEnter:u,onMouseMove:l,onMouseLeave:f,onClick:g,onEdgeDoubleClick:m,onReconnect:v,onReconnectStart:_,onReconnectEnd:I,reconnectRadius:A,rfId:r,ariaLabel:b.ariaLabel,isFocusable:q,isReconnectable:te,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth,disableKeyboardA11y:C})})))),T):null};nu.displayName="EdgeRenderer";var Fp=E.memo(nu);const Wp=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Up({children:e}){const t=ye(Wp);return W.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Gp(e){const t=Ua(),n=E.useRef(!1);E.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const qp={[J.Left]:J.Right,[J.Right]:J.Left,[J.Top]:J.Bottom,[J.Bottom]:J.Top},ru=({nodeId:e,handleType:t,style:n,type:r=Ct.Bezier,CustomComponent:s,connectionStatus:a})=>{var d,y,w;const{fromNode:i,handleId:u,toX:l,toY:f,connectionMode:g}=ye(E.useCallback(x=>({fromNode:x.nodeInternals.get(e),handleId:x.connectionHandleId,toX:(x.connectionPosition.x-x.transform[0])/x.transform[2],toY:(x.connectionPosition.y-x.transform[1])/x.transform[2],connectionMode:x.connectionMode}),[e]),Re),m=(d=i==null?void 0:i[me])==null?void 0:d.handleBounds;let v=m==null?void 0:m[t];if(g===Pt.Loose&&(v=v||(m==null?void 0:m[t==="source"?"target":"source"])),!i||!v)return null;const _=u?v.find(x=>x.id===u):v[0],I=_?_.x+_.width/2:(i.width??0)/2,A=_?_.y+_.height/2:i.height??0,T=(((y=i.positionAbsolute)==null?void 0:y.x)??0)+I,C=(((w=i.positionAbsolute)==null?void 0:w.y)??0)+A,D=_==null?void 0:_.position,$=D?qp[D]:null;if(!D||!$)return null;if(s)return W.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:_,fromX:T,fromY:C,toX:l,toY:f,fromPosition:D,toPosition:$,connectionStatus:a});let o="";const c={sourceX:T,sourceY:C,sourcePosition:D,targetX:l,targetY:f,targetPosition:$};return r===Ct.Bezier?[o]=Ca(c):r===Ct.Step?[o]=bs({...c,borderRadius:0}):r===Ct.SmoothStep?[o]=bs(c):r===Ct.SimpleBezier?[o]=Sa(c):o=`M${T},${C} ${l},${f}`,W.createElement("path",{d:o,fill:"none",className:"react-flow__connection-path",style:n})};ru.displayName="ConnectionLine";const Kp=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Xp({containerStyle:e,style:t,type:n,component:r}){const{nodeId:s,handleType:a,nodesConnectable:i,width:u,height:l,connectionStatus:f}=ye(Kp,Re);return!(s&&a&&u&&i)?null:W.createElement("svg",{style:e,width:u,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},W.createElement("g",{className:qe(["react-flow__connection",f])},W.createElement(ru,{nodeId:s,handleType:a,style:t,type:n,CustomComponent:r,connectionStatus:f})))}function ti(e,t){return E.useRef(null),Ee(),E.useMemo(()=>t(e),[e])}const su=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:a,onNodeClick:i,onEdgeClick:u,onNodeDoubleClick:l,onEdgeDoubleClick:f,onNodeMouseEnter:g,onNodeMouseMove:m,onNodeMouseLeave:v,onNodeContextMenu:_,onSelectionContextMenu:I,onSelectionStart:A,onSelectionEnd:T,connectionLineType:C,connectionLineStyle:D,connectionLineComponent:$,connectionLineContainerStyle:o,selectionKeyCode:c,selectionOnDrag:d,selectionMode:y,multiSelectionKeyCode:w,panActivationKeyCode:x,zoomActivationKeyCode:k,deleteKeyCode:M,onlyRenderVisibleElements:z,elementsSelectable:R,selectNodesOnDrag:b,defaultViewport:S,translateExtent:h,minZoom:j,maxZoom:H,preventScrolling:N,defaultMarkerColor:V,zoomOnScroll:L,zoomOnPinch:P,panOnScroll:O,panOnScrollSpeed:F,panOnScrollMode:G,zoomOnDoubleClick:ee,panOnDrag:K,onPaneClick:q,onPaneMouseEnter:re,onPaneMouseMove:te,onPaneMouseLeave:fe,onPaneScroll:ke,onPaneContextMenu:Me,onEdgeContextMenu:Ne,onEdgeMouseEnter:de,onEdgeMouseMove:Ve,onEdgeMouseLeave:ie,onReconnect:Q,onReconnectStart:je,onReconnectEnd:ut,reconnectRadius:It,noDragClassName:bt,noWheelClassName:Pe,noPanClassName:Ke,elevateEdgesOnSelect:wt,disableKeyboardA11y:dt,nodeOrigin:ct,nodeExtent:ue,rfId:Be})=>{const _t=ti(e,kp),ve=ti(t,Tp);return Gp(a),W.createElement(vp,{onPaneClick:q,onPaneMouseEnter:re,onPaneMouseMove:te,onPaneMouseLeave:fe,onPaneContextMenu:Me,onPaneScroll:ke,deleteKeyCode:M,selectionKeyCode:c,selectionOnDrag:d,selectionMode:y,onSelectionStart:A,onSelectionEnd:T,multiSelectionKeyCode:w,panActivationKeyCode:x,zoomActivationKeyCode:k,elementsSelectable:R,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:L,zoomOnPinch:P,zoomOnDoubleClick:ee,panOnScroll:O,panOnScrollSpeed:F,panOnScrollMode:G,panOnDrag:K,defaultViewport:S,translateExtent:h,minZoom:j,maxZoom:H,onSelectionContextMenu:I,preventScrolling:N,noDragClassName:bt,noWheelClassName:Pe,noPanClassName:Ke,disableKeyboardA11y:dt},W.createElement(Up,null,W.createElement(Fp,{edgeTypes:ve,onEdgeClick:u,onEdgeDoubleClick:f,onlyRenderVisibleElements:z,onEdgeContextMenu:Ne,onEdgeMouseEnter:de,onEdgeMouseMove:Ve,onEdgeMouseLeave:ie,onReconnect:Q,onReconnectStart:je,onReconnectEnd:ut,reconnectRadius:It,defaultMarkerColor:V,noPanClassName:Ke,elevateEdgesOnSelect:!!wt,disableKeyboardA11y:dt,rfId:Be},W.createElement(Xp,{style:D,type:C,component:$,containerStyle:o})),W.createElement("div",{className:"react-flow__edgelabel-renderer"}),W.createElement(Ep,{nodeTypes:_t,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:g,onNodeMouseMove:m,onNodeMouseLeave:v,onNodeContextMenu:_,selectNodesOnDrag:b,onlyRenderVisibleElements:z,noPanClassName:Ke,noDragClassName:bt,disableKeyboardA11y:dt,nodeOrigin:ct,nodeExtent:ue,rfId:Be})))};su.displayName="GraphView";var Yp=E.memo(su);const ks=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],xt={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:ks,nodeExtent:ks,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Pt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Sh,isValidConnection:void 0},Zp=()=>tc((e,t)=>({...xt,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:a}=t();e({nodeInternals:Yr(n,r,s,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",a=typeof r<"u",i=s?Yr(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:a?r:[],hasDefaultNodes:s,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:a,fitViewOnInitDone:i,fitViewOnInitOptions:u,domNode:l,nodeOrigin:f}=t(),g=l==null?void 0:l.querySelector(".react-flow__viewport");if(!g)return;const m=window.getComputedStyle(g),{m22:v}=new window.DOMMatrixReadOnly(m.transform),_=n.reduce((A,T)=>{const C=s.get(T.id);if(C!=null&&C.hidden)s.set(C.id,{...C,[me]:{...C[me],handleBounds:void 0}});else if(C){const D=Us(T.nodeElement);!!(D.width&&D.height&&(C.width!==D.width||C.height!==D.height||T.forceUpdate))&&(s.set(C.id,{...C,[me]:{...C[me],handleBounds:{source:Ko(".source",T.nodeElement,v,f),target:Ko(".target",T.nodeElement,v,f)}},...D}),A.push({id:C.id,type:"dimensions",dimensions:D}))}return A},[]);Fa(s,f);const I=i||a&&!i&&Wa(t,{initial:!0,...u});e({nodeInternals:new Map(s),fitViewOnInitDone:I}),(_==null?void 0:_.length)>0&&(r==null||r(_))},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:a}=t(),i=n.map(u=>{const l={id:u.id,type:"position",dragging:s};return r&&(l.positionAbsolute=u.positionAbsolute,l.position=u.position),l});a(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:a,nodeOrigin:i,getNodes:u,elevateNodesOnSelect:l}=t();if(n!=null&&n.length){if(a){const f=qa(n,u()),g=Yr(f,s,i,l);e({nodeInternals:g})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=t();let i,u=null;r?i=n.map(l=>kt(l,!0)):(i=Gt(a(),n),u=Gt(s,[])),Xn({changedNodes:i,changedEdges:u,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=t();let i,u=null;r?i=n.map(l=>kt(l,!0)):(i=Gt(s,n),u=Gt(a(),[])),Xn({changedNodes:u,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:a}=t(),i=n||a(),u=r||s,l=i.map(g=>(g.selected=!1,kt(g.id,!1))),f=u.map(g=>kt(g.id,!1));Xn({changedNodes:l,changedEdges:f,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=t();r==null||r.scaleExtent([n,s]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=t();r==null||r.scaleExtent([s,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),a=r().filter(u=>u.selected).map(u=>kt(u.id,!1)),i=n.filter(u=>u.selected).map(u=>kt(u.id,!1));Xn({changedNodes:a,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(s=>{s.positionAbsolute=Gs(s.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:a,d3Zoom:i,d3Selection:u,translateExtent:l}=t();if(!i||!u||!n.x&&!n.y)return!1;const f=Et.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),g=[[0,0],[s,a]],m=i==null?void 0:i.constrain()(f,g,l);return i.transform(u,m),r[0]!==m.x||r[1]!==m.y||r[2]!==m.k},cancelConnection:()=>e({connectionNodeId:xt.connectionNodeId,connectionHandleId:xt.connectionHandleId,connectionHandleType:xt.connectionHandleType,connectionStatus:xt.connectionStatus,connectionStartHandle:xt.connectionStartHandle,connectionEndHandle:xt.connectionEndHandle}),reset:()=>e({...xt})}),Object.is),ou=({children:e})=>{const t=E.useRef(null);return t.current||(t.current=Zp()),W.createElement(yh,{value:t.current},e)};ou.displayName="ReactFlowProvider";const iu=({children:e})=>E.useContext(kr)?W.createElement(W.Fragment,null,e):W.createElement(ou,null,e);iu.displayName="ReactFlowWrapper";const Jp={input:Ra,default:vs,output:Ha,group:Qs},Qp={default:pr,straight:Xs,step:Ks,smoothstep:Sr,simplebezier:qs},eg=[0,0],tg=[15,15],ng={x:0,y:0,zoom:1},rg={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},sg=E.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:a=Jp,edgeTypes:i=Qp,onNodeClick:u,onEdgeClick:l,onInit:f,onMove:g,onMoveStart:m,onMoveEnd:v,onConnect:_,onConnectStart:I,onConnectEnd:A,onClickConnectStart:T,onClickConnectEnd:C,onNodeMouseEnter:D,onNodeMouseMove:$,onNodeMouseLeave:o,onNodeContextMenu:c,onNodeDoubleClick:d,onNodeDragStart:y,onNodeDrag:w,onNodeDragStop:x,onNodesDelete:k,onEdgesDelete:M,onSelectionChange:z,onSelectionDragStart:R,onSelectionDrag:b,onSelectionDragStop:S,onSelectionContextMenu:h,onSelectionStart:j,onSelectionEnd:H,connectionMode:N=Pt.Strict,connectionLineType:V=Ct.Bezier,connectionLineStyle:L,connectionLineComponent:P,connectionLineContainerStyle:O,deleteKeyCode:F="Backspace",selectionKeyCode:G="Shift",selectionOnDrag:ee=!1,selectionMode:K=En.Full,panActivationKeyCode:q="Space",multiSelectionKeyCode:re=fr()?"Meta":"Control",zoomActivationKeyCode:te=fr()?"Meta":"Control",snapToGrid:fe=!1,snapGrid:ke=tg,onlyRenderVisibleElements:Me=!1,selectNodesOnDrag:Ne=!0,nodesDraggable:de,nodesConnectable:Ve,nodesFocusable:ie,nodeOrigin:Q=eg,edgesFocusable:je,edgesUpdatable:ut,elementsSelectable:It,defaultViewport:bt=ng,minZoom:Pe=.5,maxZoom:Ke=2,translateExtent:wt=ks,preventScrolling:dt=!0,nodeExtent:ct,defaultMarkerColor:ue="#b1b1b7",zoomOnScroll:Be=!0,zoomOnPinch:_t=!0,panOnScroll:ve=!1,panOnScrollSpeed:De=.5,panOnScrollMode:Le=Rt.Free,zoomOnDoubleClick:lt=!0,panOnDrag:Oe=!0,onPaneClick:Xe,onPaneMouseEnter:ze,onPaneMouseMove:Fe,onPaneMouseLeave:vt,onPaneScroll:Nt,onPaneContextMenu:dn,children:zn,onEdgeContextMenu:ft,onEdgeDoubleClick:Mr,onEdgeMouseEnter:jr,onEdgeMouseMove:Hn,onEdgeMouseLeave:Ar,onEdgeUpdate:Vn,onEdgeUpdateStart:cn,onEdgeUpdateEnd:Tr,onReconnect:Ir,onReconnectStart:Nr,onReconnectEnd:Dr,reconnectRadius:Lr=10,edgeUpdaterRadius:$r=10,onNodesChange:Pn,onEdgesChange:Rr,noDragClassName:Bn="nodrag",noWheelClassName:On="nowheel",noPanClassName:ln="nopan",fitView:zr=!1,fitViewOptions:Hr,connectOnClick:B=!0,attributionPosition:U,proOptions:Z,defaultEdgeOptions:Y,elevateNodesOnSelect:ae=!0,elevateEdgesOnSelect:he=!1,disableKeyboardA11y:ce=!1,autoPanOnConnect:Te=!0,autoPanOnNodeDrag:pe=!0,connectionRadius:be=20,isValidConnection:le,onError:xe,style:We,id:Fn,nodeDragThreshold:Vr,...Ou},Fu)=>{const Pr=Fn||"1";return W.createElement("div",{...Ou,style:{...We,...rg},ref:Fu,className:qe(["react-flow",s]),"data-testid":"rf__wrapper",id:Fn},W.createElement(iu,null,W.createElement(Yp,{onInit:f,onMove:g,onMoveStart:m,onMoveEnd:v,onNodeClick:u,onEdgeClick:l,onNodeMouseEnter:D,onNodeMouseMove:$,onNodeMouseLeave:o,onNodeContextMenu:c,onNodeDoubleClick:d,nodeTypes:a,edgeTypes:i,connectionLineType:V,connectionLineStyle:L,connectionLineComponent:P,connectionLineContainerStyle:O,selectionKeyCode:G,selectionOnDrag:ee,selectionMode:K,deleteKeyCode:F,multiSelectionKeyCode:re,panActivationKeyCode:q,zoomActivationKeyCode:te,onlyRenderVisibleElements:Me,selectNodesOnDrag:Ne,defaultViewport:bt,translateExtent:wt,minZoom:Pe,maxZoom:Ke,preventScrolling:dt,zoomOnScroll:Be,zoomOnPinch:_t,zoomOnDoubleClick:lt,panOnScroll:ve,panOnScrollSpeed:De,panOnScrollMode:Le,panOnDrag:Oe,onPaneClick:Xe,onPaneMouseEnter:ze,onPaneMouseMove:Fe,onPaneMouseLeave:vt,onPaneScroll:Nt,onPaneContextMenu:dn,onSelectionContextMenu:h,onSelectionStart:j,onSelectionEnd:H,onEdgeContextMenu:ft,onEdgeDoubleClick:Mr,onEdgeMouseEnter:jr,onEdgeMouseMove:Hn,onEdgeMouseLeave:Ar,onReconnect:Ir??Vn,onReconnectStart:Nr??cn,onReconnectEnd:Dr??Tr,reconnectRadius:Lr??$r,defaultMarkerColor:ue,noDragClassName:Bn,noWheelClassName:On,noPanClassName:ln,elevateEdgesOnSelect:he,rfId:Pr,disableKeyboardA11y:ce,nodeOrigin:Q,nodeExtent:ct}),W.createElement(qh,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:_,onConnectStart:I,onConnectEnd:A,onClickConnectStart:T,onClickConnectEnd:C,nodesDraggable:de,nodesConnectable:Ve,nodesFocusable:ie,edgesFocusable:je,edgesUpdatable:ut,elementsSelectable:It,elevateNodesOnSelect:ae,minZoom:Pe,maxZoom:Ke,nodeExtent:ct,onNodesChange:Pn,onEdgesChange:Rr,snapToGrid:fe,snapGrid:ke,connectionMode:N,translateExtent:wt,connectOnClick:B,defaultEdgeOptions:Y,fitView:zr,fitViewOptions:Hr,onNodesDelete:k,onEdgesDelete:M,onNodeDragStart:y,onNodeDrag:w,onNodeDragStop:x,onSelectionDrag:b,onSelectionDragStart:R,onSelectionDragStop:S,noPanClassName:ln,nodeOrigin:Q,rfId:Pr,autoPanOnConnect:Te,autoPanOnNodeDrag:pe,onError:xe,connectionRadius:be,isValidConnection:le,nodeDragThreshold:Vr}),W.createElement(Uh,{onSelectionChange:z}),zn,W.createElement(_h,{proOptions:Z,position:U}),W.createElement(Jh,{rfId:Pr,disableKeyboardA11y:ce})))});sg.displayName="ReactFlow";const og=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function E0({children:e}){const t=ye(og);return t?yt.createPortal(e,t):null}function ig(){const e=Ee();return E.useCallback(t=>{const{domNode:n,updateNodeDimensions:r}=e.getState(),a=(Array.isArray(t)?t:[t]).reduce((i,u)=>{const l=n==null?void 0:n.querySelector(`.react-flow__node[data-id="${u}"]`);return l&&i.push({id:u,nodeElement:l,forceUpdate:!0}),i},[]);requestAnimationFrame(()=>r(a))},[])}function au(e){return t=>{const[n,r]=E.useState(t),s=E.useCallback(a=>r(i=>e(a,i)),[]);return[n,r,s]}}const M0=au(qa),j0=au(fp);var uu={exports:{}};(function(e){(function(){function t(o){var c={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(o===!1)return JSON.parse(JSON.stringify(c));var d={};for(var y in c)c.hasOwnProperty(y)&&(d[y]=c[y].defaultValue);return d}function n(){var o=t(!0),c={};for(var d in o)o.hasOwnProperty(d)&&(c[d]=!0);return c}var r={},s={},a={},i=t(!0),u="vanilla",l={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:t(!0),allOn:n()};r.helper={},r.extensions={},r.setOption=function(o,c){return i[o]=c,this},r.getOption=function(o){return i[o]},r.getOptions=function(){return i},r.resetOptions=function(){i=t(!0)},r.setFlavor=function(o){if(!l.hasOwnProperty(o))throw Error(o+" flavor was not found");r.resetOptions();var c=l[o];u=o;for(var d in c)c.hasOwnProperty(d)&&(i[d]=c[d])},r.getFlavor=function(){return u},r.getFlavorOptions=function(o){if(l.hasOwnProperty(o))return l[o]},r.getDefaultOptions=function(o){return t(o)},r.subParser=function(o,c){if(r.helper.isString(o))if(typeof c<"u")s[o]=c;else{if(s.hasOwnProperty(o))return s[o];throw Error("SubParser named "+o+" not registered!")}},r.extension=function(o,c){if(!r.helper.isString(o))throw Error("Extension 'name' must be a string");if(o=r.helper.stdExtName(o),r.helper.isUndefined(c)){if(!a.hasOwnProperty(o))throw Error("Extension named "+o+" is not registered!");return a[o]}else{typeof c=="function"&&(c=c()),r.helper.isArray(c)||(c=[c]);var d=f(c,o);if(d.valid)a[o]=c;else throw Error(d.error)}},r.getAllExtensions=function(){return a},r.removeExtension=function(o){delete a[o]},r.resetExtensions=function(){a={}};function f(o,c){var d=c?"Error in "+c+" extension->":"Error in unnamed extension",y={valid:!0,error:""};r.helper.isArray(o)||(o=[o]);for(var w=0;w<o.length;++w){var x=d+" sub-extension "+w+": ",k=o[w];if(typeof k!="object")return y.valid=!1,y.error=x+"must be an object, but "+typeof k+" given",y;if(!r.helper.isString(k.type))return y.valid=!1,y.error=x+'property "type" must be a string, but '+typeof k.type+" given",y;var M=k.type=k.type.toLowerCase();if(M==="language"&&(M=k.type="lang"),M==="html"&&(M=k.type="output"),M!=="lang"&&M!=="output"&&M!=="listener")return y.valid=!1,y.error=x+"type "+M+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',y;if(M==="listener"){if(r.helper.isUndefined(k.listeners))return y.valid=!1,y.error=x+'. Extensions of type "listener" must have a property called "listeners"',y}else if(r.helper.isUndefined(k.filter)&&r.helper.isUndefined(k.regex))return y.valid=!1,y.error=x+M+' extensions must define either a "regex" property or a "filter" method',y;if(k.listeners){if(typeof k.listeners!="object")return y.valid=!1,y.error=x+'"listeners" property must be an object but '+typeof k.listeners+" given",y;for(var z in k.listeners)if(k.listeners.hasOwnProperty(z)&&typeof k.listeners[z]!="function")return y.valid=!1,y.error=x+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+z+" must be a function but "+typeof k.listeners[z]+" given",y}if(k.filter){if(typeof k.filter!="function")return y.valid=!1,y.error=x+'"filter" must be a function, but '+typeof k.filter+" given",y}else if(k.regex){if(r.helper.isString(k.regex)&&(k.regex=new RegExp(k.regex,"g")),!(k.regex instanceof RegExp))return y.valid=!1,y.error=x+'"regex" property must either be a string or a RegExp object, but '+typeof k.regex+" given",y;if(r.helper.isUndefined(k.replace))return y.valid=!1,y.error=x+'"regex" extensions must implement a replace string or function',y}}return y}r.validateExtension=function(o){var c=f(o,null);return c.valid?!0:(console.warn(c.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(o){return typeof o=="string"||o instanceof String},r.helper.isFunction=function(o){var c={};return o&&c.toString.call(o)==="[object Function]"},r.helper.isArray=function(o){return Array.isArray(o)},r.helper.isUndefined=function(o){return typeof o>"u"},r.helper.forEach=function(o,c){if(r.helper.isUndefined(o))throw new Error("obj param is required");if(r.helper.isUndefined(c))throw new Error("callback param is required");if(!r.helper.isFunction(c))throw new Error("callback param must be a function/closure");if(typeof o.forEach=="function")o.forEach(c);else if(r.helper.isArray(o))for(var d=0;d<o.length;d++)c(o[d],d,o);else if(typeof o=="object")for(var y in o)o.hasOwnProperty(y)&&c(o[y],y,o);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(o){return o.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function g(o,c){var d=c.charCodeAt(0);return"¨E"+d+"E"}r.helper.escapeCharactersCallback=g,r.helper.escapeCharacters=function(o,c,d){var y="(["+c.replace(/([\[\]\\])/g,"\\$1")+"])";d&&(y="\\\\"+y);var w=new RegExp(y,"g");return o=o.replace(w,g),o},r.helper.unescapeHTMLEntities=function(o){return o.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var m=function(o,c,d,y){var w=y||"",x=w.indexOf("g")>-1,k=new RegExp(c+"|"+d,"g"+w.replace(/g/g,"")),M=new RegExp(c,w.replace(/g/g,"")),z=[],R,b,S,h,j;do for(R=0;S=k.exec(o);)if(M.test(S[0]))R++||(b=k.lastIndex,h=b-S[0].length);else if(R&&!--R){j=S.index+S[0].length;var H={left:{start:h,end:b},match:{start:b,end:S.index},right:{start:S.index,end:j},wholeMatch:{start:h,end:j}};if(z.push(H),!x)return z}while(R&&(k.lastIndex=b));return z};r.helper.matchRecursiveRegExp=function(o,c,d,y){for(var w=m(o,c,d,y),x=[],k=0;k<w.length;++k)x.push([o.slice(w[k].wholeMatch.start,w[k].wholeMatch.end),o.slice(w[k].match.start,w[k].match.end),o.slice(w[k].left.start,w[k].left.end),o.slice(w[k].right.start,w[k].right.end)]);return x},r.helper.replaceRecursiveRegExp=function(o,c,d,y,w){if(!r.helper.isFunction(c)){var x=c;c=function(){return x}}var k=m(o,d,y,w),M=o,z=k.length;if(z>0){var R=[];k[0].wholeMatch.start!==0&&R.push(o.slice(0,k[0].wholeMatch.start));for(var b=0;b<z;++b)R.push(c(o.slice(k[b].wholeMatch.start,k[b].wholeMatch.end),o.slice(k[b].match.start,k[b].match.end),o.slice(k[b].left.start,k[b].left.end),o.slice(k[b].right.start,k[b].right.end))),b<z-1&&R.push(o.slice(k[b].wholeMatch.end,k[b+1].wholeMatch.start));k[z-1].wholeMatch.end<o.length&&R.push(o.slice(k[z-1].wholeMatch.end)),M=R.join("")}return M},r.helper.regexIndexOf=function(o,c,d){if(!r.helper.isString(o))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(c instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var y=o.substring(d||0).search(c);return y>=0?y+(d||0):y},r.helper.splitAtIndex=function(o,c){if(!r.helper.isString(o))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[o.substring(0,c),o.substring(c)]},r.helper.encodeEmailAddress=function(o){var c=[function(d){return"&#"+d.charCodeAt(0)+";"},function(d){return"&#x"+d.charCodeAt(0).toString(16)+";"},function(d){return d}];return o=o.replace(/./g,function(d){if(d==="@")d=c[Math.floor(Math.random()*2)](d);else{var y=Math.random();d=y>.9?c[2](d):y>.45?c[1](d):c[0](d)}return d}),o},r.helper.padEnd=function(c,d,y){return d=d>>0,y=String(y||" "),c.length>d?String(c):(d=d-c.length,d>y.length&&(y+=y.repeat(d/y.length)),String(c)+y.slice(0,d))},typeof console>"u"&&(console={warn:function(o){alert(o)},log:function(o){alert(o)},error:function(o){throw o}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"👍","-1":"👎",100:"💯",1234:"🔢","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉","8ball":"🎱",a:"🅰️",ab:"🆎",abc:"🔤",abcd:"🔡",accept:"🉑",aerial_tramway:"🚡",airplane:"✈️",alarm_clock:"⏰",alembic:"⚗️",alien:"👽",ambulance:"🚑",amphora:"🏺",anchor:"⚓️",angel:"👼",anger:"💢",angry:"😠",anguished:"😧",ant:"🐜",apple:"🍎",aquarius:"♒️",aries:"♈️",arrow_backward:"◀️",arrow_double_down:"⏬",arrow_double_up:"⏫",arrow_down:"⬇️",arrow_down_small:"🔽",arrow_forward:"▶️",arrow_heading_down:"⤵️",arrow_heading_up:"⤴️",arrow_left:"⬅️",arrow_lower_left:"↙️",arrow_lower_right:"↘️",arrow_right:"➡️",arrow_right_hook:"↪️",arrow_up:"⬆️",arrow_up_down:"↕️",arrow_up_small:"🔼",arrow_upper_left:"↖️",arrow_upper_right:"↗️",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",art:"🎨",articulated_lorry:"🚛",artificial_satellite:"🛰",astonished:"😲",athletic_shoe:"👟",atm:"🏧",atom_symbol:"⚛️",avocado:"🥑",b:"🅱️",baby:"👶",baby_bottle:"🍼",baby_chick:"🐤",baby_symbol:"🚼",back:"🔙",bacon:"🥓",badminton:"🏸",baggage_claim:"🛄",baguette_bread:"🥖",balance_scale:"⚖️",balloon:"🎈",ballot_box:"🗳",ballot_box_with_check:"☑️",bamboo:"🎍",banana:"🍌",bangbang:"‼️",bank:"🏦",bar_chart:"📊",barber:"💈",baseball:"⚾️",basketball:"🏀",basketball_man:"⛹️",basketball_woman:"⛹️&zwj;♀️",bat:"🦇",bath:"🛀",bathtub:"🛁",battery:"🔋",beach_umbrella:"🏖",bear:"🐻",bed:"🛏",bee:"🐝",beer:"🍺",beers:"🍻",beetle:"🐞",beginner:"🔰",bell:"🔔",bellhop_bell:"🛎",bento:"🍱",biking_man:"🚴",bike:"🚲",biking_woman:"🚴&zwj;♀️",bikini:"👙",biohazard:"☣️",bird:"🐦",birthday:"🎂",black_circle:"⚫️",black_flag:"🏴",black_heart:"🖤",black_joker:"🃏",black_large_square:"⬛️",black_medium_small_square:"◾️",black_medium_square:"◼️",black_nib:"✒️",black_small_square:"▪️",black_square_button:"🔲",blonde_man:"👱",blonde_woman:"👱&zwj;♀️",blossom:"🌼",blowfish:"🐡",blue_book:"📘",blue_car:"🚙",blue_heart:"💙",blush:"😊",boar:"🐗",boat:"⛵️",bomb:"💣",book:"📖",bookmark:"🔖",bookmark_tabs:"📑",books:"📚",boom:"💥",boot:"👢",bouquet:"💐",bowing_man:"🙇",bow_and_arrow:"🏹",bowing_woman:"🙇&zwj;♀️",bowling:"🎳",boxing_glove:"🥊",boy:"👦",bread:"🍞",bride_with_veil:"👰",bridge_at_night:"🌉",briefcase:"💼",broken_heart:"💔",bug:"🐛",building_construction:"🏗",bulb:"💡",bullettrain_front:"🚅",bullettrain_side:"🚄",burrito:"🌯",bus:"🚌",business_suit_levitating:"🕴",busstop:"🚏",bust_in_silhouette:"👤",busts_in_silhouette:"👥",butterfly:"🦋",cactus:"🌵",cake:"🍰",calendar:"📆",call_me_hand:"🤙",calling:"📲",camel:"🐫",camera:"📷",camera_flash:"📸",camping:"🏕",cancer:"♋️",candle:"🕯",candy:"🍬",canoe:"🛶",capital_abcd:"🔠",capricorn:"♑️",car:"🚗",card_file_box:"🗃",card_index:"📇",card_index_dividers:"🗂",carousel_horse:"🎠",carrot:"🥕",cat:"🐱",cat2:"🐈",cd:"💿",chains:"⛓",champagne:"🍾",chart:"💹",chart_with_downwards_trend:"📉",chart_with_upwards_trend:"📈",checkered_flag:"🏁",cheese:"🧀",cherries:"🍒",cherry_blossom:"🌸",chestnut:"🌰",chicken:"🐔",children_crossing:"🚸",chipmunk:"🐿",chocolate_bar:"🍫",christmas_tree:"🎄",church:"⛪️",cinema:"🎦",circus_tent:"🎪",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",cl:"🆑",clamp:"🗜",clap:"👏",clapper:"🎬",classical_building:"🏛",clinking_glasses:"🥂",clipboard:"📋",clock1:"🕐",clock10:"🕙",clock1030:"🕥",clock11:"🕚",clock1130:"🕦",clock12:"🕛",clock1230:"🕧",clock130:"🕜",clock2:"🕑",clock230:"🕝",clock3:"🕒",clock330:"🕞",clock4:"🕓",clock430:"🕟",clock5:"🕔",clock530:"🕠",clock6:"🕕",clock630:"🕡",clock7:"🕖",clock730:"🕢",clock8:"🕗",clock830:"🕣",clock9:"🕘",clock930:"🕤",closed_book:"📕",closed_lock_with_key:"🔐",closed_umbrella:"🌂",cloud:"☁️",cloud_with_lightning:"🌩",cloud_with_lightning_and_rain:"⛈",cloud_with_rain:"🌧",cloud_with_snow:"🌨",clown_face:"🤡",clubs:"♣️",cocktail:"🍸",coffee:"☕️",coffin:"⚰️",cold_sweat:"😰",comet:"☄️",computer:"💻",computer_mouse:"🖱",confetti_ball:"🎊",confounded:"😖",confused:"😕",congratulations:"㊗️",construction:"🚧",construction_worker_man:"👷",construction_worker_woman:"👷&zwj;♀️",control_knobs:"🎛",convenience_store:"🏪",cookie:"🍪",cool:"🆒",policeman:"👮",copyright:"©️",corn:"🌽",couch_and_lamp:"🛋",couple:"👫",couple_with_heart_woman_man:"💑",couple_with_heart_man_man:"👨&zwj;❤️&zwj;👨",couple_with_heart_woman_woman:"👩&zwj;❤️&zwj;👩",couplekiss_man_man:"👨&zwj;❤️&zwj;💋&zwj;👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩&zwj;❤️&zwj;💋&zwj;👩",cow:"🐮",cow2:"🐄",cowboy_hat_face:"🤠",crab:"🦀",crayon:"🖍",credit_card:"💳",crescent_moon:"🌙",cricket:"🏏",crocodile:"🐊",croissant:"🥐",crossed_fingers:"🤞",crossed_flags:"🎌",crossed_swords:"⚔️",crown:"👑",cry:"😢",crying_cat_face:"😿",crystal_ball:"🔮",cucumber:"🥒",cupid:"💘",curly_loop:"➰",currency_exchange:"💱",curry:"🍛",custard:"🍮",customs:"🛃",cyclone:"🌀",dagger:"🗡",dancer:"💃",dancing_women:"👯",dancing_men:"👯&zwj;♂️",dango:"🍡",dark_sunglasses:"🕶",dart:"🎯",dash:"💨",date:"📅",deciduous_tree:"🌳",deer:"🦌",department_store:"🏬",derelict_house:"🏚",desert:"🏜",desert_island:"🏝",desktop_computer:"🖥",male_detective:"🕵️",diamond_shape_with_a_dot_inside:"💠",diamonds:"♦️",disappointed:"😞",disappointed_relieved:"😥",dizzy:"💫",dizzy_face:"😵",do_not_litter:"🚯",dog:"🐶",dog2:"🐕",dollar:"💵",dolls:"🎎",dolphin:"🐬",door:"🚪",doughnut:"🍩",dove:"🕊",dragon:"🐉",dragon_face:"🐲",dress:"👗",dromedary_camel:"🐪",drooling_face:"🤤",droplet:"💧",drum:"🥁",duck:"🦆",dvd:"📀","e-mail":"📧",eagle:"🦅",ear:"👂",ear_of_rice:"🌾",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",egg:"🥚",eggplant:"🍆",eight_pointed_black_star:"✴️",eight_spoked_asterisk:"✳️",electric_plug:"🔌",elephant:"🐘",email:"✉️",end:"🔚",envelope_with_arrow:"📩",euro:"💶",european_castle:"🏰",european_post_office:"🏤",evergreen_tree:"🌲",exclamation:"❗️",expressionless:"😑",eye:"👁",eye_speech_bubble:"👁&zwj;🗨",eyeglasses:"👓",eyes:"👀",face_with_head_bandage:"🤕",face_with_thermometer:"🤒",fist_oncoming:"👊",factory:"🏭",fallen_leaf:"🍂",family_man_woman_boy:"👪",family_man_boy:"👨&zwj;👦",family_man_boy_boy:"👨&zwj;👦&zwj;👦",family_man_girl:"👨&zwj;👧",family_man_girl_boy:"👨&zwj;👧&zwj;👦",family_man_girl_girl:"👨&zwj;👧&zwj;👧",family_man_man_boy:"👨&zwj;👨&zwj;👦",family_man_man_boy_boy:"👨&zwj;👨&zwj;👦&zwj;👦",family_man_man_girl:"👨&zwj;👨&zwj;👧",family_man_man_girl_boy:"👨&zwj;👨&zwj;👧&zwj;👦",family_man_man_girl_girl:"👨&zwj;👨&zwj;👧&zwj;👧",family_man_woman_boy_boy:"👨&zwj;👩&zwj;👦&zwj;👦",family_man_woman_girl:"👨&zwj;👩&zwj;👧",family_man_woman_girl_boy:"👨&zwj;👩&zwj;👧&zwj;👦",family_man_woman_girl_girl:"👨&zwj;👩&zwj;👧&zwj;👧",family_woman_boy:"👩&zwj;👦",family_woman_boy_boy:"👩&zwj;👦&zwj;👦",family_woman_girl:"👩&zwj;👧",family_woman_girl_boy:"👩&zwj;👧&zwj;👦",family_woman_girl_girl:"👩&zwj;👧&zwj;👧",family_woman_woman_boy:"👩&zwj;👩&zwj;👦",family_woman_woman_boy_boy:"👩&zwj;👩&zwj;👦&zwj;👦",family_woman_woman_girl:"👩&zwj;👩&zwj;👧",family_woman_woman_girl_boy:"👩&zwj;👩&zwj;👧&zwj;👦",family_woman_woman_girl_girl:"👩&zwj;👩&zwj;👧&zwj;👧",fast_forward:"⏩",fax:"📠",fearful:"😨",feet:"🐾",female_detective:"🕵️&zwj;♀️",ferris_wheel:"🎡",ferry:"⛴",field_hockey:"🏑",file_cabinet:"🗄",file_folder:"📁",film_projector:"📽",film_strip:"🎞",fire:"🔥",fire_engine:"🚒",fireworks:"🎆",first_quarter_moon:"🌓",first_quarter_moon_with_face:"🌛",fish:"🐟",fish_cake:"🍥",fishing_pole_and_fish:"🎣",fist_raised:"✊",fist_left:"🤛",fist_right:"🤜",flags:"🎏",flashlight:"🔦",fleur_de_lis:"⚜️",flight_arrival:"🛬",flight_departure:"🛫",floppy_disk:"💾",flower_playing_cards:"🎴",flushed:"😳",fog:"🌫",foggy:"🌁",football:"🏈",footprints:"👣",fork_and_knife:"🍴",fountain:"⛲️",fountain_pen:"🖋",four_leaf_clover:"🍀",fox_face:"🦊",framed_picture:"🖼",free:"🆓",fried_egg:"🍳",fried_shrimp:"🍤",fries:"🍟",frog:"🐸",frowning:"😦",frowning_face:"☹️",frowning_man:"🙍&zwj;♂️",frowning_woman:"🙍",middle_finger:"🖕",fuelpump:"⛽️",full_moon:"🌕",full_moon_with_face:"🌝",funeral_urn:"⚱️",game_die:"🎲",gear:"⚙️",gem:"💎",gemini:"♊️",ghost:"👻",gift:"🎁",gift_heart:"💝",girl:"👧",globe_with_meridians:"🌐",goal_net:"🥅",goat:"🐐",golf:"⛳️",golfing_man:"🏌️",golfing_woman:"🏌️&zwj;♀️",gorilla:"🦍",grapes:"🍇",green_apple:"🍏",green_book:"📗",green_heart:"💚",green_salad:"🥗",grey_exclamation:"❕",grey_question:"❔",grimacing:"😬",grin:"😁",grinning:"😀",guardsman:"💂",guardswoman:"💂&zwj;♀️",guitar:"🎸",gun:"🔫",haircut_woman:"💇",haircut_man:"💇&zwj;♂️",hamburger:"🍔",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",hamster:"🐹",hand:"✋",handbag:"👜",handshake:"🤝",hankey:"💩",hatched_chick:"🐥",hatching_chick:"🐣",headphones:"🎧",hear_no_evil:"🙉",heart:"❤️",heart_decoration:"💟",heart_eyes:"😍",heart_eyes_cat:"😻",heartbeat:"💓",heartpulse:"💗",hearts:"♥️",heavy_check_mark:"✔️",heavy_division_sign:"➗",heavy_dollar_sign:"💲",heavy_heart_exclamation:"❣️",heavy_minus_sign:"➖",heavy_multiplication_x:"✖️",heavy_plus_sign:"➕",helicopter:"🚁",herb:"🌿",hibiscus:"🌺",high_brightness:"🔆",high_heel:"👠",hocho:"🔪",hole:"🕳",honey_pot:"🍯",horse:"🐴",horse_racing:"🏇",hospital:"🏥",hot_pepper:"🌶",hotdog:"🌭",hotel:"🏨",hotsprings:"♨️",hourglass:"⌛️",hourglass_flowing_sand:"⏳",house:"🏠",house_with_garden:"🏡",houses:"🏘",hugs:"🤗",hushed:"😯",ice_cream:"🍨",ice_hockey:"🏒",ice_skate:"⛸",icecream:"🍦",id:"🆔",ideograph_advantage:"🉐",imp:"👿",inbox_tray:"📥",incoming_envelope:"📨",tipping_hand_woman:"💁",information_source:"ℹ️",innocent:"😇",interrobang:"⁉️",iphone:"📱",izakaya_lantern:"🏮",jack_o_lantern:"🎃",japan:"🗾",japanese_castle:"🏯",japanese_goblin:"👺",japanese_ogre:"👹",jeans:"👖",joy:"😂",joy_cat:"😹",joystick:"🕹",kaaba:"🕋",key:"🔑",keyboard:"⌨️",keycap_ten:"🔟",kick_scooter:"🛴",kimono:"👘",kiss:"💋",kissing:"😗",kissing_cat:"😽",kissing_closed_eyes:"😚",kissing_heart:"😘",kissing_smiling_eyes:"😙",kiwi_fruit:"🥝",koala:"🐨",koko:"🈁",label:"🏷",large_blue_circle:"🔵",large_blue_diamond:"🔷",large_orange_diamond:"🔶",last_quarter_moon:"🌗",last_quarter_moon_with_face:"🌜",latin_cross:"✝️",laughing:"😆",leaves:"🍃",ledger:"📒",left_luggage:"🛅",left_right_arrow:"↔️",leftwards_arrow_with_hook:"↩️",lemon:"🍋",leo:"♌️",leopard:"🐆",level_slider:"🎚",libra:"♎️",light_rail:"🚈",link:"🔗",lion:"🦁",lips:"👄",lipstick:"💄",lizard:"🦎",lock:"🔒",lock_with_ink_pen:"🔏",lollipop:"🍭",loop:"➿",loud_sound:"🔊",loudspeaker:"📢",love_hotel:"🏩",love_letter:"💌",low_brightness:"🔅",lying_face:"🤥",m:"Ⓜ️",mag:"🔍",mag_right:"🔎",mahjong:"🀄️",mailbox:"📫",mailbox_closed:"📪",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",man:"👨",man_artist:"👨&zwj;🎨",man_astronaut:"👨&zwj;🚀",man_cartwheeling:"🤸&zwj;♂️",man_cook:"👨&zwj;🍳",man_dancing:"🕺",man_facepalming:"🤦&zwj;♂️",man_factory_worker:"👨&zwj;🏭",man_farmer:"👨&zwj;🌾",man_firefighter:"👨&zwj;🚒",man_health_worker:"👨&zwj;⚕️",man_in_tuxedo:"🤵",man_judge:"👨&zwj;⚖️",man_juggling:"🤹&zwj;♂️",man_mechanic:"👨&zwj;🔧",man_office_worker:"👨&zwj;💼",man_pilot:"👨&zwj;✈️",man_playing_handball:"🤾&zwj;♂️",man_playing_water_polo:"🤽&zwj;♂️",man_scientist:"👨&zwj;🔬",man_shrugging:"🤷&zwj;♂️",man_singer:"👨&zwj;🎤",man_student:"👨&zwj;🎓",man_teacher:"👨&zwj;🏫",man_technologist:"👨&zwj;💻",man_with_gua_pi_mao:"👲",man_with_turban:"👳",tangerine:"🍊",mans_shoe:"👞",mantelpiece_clock:"🕰",maple_leaf:"🍁",martial_arts_uniform:"🥋",mask:"😷",massage_woman:"💆",massage_man:"💆&zwj;♂️",meat_on_bone:"🍖",medal_military:"🎖",medal_sports:"🏅",mega:"📣",melon:"🍈",memo:"📝",men_wrestling:"🤼&zwj;♂️",menorah:"🕎",mens:"🚹",metal:"🤘",metro:"🚇",microphone:"🎤",microscope:"🔬",milk_glass:"🥛",milky_way:"🌌",minibus:"🚐",minidisc:"💽",mobile_phone_off:"📴",money_mouth_face:"🤑",money_with_wings:"💸",moneybag:"💰",monkey:"🐒",monkey_face:"🐵",monorail:"🚝",moon:"🌔",mortar_board:"🎓",mosque:"🕌",motor_boat:"🛥",motor_scooter:"🛵",motorcycle:"🏍",motorway:"🛣",mount_fuji:"🗻",mountain:"⛰",mountain_biking_man:"🚵",mountain_biking_woman:"🚵&zwj;♀️",mountain_cableway:"🚠",mountain_railway:"🚞",mountain_snow:"🏔",mouse:"🐭",mouse2:"🐁",movie_camera:"🎥",moyai:"🗿",mrs_claus:"🤶",muscle:"💪",mushroom:"🍄",musical_keyboard:"🎹",musical_note:"🎵",musical_score:"🎼",mute:"🔇",nail_care:"💅",name_badge:"📛",national_park:"🏞",nauseated_face:"🤢",necktie:"👔",negative_squared_cross_mark:"❎",nerd_face:"🤓",neutral_face:"😐",new:"🆕",new_moon:"🌑",new_moon_with_face:"🌚",newspaper:"📰",newspaper_roll:"🗞",next_track_button:"⏭",ng:"🆖",no_good_man:"🙅&zwj;♂️",no_good_woman:"🙅",night_with_stars:"🌃",no_bell:"🔕",no_bicycles:"🚳",no_entry:"⛔️",no_entry_sign:"🚫",no_mobile_phones:"📵",no_mouth:"😶",no_pedestrians:"🚷",no_smoking:"🚭","non-potable_water":"🚱",nose:"👃",notebook:"📓",notebook_with_decorative_cover:"📔",notes:"🎶",nut_and_bolt:"🔩",o:"⭕️",o2:"🅾️",ocean:"🌊",octopus:"🐙",oden:"🍢",office:"🏢",oil_drum:"🛢",ok:"🆗",ok_hand:"👌",ok_man:"🙆&zwj;♂️",ok_woman:"🙆",old_key:"🗝",older_man:"👴",older_woman:"👵",om:"🕉",on:"🔛",oncoming_automobile:"🚘",oncoming_bus:"🚍",oncoming_police_car:"🚔",oncoming_taxi:"🚖",open_file_folder:"📂",open_hands:"👐",open_mouth:"😮",open_umbrella:"☂️",ophiuchus:"⛎",orange_book:"📙",orthodox_cross:"☦️",outbox_tray:"📤",owl:"🦉",ox:"🐂",package:"📦",page_facing_up:"📄",page_with_curl:"📃",pager:"📟",paintbrush:"🖌",palm_tree:"🌴",pancakes:"🥞",panda_face:"🐼",paperclip:"📎",paperclips:"🖇",parasol_on_ground:"⛱",parking:"🅿️",part_alternation_mark:"〽️",partly_sunny:"⛅️",passenger_ship:"🛳",passport_control:"🛂",pause_button:"⏸",peace_symbol:"☮️",peach:"🍑",peanuts:"🥜",pear:"🍐",pen:"🖊",pencil2:"✏️",penguin:"🐧",pensive:"😔",performing_arts:"🎭",persevere:"😣",person_fencing:"🤺",pouting_woman:"🙎",phone:"☎️",pick:"⛏",pig:"🐷",pig2:"🐖",pig_nose:"🐽",pill:"💊",pineapple:"🍍",ping_pong:"🏓",pisces:"♓️",pizza:"🍕",place_of_worship:"🛐",plate_with_cutlery:"🍽",play_or_pause_button:"⏯",point_down:"👇",point_left:"👈",point_right:"👉",point_up:"☝️",point_up_2:"👆",police_car:"🚓",policewoman:"👮&zwj;♀️",poodle:"🐩",popcorn:"🍿",post_office:"🏣",postal_horn:"📯",postbox:"📮",potable_water:"🚰",potato:"🥔",pouch:"👝",poultry_leg:"🍗",pound:"💷",rage:"😡",pouting_cat:"😾",pouting_man:"🙎&zwj;♂️",pray:"🙏",prayer_beads:"📿",pregnant_woman:"🤰",previous_track_button:"⏮",prince:"🤴",princess:"👸",printer:"🖨",purple_heart:"💜",purse:"👛",pushpin:"📌",put_litter_in_its_place:"🚮",question:"❓",rabbit:"🐰",rabbit2:"🐇",racehorse:"🐎",racing_car:"🏎",radio:"📻",radio_button:"🔘",radioactive:"☢️",railway_car:"🚃",railway_track:"🛤",rainbow:"🌈",rainbow_flag:"🏳️&zwj;🌈",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",raised_hands:"🙌",raising_hand_woman:"🙋",raising_hand_man:"🙋&zwj;♂️",ram:"🐏",ramen:"🍜",rat:"🐀",record_button:"⏺",recycle:"♻️",red_circle:"🔴",registered:"®️",relaxed:"☺️",relieved:"😌",reminder_ribbon:"🎗",repeat:"🔁",repeat_one:"🔂",rescue_worker_helmet:"⛑",restroom:"🚻",revolving_hearts:"💞",rewind:"⏪",rhinoceros:"🦏",ribbon:"🎀",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",rice_scene:"🎑",right_anger_bubble:"🗯",ring:"💍",robot:"🤖",rocket:"🚀",rofl:"🤣",roll_eyes:"🙄",roller_coaster:"🎢",rooster:"🐓",rose:"🌹",rosette:"🏵",rotating_light:"🚨",round_pushpin:"📍",rowing_man:"🚣",rowing_woman:"🚣&zwj;♀️",rugby_football:"🏉",running_man:"🏃",running_shirt_with_sash:"🎽",running_woman:"🏃&zwj;♀️",sa:"🈂️",sagittarius:"♐️",sake:"🍶",sandal:"👡",santa:"🎅",satellite:"📡",saxophone:"🎷",school:"🏫",school_satchel:"🎒",scissors:"✂️",scorpion:"🦂",scorpius:"♏️",scream:"😱",scream_cat:"🙀",scroll:"📜",seat:"💺",secret:"㊙️",see_no_evil:"🙈",seedling:"🌱",selfie:"🤳",shallow_pan_of_food:"🥘",shamrock:"☘️",shark:"🦈",shaved_ice:"🍧",sheep:"🐑",shell:"🐚",shield:"🛡",shinto_shrine:"⛩",ship:"🚢",shirt:"👕",shopping:"🛍",shopping_cart:"🛒",shower:"🚿",shrimp:"🦐",signal_strength:"📶",six_pointed_star:"🔯",ski:"🎿",skier:"⛷",skull:"💀",skull_and_crossbones:"☠️",sleeping:"😴",sleeping_bed:"🛌",sleepy:"😪",slightly_frowning_face:"🙁",slightly_smiling_face:"🙂",slot_machine:"🎰",small_airplane:"🛩",small_blue_diamond:"🔹",small_orange_diamond:"🔸",small_red_triangle:"🔺",small_red_triangle_down:"🔻",smile:"😄",smile_cat:"😸",smiley:"😃",smiley_cat:"😺",smiling_imp:"😈",smirk:"😏",smirk_cat:"😼",smoking:"🚬",snail:"🐌",snake:"🐍",sneezing_face:"🤧",snowboarder:"🏂",snowflake:"❄️",snowman:"⛄️",snowman_with_snow:"☃️",sob:"😭",soccer:"⚽️",soon:"🔜",sos:"🆘",sound:"🔉",space_invader:"👾",spades:"♠️",spaghetti:"🍝",sparkle:"❇️",sparkler:"🎇",sparkles:"✨",sparkling_heart:"💖",speak_no_evil:"🙊",speaker:"🔈",speaking_head:"🗣",speech_balloon:"💬",speedboat:"🚤",spider:"🕷",spider_web:"🕸",spiral_calendar:"🗓",spiral_notepad:"🗒",spoon:"🥄",squid:"🦑",stadium:"🏟",star:"⭐️",star2:"🌟",star_and_crescent:"☪️",star_of_david:"✡️",stars:"🌠",station:"🚉",statue_of_liberty:"🗽",steam_locomotive:"🚂",stew:"🍲",stop_button:"⏹",stop_sign:"🛑",stopwatch:"⏱",straight_ruler:"📏",strawberry:"🍓",stuck_out_tongue:"😛",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue_winking_eye:"😜",studio_microphone:"🎙",stuffed_flatbread:"🥙",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",sun_behind_small_cloud:"🌤",sun_with_face:"🌞",sunflower:"🌻",sunglasses:"😎",sunny:"☀️",sunrise:"🌅",sunrise_over_mountains:"🌄",surfing_man:"🏄",surfing_woman:"🏄&zwj;♀️",sushi:"🍣",suspension_railway:"🚟",sweat:"😓",sweat_drops:"💦",sweat_smile:"😅",sweet_potato:"🍠",swimming_man:"🏊",swimming_woman:"🏊&zwj;♀️",symbols:"🔣",synagogue:"🕍",syringe:"💉",taco:"🌮",tada:"🎉",tanabata_tree:"🎋",taurus:"♉️",taxi:"🚕",tea:"🍵",telephone_receiver:"📞",telescope:"🔭",tennis:"🎾",tent:"⛺️",thermometer:"🌡",thinking:"🤔",thought_balloon:"💭",ticket:"🎫",tickets:"🎟",tiger:"🐯",tiger2:"🐅",timer_clock:"⏲",tipping_hand_man:"💁&zwj;♂️",tired_face:"😫",tm:"™️",toilet:"🚽",tokyo_tower:"🗼",tomato:"🍅",tongue:"👅",top:"🔝",tophat:"🎩",tornado:"🌪",trackball:"🖲",tractor:"🚜",traffic_light:"🚥",train:"🚋",train2:"🚆",tram:"🚊",triangular_flag_on_post:"🚩",triangular_ruler:"📐",trident:"🔱",triumph:"😤",trolleybus:"🚎",trophy:"🏆",tropical_drink:"🍹",tropical_fish:"🐠",truck:"🚚",trumpet:"🎺",tulip:"🌷",tumbler_glass:"🥃",turkey:"🦃",turtle:"🐢",tv:"📺",twisted_rightwards_arrows:"🔀",two_hearts:"💕",two_men_holding_hands:"👬",two_women_holding_hands:"👭",u5272:"🈹",u5408:"🈴",u55b6:"🈺",u6307:"🈯️",u6708:"🈷️",u6709:"🈶",u6e80:"🈵",u7121:"🈚️",u7533:"🈸",u7981:"🈲",u7a7a:"🈳",umbrella:"☔️",unamused:"😒",underage:"🔞",unicorn:"🦄",unlock:"🔓",up:"🆙",upside_down_face:"🙃",v:"✌️",vertical_traffic_light:"🚦",vhs:"📼",vibration_mode:"📳",video_camera:"📹",video_game:"🎮",violin:"🎻",virgo:"♍️",volcano:"🌋",volleyball:"🏐",vs:"🆚",vulcan_salute:"🖖",walking_man:"🚶",walking_woman:"🚶&zwj;♀️",waning_crescent_moon:"🌘",waning_gibbous_moon:"🌖",warning:"⚠️",wastebasket:"🗑",watch:"⌚️",water_buffalo:"🐃",watermelon:"🍉",wave:"👋",wavy_dash:"〰️",waxing_crescent_moon:"🌒",wc:"🚾",weary:"😩",wedding:"💒",weight_lifting_man:"🏋️",weight_lifting_woman:"🏋️&zwj;♀️",whale:"🐳",whale2:"🐋",wheel_of_dharma:"☸️",wheelchair:"♿️",white_check_mark:"✅",white_circle:"⚪️",white_flag:"🏳️",white_flower:"💮",white_large_square:"⬜️",white_medium_small_square:"◽️",white_medium_square:"◻️",white_small_square:"▫️",white_square_button:"🔳",wilted_flower:"🥀",wind_chime:"🎐",wind_face:"🌬",wine_glass:"🍷",wink:"😉",wolf:"🐺",woman:"👩",woman_artist:"👩&zwj;🎨",woman_astronaut:"👩&zwj;🚀",woman_cartwheeling:"🤸&zwj;♀️",woman_cook:"👩&zwj;🍳",woman_facepalming:"🤦&zwj;♀️",woman_factory_worker:"👩&zwj;🏭",woman_farmer:"👩&zwj;🌾",woman_firefighter:"👩&zwj;🚒",woman_health_worker:"👩&zwj;⚕️",woman_judge:"👩&zwj;⚖️",woman_juggling:"🤹&zwj;♀️",woman_mechanic:"👩&zwj;🔧",woman_office_worker:"👩&zwj;💼",woman_pilot:"👩&zwj;✈️",woman_playing_handball:"🤾&zwj;♀️",woman_playing_water_polo:"🤽&zwj;♀️",woman_scientist:"👩&zwj;🔬",woman_shrugging:"🤷&zwj;♀️",woman_singer:"👩&zwj;🎤",woman_student:"👩&zwj;🎓",woman_teacher:"👩&zwj;🏫",woman_technologist:"👩&zwj;💻",woman_with_turban:"👳&zwj;♀️",womans_clothes:"👚",womans_hat:"👒",women_wrestling:"🤼&zwj;♀️",womens:"🚺",world_map:"🗺",worried:"😟",wrench:"🔧",writing_hand:"✍️",x:"❌",yellow_heart:"💛",yen:"💴",yin_yang:"☯️",yum:"😋",zap:"⚡️",zipper_mouth_face:"🤐",zzz:"💤",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(o){var c={},d=[],y=[],w={},x=u,k={parsed:{},raw:"",format:""};M();function M(){o=o||{};for(var h in i)i.hasOwnProperty(h)&&(c[h]=i[h]);if(typeof o=="object")for(var j in o)o.hasOwnProperty(j)&&(c[j]=o[j]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof o+" was passed instead.");c.extensions&&r.helper.forEach(c.extensions,z)}function z(h,j){if(j=j||null,r.helper.isString(h))if(h=r.helper.stdExtName(h),j=h,r.extensions[h]){console.warn("DEPRECATION WARNING: "+h+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),R(r.extensions[h],h);return}else if(!r.helper.isUndefined(a[h]))h=a[h];else throw Error('Extension "'+h+'" could not be loaded. It was either not found or is not a valid extension.');typeof h=="function"&&(h=h()),r.helper.isArray(h)||(h=[h]);var H=f(h,j);if(!H.valid)throw Error(H.error);for(var N=0;N<h.length;++N){switch(h[N].type){case"lang":d.push(h[N]);break;case"output":y.push(h[N]);break}if(h[N].hasOwnProperty("listeners"))for(var V in h[N].listeners)h[N].listeners.hasOwnProperty(V)&&b(V,h[N].listeners[V])}}function R(h,j){typeof h=="function"&&(h=h(new r.Converter)),r.helper.isArray(h)||(h=[h]);var H=f(h,j);if(!H.valid)throw Error(H.error);for(var N=0;N<h.length;++N)switch(h[N].type){case"lang":d.push(h[N]);break;case"output":y.push(h[N]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function b(h,j){if(!r.helper.isString(h))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof h+" given");if(typeof j!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof j+" given");w.hasOwnProperty(h)||(w[h]=[]),w[h].push(j)}function S(h){var j=h.match(/^\s*/)[0].length,H=new RegExp("^\\s{0,"+j+"}","gm");return h.replace(H,"")}this._dispatch=function(j,H,N,V){if(w.hasOwnProperty(j))for(var L=0;L<w[j].length;++L){var P=w[j][L](j,H,this,N,V);P&&typeof P<"u"&&(H=P)}return H},this.listen=function(h,j){return b(h,j),this},this.makeHtml=function(h){if(!h)return h;var j={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:d,outputModifiers:y,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return h=h.replace(/¨/g,"¨T"),h=h.replace(/\$/g,"¨D"),h=h.replace(/\r\n/g,`
`),h=h.replace(/\r/g,`
`),h=h.replace(/\u00A0/g,"&nbsp;"),c.smartIndentationFix&&(h=S(h)),h=`

`+h+`

`,h=r.subParser("detab")(h,c,j),h=h.replace(/^[ \t]+$/mg,""),r.helper.forEach(d,function(H){h=r.subParser("runExtension")(H,h,c,j)}),h=r.subParser("metadata")(h,c,j),h=r.subParser("hashPreCodeTags")(h,c,j),h=r.subParser("githubCodeBlocks")(h,c,j),h=r.subParser("hashHTMLBlocks")(h,c,j),h=r.subParser("hashCodeTags")(h,c,j),h=r.subParser("stripLinkDefinitions")(h,c,j),h=r.subParser("blockGamut")(h,c,j),h=r.subParser("unhashHTMLSpans")(h,c,j),h=r.subParser("unescapeSpecialChars")(h,c,j),h=h.replace(/¨D/g,"$$"),h=h.replace(/¨T/g,"¨"),h=r.subParser("completeHTMLDocument")(h,c,j),r.helper.forEach(y,function(H){h=r.subParser("runExtension")(H,h,c,j)}),k=j.metadata,h},this.makeMarkdown=this.makeMd=function(h,j){if(h=h.replace(/\r\n/g,`
`),h=h.replace(/\r/g,`
`),h=h.replace(/>[ \t]+</,">¨NBSP;<"),!j)if(window&&window.document)j=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var H=j.createElement("div");H.innerHTML=h;var N={preList:F(H)};O(H);for(var V=H.childNodes,L="",P=0;P<V.length;P++)L+=r.subParser("makeMarkdown.node")(V[P],N);function O(G){for(var ee=0;ee<G.childNodes.length;++ee){var K=G.childNodes[ee];K.nodeType===3?!/\S/.test(K.nodeValue)&&!/^[ ]+$/.test(K.nodeValue)?(G.removeChild(K),--ee):(K.nodeValue=K.nodeValue.split(`
`).join(" "),K.nodeValue=K.nodeValue.replace(/(\s)+/g,"$1")):K.nodeType===1&&O(K)}}function F(G){for(var ee=G.querySelectorAll("pre"),K=[],q=0;q<ee.length;++q)if(ee[q].childElementCount===1&&ee[q].firstChild.tagName.toLowerCase()==="code"){var re=ee[q].firstChild.innerHTML.trim(),te=ee[q].firstChild.getAttribute("data-language")||"";if(te==="")for(var fe=ee[q].firstChild.className.split(" "),ke=0;ke<fe.length;++ke){var Me=fe[ke].match(/^language-(.+)$/);if(Me!==null){te=Me[1];break}}re=r.helper.unescapeHTMLEntities(re),K.push(re),ee[q].outerHTML='<precode language="'+te+'" precodenum="'+q.toString()+'"></precode>'}else K.push(ee[q].innerHTML),ee[q].innerHTML="",ee[q].setAttribute("prenum",q.toString());return K}return L},this.setOption=function(h,j){c[h]=j},this.getOption=function(h){return c[h]},this.getOptions=function(){return c},this.addExtension=function(h,j){j=j||null,z(h,j)},this.useExtension=function(h){z(h)},this.setFlavor=function(h){if(!l.hasOwnProperty(h))throw Error(h+" flavor was not found");var j=l[h];x=h;for(var H in j)j.hasOwnProperty(H)&&(c[H]=j[H])},this.getFlavor=function(){return x},this.removeExtension=function(h){r.helper.isArray(h)||(h=[h]);for(var j=0;j<h.length;++j){for(var H=h[j],N=0;N<d.length;++N)d[N]===H&&d.splice(N,1);for(var V=0;V<y.length;++V)y[V]===H&&y.splice(V,1)}},this.getAllExtensions=function(){return{language:d,output:y}},this.getMetadata=function(h){return h?k.raw:k.parsed},this.getMetadataFormat=function(){return k.format},this._setMetadataPair=function(h,j){k.parsed[h]=j},this._setMetadataFormat=function(h){k.format=h},this._setMetadataRaw=function(h){k.raw=h}},r.subParser("anchors",function(o,c,d){o=d.converter._dispatch("anchors.before",o,c,d);var y=function(w,x,k,M,z,R,b){if(r.helper.isUndefined(b)&&(b=""),k=k.toLowerCase(),w.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)M="";else if(!M)if(k||(k=x.toLowerCase().replace(/ ?\n/g," ")),M="#"+k,!r.helper.isUndefined(d.gUrls[k]))M=d.gUrls[k],r.helper.isUndefined(d.gTitles[k])||(b=d.gTitles[k]);else return w;M=M.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var S='<a href="'+M+'"';return b!==""&&b!==null&&(b=b.replace(/"/g,"&quot;"),b=b.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),S+=' title="'+b+'"'),c.openLinksInNewWindow&&!/^#/.test(M)&&(S+=' rel="noopener noreferrer" target="¨E95Eblank"'),S+=">"+x+"</a>",S};return o=o.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,y),o=o.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,y),o=o.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,y),o=o.replace(/\[([^\[\]]+)]()()()()()/g,y),c.ghMentions&&(o=o.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(w,x,k,M,z){if(k==="\\")return x+M;if(!r.helper.isString(c.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var R=c.ghMentionsLink.replace(/\{u}/g,z),b="";return c.openLinksInNewWindow&&(b=' rel="noopener noreferrer" target="¨E95Eblank"'),x+'<a href="'+R+'"'+b+">"+M+"</a>"})),o=d.converter._dispatch("anchors.after",o,c,d),o});var v=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,_=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,I=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,A=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,T=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,C=function(o){return function(c,d,y,w,x,k,M){y=y.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var z=y,R="",b="",S=d||"",h=M||"";return/^www\./i.test(y)&&(y=y.replace(/^www\./i,"http://www.")),o.excludeTrailingPunctuationFromURLs&&k&&(R=k),o.openLinksInNewWindow&&(b=' rel="noopener noreferrer" target="¨E95Eblank"'),S+'<a href="'+y+'"'+b+">"+z+"</a>"+R+h}},D=function(o,c){return function(d,y,w){var x="mailto:";return y=y||"",w=r.subParser("unescapeSpecialChars")(w,o,c),o.encodeEmails?(x=r.helper.encodeEmailAddress(x+w),w=r.helper.encodeEmailAddress(w)):x=x+w,y+'<a href="'+x+'">'+w+"</a>"}};r.subParser("autoLinks",function(o,c,d){return o=d.converter._dispatch("autoLinks.before",o,c,d),o=o.replace(I,C(c)),o=o.replace(T,D(c,d)),o=d.converter._dispatch("autoLinks.after",o,c,d),o}),r.subParser("simplifiedAutoLinks",function(o,c,d){return c.simplifiedAutoLink&&(o=d.converter._dispatch("simplifiedAutoLinks.before",o,c,d),c.excludeTrailingPunctuationFromURLs?o=o.replace(_,C(c)):o=o.replace(v,C(c)),o=o.replace(A,D(c,d)),o=d.converter._dispatch("simplifiedAutoLinks.after",o,c,d)),o}),r.subParser("blockGamut",function(o,c,d){return o=d.converter._dispatch("blockGamut.before",o,c,d),o=r.subParser("blockQuotes")(o,c,d),o=r.subParser("headers")(o,c,d),o=r.subParser("horizontalRule")(o,c,d),o=r.subParser("lists")(o,c,d),o=r.subParser("codeBlocks")(o,c,d),o=r.subParser("tables")(o,c,d),o=r.subParser("hashHTMLBlocks")(o,c,d),o=r.subParser("paragraphs")(o,c,d),o=d.converter._dispatch("blockGamut.after",o,c,d),o}),r.subParser("blockQuotes",function(o,c,d){o=d.converter._dispatch("blockQuotes.before",o,c,d),o=o+`

`;var y=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return c.splitAdjacentBlockquotes&&(y=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),o=o.replace(y,function(w){return w=w.replace(/^[ \t]*>[ \t]?/gm,""),w=w.replace(/¨0/g,""),w=w.replace(/^[ \t]+$/gm,""),w=r.subParser("githubCodeBlocks")(w,c,d),w=r.subParser("blockGamut")(w,c,d),w=w.replace(/(^|\n)/g,"$1  "),w=w.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(x,k){var M=k;return M=M.replace(/^  /mg,"¨0"),M=M.replace(/¨0/g,""),M}),r.subParser("hashBlock")(`<blockquote>
`+w+`
</blockquote>`,c,d)}),o=d.converter._dispatch("blockQuotes.after",o,c,d),o}),r.subParser("codeBlocks",function(o,c,d){o=d.converter._dispatch("codeBlocks.before",o,c,d),o+="¨0";var y=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g;return o=o.replace(y,function(w,x,k){var M=x,z=k,R=`
`;return M=r.subParser("outdent")(M,c,d),M=r.subParser("encodeCode")(M,c,d),M=r.subParser("detab")(M,c,d),M=M.replace(/^\n+/g,""),M=M.replace(/\n+$/g,""),c.omitExtraWLInCodeBlocks&&(R=""),M="<pre><code>"+M+R+"</code></pre>",r.subParser("hashBlock")(M,c,d)+z}),o=o.replace(/¨0/,""),o=d.converter._dispatch("codeBlocks.after",o,c,d),o}),r.subParser("codeSpans",function(o,c,d){return o=d.converter._dispatch("codeSpans.before",o,c,d),typeof o>"u"&&(o=""),o=o.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(y,w,x,k){var M=k;return M=M.replace(/^([ \t]*)/g,""),M=M.replace(/[ \t]*$/g,""),M=r.subParser("encodeCode")(M,c,d),M=w+"<code>"+M+"</code>",M=r.subParser("hashHTMLSpans")(M,c,d),M}),o=d.converter._dispatch("codeSpans.after",o,c,d),o}),r.subParser("completeHTMLDocument",function(o,c,d){if(!c.completeHTMLDocument)return o;o=d.converter._dispatch("completeHTMLDocument.before",o,c,d);var y="html",w=`<!DOCTYPE HTML>
`,x="",k=`<meta charset="utf-8">
`,M="",z="";typeof d.metadata.parsed.doctype<"u"&&(w="<!DOCTYPE "+d.metadata.parsed.doctype+`>
`,y=d.metadata.parsed.doctype.toString().toLowerCase(),(y==="html"||y==="html5")&&(k='<meta charset="utf-8">'));for(var R in d.metadata.parsed)if(d.metadata.parsed.hasOwnProperty(R))switch(R.toLowerCase()){case"doctype":break;case"title":x="<title>"+d.metadata.parsed.title+`</title>
`;break;case"charset":y==="html"||y==="html5"?k='<meta charset="'+d.metadata.parsed.charset+`">
`:k='<meta name="charset" content="'+d.metadata.parsed.charset+`">
`;break;case"language":case"lang":M=' lang="'+d.metadata.parsed[R]+'"',z+='<meta name="'+R+'" content="'+d.metadata.parsed[R]+`">
`;break;default:z+='<meta name="'+R+'" content="'+d.metadata.parsed[R]+`">
`}return o=w+"<html"+M+`>
<head>
`+x+k+z+`</head>
<body>
`+o.trim()+`
</body>
</html>`,o=d.converter._dispatch("completeHTMLDocument.after",o,c,d),o}),r.subParser("detab",function(o,c,d){return o=d.converter._dispatch("detab.before",o,c,d),o=o.replace(/\t(?=\t)/g,"    "),o=o.replace(/\t/g,"¨A¨B"),o=o.replace(/¨B(.+?)¨A/g,function(y,w){for(var x=w,k=4-x.length%4,M=0;M<k;M++)x+=" ";return x}),o=o.replace(/¨A/g,"    "),o=o.replace(/¨B/g,""),o=d.converter._dispatch("detab.after",o,c,d),o}),r.subParser("ellipsis",function(o,c,d){return c.ellipsis&&(o=d.converter._dispatch("ellipsis.before",o,c,d),o=o.replace(/\.\.\./g,"…"),o=d.converter._dispatch("ellipsis.after",o,c,d)),o}),r.subParser("emoji",function(o,c,d){if(!c.emoji)return o;o=d.converter._dispatch("emoji.before",o,c,d);var y=/:([\S]+?):/g;return o=o.replace(y,function(w,x){return r.helper.emojis.hasOwnProperty(x)?r.helper.emojis[x]:w}),o=d.converter._dispatch("emoji.after",o,c,d),o}),r.subParser("encodeAmpsAndAngles",function(o,c,d){return o=d.converter._dispatch("encodeAmpsAndAngles.before",o,c,d),o=o.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),o=o.replace(/<(?![a-z\/?$!])/gi,"&lt;"),o=o.replace(/</g,"&lt;"),o=o.replace(/>/g,"&gt;"),o=d.converter._dispatch("encodeAmpsAndAngles.after",o,c,d),o}),r.subParser("encodeBackslashEscapes",function(o,c,d){return o=d.converter._dispatch("encodeBackslashEscapes.before",o,c,d),o=o.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),o=o.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),o=d.converter._dispatch("encodeBackslashEscapes.after",o,c,d),o}),r.subParser("encodeCode",function(o,c,d){return o=d.converter._dispatch("encodeCode.before",o,c,d),o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),o=d.converter._dispatch("encodeCode.after",o,c,d),o}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(o,c,d){o=d.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",o,c,d);var y=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,w=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return o=o.replace(y,function(x){return x.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),o=o.replace(w,function(x){return x.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),o=d.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",o,c,d),o}),r.subParser("githubCodeBlocks",function(o,c,d){return c.ghCodeBlocks?(o=d.converter._dispatch("githubCodeBlocks.before",o,c,d),o+="¨0",o=o.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(y,w,x,k){var M=c.omitExtraWLInCodeBlocks?"":`
`;return k=r.subParser("encodeCode")(k,c,d),k=r.subParser("detab")(k,c,d),k=k.replace(/^\n+/g,""),k=k.replace(/\n+$/g,""),k="<pre><code"+(x?' class="'+x+" language-"+x+'"':"")+">"+k+M+"</code></pre>",k=r.subParser("hashBlock")(k,c,d),`

¨G`+(d.ghCodeBlocks.push({text:y,codeblock:k})-1)+`G

`}),o=o.replace(/¨0/,""),d.converter._dispatch("githubCodeBlocks.after",o,c,d)):o}),r.subParser("hashBlock",function(o,c,d){return o=d.converter._dispatch("hashBlock.before",o,c,d),o=o.replace(/(^\n+|\n+$)/g,""),o=`

¨K`+(d.gHtmlBlocks.push(o)-1)+`K

`,o=d.converter._dispatch("hashBlock.after",o,c,d),o}),r.subParser("hashCodeTags",function(o,c,d){o=d.converter._dispatch("hashCodeTags.before",o,c,d);var y=function(w,x,k,M){var z=k+r.subParser("encodeCode")(x,c,d)+M;return"¨C"+(d.gHtmlSpans.push(z)-1)+"C"};return o=r.helper.replaceRecursiveRegExp(o,y,"<code\\b[^>]*>","</code>","gim"),o=d.converter._dispatch("hashCodeTags.after",o,c,d),o}),r.subParser("hashElement",function(o,c,d){return function(y,w){var x=w;return x=x.replace(/\n\n/g,`
`),x=x.replace(/^\n/,""),x=x.replace(/\n+$/g,""),x=`

¨K`+(d.gHtmlBlocks.push(x)-1)+`K

`,x}}),r.subParser("hashHTMLBlocks",function(o,c,d){o=d.converter._dispatch("hashHTMLBlocks.before",o,c,d);var y=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],w=function(h,j,H,N){var V=h;return H.search(/\bmarkdown\b/)!==-1&&(V=H+d.converter.makeHtml(j)+N),`

¨K`+(d.gHtmlBlocks.push(V)-1)+`K

`};c.backslashEscapesHTMLTags&&(o=o.replace(/\\<(\/?[^>]+?)>/g,function(h,j){return"&lt;"+j+"&gt;"}));for(var x=0;x<y.length;++x)for(var k,M=new RegExp("^ {0,3}(<"+y[x]+"\\b[^>]*>)","im"),z="<"+y[x]+"\\b[^>]*>",R="</"+y[x]+">";(k=r.helper.regexIndexOf(o,M))!==-1;){var b=r.helper.splitAtIndex(o,k),S=r.helper.replaceRecursiveRegExp(b[1],w,z,R,"im");if(S===b[1])break;o=b[0].concat(S)}return o=o.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(o,c,d)),o=r.helper.replaceRecursiveRegExp(o,function(h){return`

¨K`+(d.gHtmlBlocks.push(h)-1)+`K

`},"^ {0,3}<!--","-->","gm"),o=o.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(o,c,d)),o=d.converter._dispatch("hashHTMLBlocks.after",o,c,d),o}),r.subParser("hashHTMLSpans",function(o,c,d){o=d.converter._dispatch("hashHTMLSpans.before",o,c,d);function y(w){return"¨C"+(d.gHtmlSpans.push(w)-1)+"C"}return o=o.replace(/<[^>]+?\/>/gi,function(w){return y(w)}),o=o.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(w){return y(w)}),o=o.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(w){return y(w)}),o=o.replace(/<[^>]+?>/gi,function(w){return y(w)}),o=d.converter._dispatch("hashHTMLSpans.after",o,c,d),o}),r.subParser("unhashHTMLSpans",function(o,c,d){o=d.converter._dispatch("unhashHTMLSpans.before",o,c,d);for(var y=0;y<d.gHtmlSpans.length;++y){for(var w=d.gHtmlSpans[y],x=0;/¨C(\d+)C/.test(w);){var k=RegExp.$1;if(w=w.replace("¨C"+k+"C",d.gHtmlSpans[k]),x===10){console.error("maximum nesting of 10 spans reached!!!");break}++x}o=o.replace("¨C"+y+"C",w)}return o=d.converter._dispatch("unhashHTMLSpans.after",o,c,d),o}),r.subParser("hashPreCodeTags",function(o,c,d){o=d.converter._dispatch("hashPreCodeTags.before",o,c,d);var y=function(w,x,k,M){var z=k+r.subParser("encodeCode")(x,c,d)+M;return`

¨G`+(d.ghCodeBlocks.push({text:w,codeblock:z})-1)+`G

`};return o=r.helper.replaceRecursiveRegExp(o,y,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),o=d.converter._dispatch("hashPreCodeTags.after",o,c,d),o}),r.subParser("headers",function(o,c,d){o=d.converter._dispatch("headers.before",o,c,d);var y=isNaN(parseInt(c.headerLevelStart))?1:parseInt(c.headerLevelStart),w=c.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,x=c.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;o=o.replace(w,function(z,R){var b=r.subParser("spanGamut")(R,c,d),S=c.noHeaderId?"":' id="'+M(R)+'"',h=y,j="<h"+h+S+">"+b+"</h"+h+">";return r.subParser("hashBlock")(j,c,d)}),o=o.replace(x,function(z,R){var b=r.subParser("spanGamut")(R,c,d),S=c.noHeaderId?"":' id="'+M(R)+'"',h=y+1,j="<h"+h+S+">"+b+"</h"+h+">";return r.subParser("hashBlock")(j,c,d)});var k=c.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;o=o.replace(k,function(z,R,b){var S=b;c.customizedHeaderId&&(S=b.replace(/\s?\{([^{]+?)}\s*$/,""));var h=r.subParser("spanGamut")(S,c,d),j=c.noHeaderId?"":' id="'+M(b)+'"',H=y-1+R.length,N="<h"+H+j+">"+h+"</h"+H+">";return r.subParser("hashBlock")(N,c,d)});function M(z){var R,b;if(c.customizedHeaderId){var S=z.match(/\{([^{]+?)}\s*$/);S&&S[1]&&(z=S[1])}return R=z,r.helper.isString(c.prefixHeaderId)?b=c.prefixHeaderId:c.prefixHeaderId===!0?b="section-":b="",c.rawPrefixHeaderId||(R=b+R),c.ghCompatibleHeaderId?R=R.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():c.rawHeaderId?R=R.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"¨").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():R=R.replace(/[^\w]/g,"").toLowerCase(),c.rawPrefixHeaderId&&(R=b+R),d.hashLinkCounts[R]?R=R+"-"+d.hashLinkCounts[R]++:d.hashLinkCounts[R]=1,R}return o=d.converter._dispatch("headers.after",o,c,d),o}),r.subParser("horizontalRule",function(o,c,d){o=d.converter._dispatch("horizontalRule.before",o,c,d);var y=r.subParser("hashBlock")("<hr />",c,d);return o=o.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,y),o=o.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,y),o=o.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,y),o=d.converter._dispatch("horizontalRule.after",o,c,d),o}),r.subParser("images",function(o,c,d){o=d.converter._dispatch("images.before",o,c,d);var y=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,w=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,x=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,k=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,M=/!\[([^\[\]]+)]()()()()()/g;function z(b,S,h,j,H,N,V,L){return j=j.replace(/\s/g,""),R(b,S,h,j,H,N,V,L)}function R(b,S,h,j,H,N,V,L){var P=d.gUrls,O=d.gTitles,F=d.gDimensions;if(h=h.toLowerCase(),L||(L=""),b.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)j="";else if(j===""||j===null)if((h===""||h===null)&&(h=S.toLowerCase().replace(/ ?\n/g," ")),j="#"+h,!r.helper.isUndefined(P[h]))j=P[h],r.helper.isUndefined(O[h])||(L=O[h]),r.helper.isUndefined(F[h])||(H=F[h].width,N=F[h].height);else return b;S=S.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),j=j.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var G='<img src="'+j+'" alt="'+S+'"';return L&&r.helper.isString(L)&&(L=L.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),G+=' title="'+L+'"'),H&&N&&(H=H==="*"?"auto":H,N=N==="*"?"auto":N,G+=' width="'+H+'"',G+=' height="'+N+'"'),G+=" />",G}return o=o.replace(k,R),o=o.replace(x,z),o=o.replace(w,R),o=o.replace(y,R),o=o.replace(M,R),o=d.converter._dispatch("images.after",o,c,d),o}),r.subParser("italicsAndBold",function(o,c,d){o=d.converter._dispatch("italicsAndBold.before",o,c,d);function y(w,x,k){return x+w+k}return c.literalMidWordUnderscores?(o=o.replace(/\b___(\S[\s\S]*?)___\b/g,function(w,x){return y(x,"<strong><em>","</em></strong>")}),o=o.replace(/\b__(\S[\s\S]*?)__\b/g,function(w,x){return y(x,"<strong>","</strong>")}),o=o.replace(/\b_(\S[\s\S]*?)_\b/g,function(w,x){return y(x,"<em>","</em>")})):(o=o.replace(/___(\S[\s\S]*?)___/g,function(w,x){return/\S$/.test(x)?y(x,"<strong><em>","</em></strong>"):w}),o=o.replace(/__(\S[\s\S]*?)__/g,function(w,x){return/\S$/.test(x)?y(x,"<strong>","</strong>"):w}),o=o.replace(/_([^\s_][\s\S]*?)_/g,function(w,x){return/\S$/.test(x)?y(x,"<em>","</em>"):w})),c.literalMidWordAsterisks?(o=o.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(w,x,k){return y(k,x+"<strong><em>","</em></strong>")}),o=o.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(w,x,k){return y(k,x+"<strong>","</strong>")}),o=o.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(w,x,k){return y(k,x+"<em>","</em>")})):(o=o.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(w,x){return/\S$/.test(x)?y(x,"<strong><em>","</em></strong>"):w}),o=o.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(w,x){return/\S$/.test(x)?y(x,"<strong>","</strong>"):w}),o=o.replace(/\*([^\s*][\s\S]*?)\*/g,function(w,x){return/\S$/.test(x)?y(x,"<em>","</em>"):w})),o=d.converter._dispatch("italicsAndBold.after",o,c,d),o}),r.subParser("lists",function(o,c,d){function y(k,M){d.gListLevel++,k=k.replace(/\n{2,}$/,`
`),k+="¨0";var z=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,R=/\n[ \t]*\n(?!¨0)/.test(k);return c.disableForced4SpacesIndentedSublists&&(z=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),k=k.replace(z,function(b,S,h,j,H,N,V){V=V&&V.trim()!=="";var L=r.subParser("outdent")(H,c,d),P="";return N&&c.tasklists&&(P=' class="task-list-item" style="list-style-type: none;"',L=L.replace(/^[ \t]*\[(x|X| )?]/m,function(){var O='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return V&&(O+=" checked"),O+=">",O})),L=L.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(O){return"¨A"+O}),S||L.search(/\n{2,}/)>-1?(L=r.subParser("githubCodeBlocks")(L,c,d),L=r.subParser("blockGamut")(L,c,d)):(L=r.subParser("lists")(L,c,d),L=L.replace(/\n$/,""),L=r.subParser("hashHTMLBlocks")(L,c,d),L=L.replace(/\n\n+/g,`

`),R?L=r.subParser("paragraphs")(L,c,d):L=r.subParser("spanGamut")(L,c,d)),L=L.replace("¨A",""),L="<li"+P+">"+L+`</li>
`,L}),k=k.replace(/¨0/g,""),d.gListLevel--,M&&(k=k.replace(/\s+$/,"")),k}function w(k,M){if(M==="ol"){var z=k.match(/^ *(\d+)\./);if(z&&z[1]!=="1")return' start="'+z[1]+'"'}return""}function x(k,M,z){var R=c.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,b=c.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,S=M==="ul"?R:b,h="";if(k.search(S)!==-1)(function H(N){var V=N.search(S),L=w(k,M);V!==-1?(h+=`

<`+M+L+`>
`+y(N.slice(0,V),!!z)+"</"+M+`>
`,M=M==="ul"?"ol":"ul",S=M==="ul"?R:b,H(N.slice(V))):h+=`

<`+M+L+`>
`+y(N,!!z)+"</"+M+`>
`})(k);else{var j=w(k,M);h=`

<`+M+j+`>
`+y(k,!!z)+"</"+M+`>
`}return h}return o=d.converter._dispatch("lists.before",o,c,d),o+="¨0",d.gListLevel?o=o.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(k,M,z){var R=z.search(/[*+-]/g)>-1?"ul":"ol";return x(M,R,!0)}):o=o.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(k,M,z,R){var b=R.search(/[*+-]/g)>-1?"ul":"ol";return x(z,b,!1)}),o=o.replace(/¨0/,""),o=d.converter._dispatch("lists.after",o,c,d),o}),r.subParser("metadata",function(o,c,d){if(!c.metadata)return o;o=d.converter._dispatch("metadata.before",o,c,d);function y(w){d.metadata.raw=w,w=w.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),w=w.replace(/\n {4}/g," "),w.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(x,k,M){return d.metadata.parsed[k]=M,""})}return o=o.replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,function(w,x,k){return y(k),"¨M"}),o=o.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(w,x,k){return x&&(d.metadata.format=x),y(k),"¨M"}),o=o.replace(/¨M/g,""),o=d.converter._dispatch("metadata.after",o,c,d),o}),r.subParser("outdent",function(o,c,d){return o=d.converter._dispatch("outdent.before",o,c,d),o=o.replace(/^(\t|[ ]{1,4})/gm,"¨0"),o=o.replace(/¨0/g,""),o=d.converter._dispatch("outdent.after",o,c,d),o}),r.subParser("paragraphs",function(o,c,d){o=d.converter._dispatch("paragraphs.before",o,c,d),o=o.replace(/^\n+/g,""),o=o.replace(/\n+$/g,"");for(var y=o.split(/\n{2,}/g),w=[],x=y.length,k=0;k<x;k++){var M=y[k];M.search(/¨(K|G)(\d+)\1/g)>=0?w.push(M):M.search(/\S/)>=0&&(M=r.subParser("spanGamut")(M,c,d),M=M.replace(/^([ \t]*)/g,"<p>"),M+="</p>",w.push(M))}for(x=w.length,k=0;k<x;k++){for(var z="",R=w[k],b=!1;/¨(K|G)(\d+)\1/.test(R);){var S=RegExp.$1,h=RegExp.$2;S==="K"?z=d.gHtmlBlocks[h]:b?z=r.subParser("encodeCode")(d.ghCodeBlocks[h].text,c,d):z=d.ghCodeBlocks[h].codeblock,z=z.replace(/\$/g,"$$$$"),R=R.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,z),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(R)&&(b=!0)}w[k]=R}return o=w.join(`
`),o=o.replace(/^\n+/g,""),o=o.replace(/\n+$/g,""),d.converter._dispatch("paragraphs.after",o,c,d)}),r.subParser("runExtension",function(o,c,d,y){if(o.filter)c=o.filter(c,y.converter,d);else if(o.regex){var w=o.regex;w instanceof RegExp||(w=new RegExp(w,"g")),c=c.replace(w,o.replace)}return c}),r.subParser("spanGamut",function(o,c,d){return o=d.converter._dispatch("spanGamut.before",o,c,d),o=r.subParser("codeSpans")(o,c,d),o=r.subParser("escapeSpecialCharsWithinTagAttributes")(o,c,d),o=r.subParser("encodeBackslashEscapes")(o,c,d),o=r.subParser("images")(o,c,d),o=r.subParser("anchors")(o,c,d),o=r.subParser("autoLinks")(o,c,d),o=r.subParser("simplifiedAutoLinks")(o,c,d),o=r.subParser("emoji")(o,c,d),o=r.subParser("underline")(o,c,d),o=r.subParser("italicsAndBold")(o,c,d),o=r.subParser("strikethrough")(o,c,d),o=r.subParser("ellipsis")(o,c,d),o=r.subParser("hashHTMLSpans")(o,c,d),o=r.subParser("encodeAmpsAndAngles")(o,c,d),c.simpleLineBreaks?/\n\n¨K/.test(o)||(o=o.replace(/\n+/g,`<br />
`)):o=o.replace(/  +\n/g,`<br />
`),o=d.converter._dispatch("spanGamut.after",o,c,d),o}),r.subParser("strikethrough",function(o,c,d){function y(w){return c.simplifiedAutoLink&&(w=r.subParser("simplifiedAutoLinks")(w,c,d)),"<del>"+w+"</del>"}return c.strikethrough&&(o=d.converter._dispatch("strikethrough.before",o,c,d),o=o.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(w,x){return y(x)}),o=d.converter._dispatch("strikethrough.after",o,c,d)),o}),r.subParser("stripLinkDefinitions",function(o,c,d){var y=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,w=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm;o+="¨0";var x=function(k,M,z,R,b,S,h){return M=M.toLowerCase(),o.toLowerCase().split(M).length-1<2?k:(z.match(/^data:.+?\/.+?;base64,/)?d.gUrls[M]=z.replace(/\s/g,""):d.gUrls[M]=r.subParser("encodeAmpsAndAngles")(z,c,d),S?S+h:(h&&(d.gTitles[M]=h.replace(/"|'/g,"&quot;")),c.parseImgDimensions&&R&&b&&(d.gDimensions[M]={width:R,height:b}),""))};return o=o.replace(w,x),o=o.replace(y,x),o=o.replace(/¨0/,""),o}),r.subParser("tables",function(o,c,d){if(!c.tables)return o;var y=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,w=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm;function x(b){return/^:[ \t]*--*$/.test(b)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(b)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(b)?' style="text-align:center;"':""}function k(b,S){var h="";return b=b.trim(),(c.tablesHeaderId||c.tableHeaderId)&&(h=' id="'+b.replace(/ /g,"_").toLowerCase()+'"'),b=r.subParser("spanGamut")(b,c,d),"<th"+h+S+">"+b+`</th>
`}function M(b,S){var h=r.subParser("spanGamut")(b,c,d);return"<td"+S+">"+h+`</td>
`}function z(b,S){for(var h=`<table>
<thead>
<tr>
`,j=b.length,H=0;H<j;++H)h+=b[H];for(h+=`</tr>
</thead>
<tbody>
`,H=0;H<S.length;++H){h+=`<tr>
`;for(var N=0;N<j;++N)h+=S[H][N];h+=`</tr>
`}return h+=`</tbody>
</table>
`,h}function R(b){var S,h=b.split(`
`);for(S=0;S<h.length;++S)/^ {0,3}\|/.test(h[S])&&(h[S]=h[S].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(h[S])&&(h[S]=h[S].replace(/\|[ \t]*$/,"")),h[S]=r.subParser("codeSpans")(h[S],c,d);var j=h[0].split("|").map(function(G){return G.trim()}),H=h[1].split("|").map(function(G){return G.trim()}),N=[],V=[],L=[],P=[];for(h.shift(),h.shift(),S=0;S<h.length;++S)h[S].trim()!==""&&N.push(h[S].split("|").map(function(G){return G.trim()}));if(j.length<H.length)return b;for(S=0;S<H.length;++S)L.push(x(H[S]));for(S=0;S<j.length;++S)r.helper.isUndefined(L[S])&&(L[S]=""),V.push(k(j[S],L[S]));for(S=0;S<N.length;++S){for(var O=[],F=0;F<V.length;++F)r.helper.isUndefined(N[S][F]),O.push(M(N[S][F],L[F]));P.push(O)}return z(V,P)}return o=d.converter._dispatch("tables.before",o,c,d),o=o.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),o=o.replace(y,R),o=o.replace(w,R),o=d.converter._dispatch("tables.after",o,c,d),o}),r.subParser("underline",function(o,c,d){return c.underline&&(o=d.converter._dispatch("underline.before",o,c,d),c.literalMidWordUnderscores?(o=o.replace(/\b___(\S[\s\S]*?)___\b/g,function(y,w){return"<u>"+w+"</u>"}),o=o.replace(/\b__(\S[\s\S]*?)__\b/g,function(y,w){return"<u>"+w+"</u>"})):(o=o.replace(/___(\S[\s\S]*?)___/g,function(y,w){return/\S$/.test(w)?"<u>"+w+"</u>":y}),o=o.replace(/__(\S[\s\S]*?)__/g,function(y,w){return/\S$/.test(w)?"<u>"+w+"</u>":y})),o=o.replace(/(_)/g,r.helper.escapeCharactersCallback),o=d.converter._dispatch("underline.after",o,c,d)),o}),r.subParser("unescapeSpecialChars",function(o,c,d){return o=d.converter._dispatch("unescapeSpecialChars.before",o,c,d),o=o.replace(/¨E(\d+)E/g,function(y,w){var x=parseInt(w);return String.fromCharCode(x)}),o=d.converter._dispatch("unescapeSpecialChars.after",o,c,d),o}),r.subParser("makeMarkdown.blockquote",function(o,c){var d="";if(o.hasChildNodes())for(var y=o.childNodes,w=y.length,x=0;x<w;++x){var k=r.subParser("makeMarkdown.node")(y[x],c);k!==""&&(d+=k)}return d=d.trim(),d="> "+d.split(`
`).join(`
> `),d}),r.subParser("makeMarkdown.codeBlock",function(o,c){var d=o.getAttribute("language"),y=o.getAttribute("precodenum");return"```"+d+`
`+c.preList[y]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(o){return"`"+o.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(o,c){var d="";if(o.hasChildNodes()){d+="*";for(var y=o.childNodes,w=y.length,x=0;x<w;++x)d+=r.subParser("makeMarkdown.node")(y[x],c);d+="*"}return d}),r.subParser("makeMarkdown.header",function(o,c,d){var y=new Array(d+1).join("#"),w="";if(o.hasChildNodes()){w=y+" ";for(var x=o.childNodes,k=x.length,M=0;M<k;++M)w+=r.subParser("makeMarkdown.node")(x[M],c)}return w}),r.subParser("makeMarkdown.hr",function(){return"---"}),r.subParser("makeMarkdown.image",function(o){var c="";return o.hasAttribute("src")&&(c+="!["+o.getAttribute("alt")+"](",c+="<"+o.getAttribute("src")+">",o.hasAttribute("width")&&o.hasAttribute("height")&&(c+=" ="+o.getAttribute("width")+"x"+o.getAttribute("height")),o.hasAttribute("title")&&(c+=' "'+o.getAttribute("title")+'"'),c+=")"),c}),r.subParser("makeMarkdown.links",function(o,c){var d="";if(o.hasChildNodes()&&o.hasAttribute("href")){var y=o.childNodes,w=y.length;d="[";for(var x=0;x<w;++x)d+=r.subParser("makeMarkdown.node")(y[x],c);d+="](",d+="<"+o.getAttribute("href")+">",o.hasAttribute("title")&&(d+=' "'+o.getAttribute("title")+'"'),d+=")"}return d}),r.subParser("makeMarkdown.list",function(o,c,d){var y="";if(!o.hasChildNodes())return"";for(var w=o.childNodes,x=w.length,k=o.getAttribute("start")||1,M=0;M<x;++M)if(!(typeof w[M].tagName>"u"||w[M].tagName.toLowerCase()!=="li")){var z="";d==="ol"?z=k.toString()+". ":z="- ",y+=z+r.subParser("makeMarkdown.listItem")(w[M],c),++k}return y+=`
<!-- -->
`,y.trim()}),r.subParser("makeMarkdown.listItem",function(o,c){for(var d="",y=o.childNodes,w=y.length,x=0;x<w;++x)d+=r.subParser("makeMarkdown.node")(y[x],c);return/\n$/.test(d)?d=d.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):d+=`
`,d}),r.subParser("makeMarkdown.node",function(o,c,d){d=d||!1;var y="";if(o.nodeType===3)return r.subParser("makeMarkdown.txt")(o,c);if(o.nodeType===8)return"<!--"+o.data+`-->

`;if(o.nodeType!==1)return"";var w=o.tagName.toLowerCase();switch(w){case"h1":d||(y=r.subParser("makeMarkdown.header")(o,c,1)+`

`);break;case"h2":d||(y=r.subParser("makeMarkdown.header")(o,c,2)+`

`);break;case"h3":d||(y=r.subParser("makeMarkdown.header")(o,c,3)+`

`);break;case"h4":d||(y=r.subParser("makeMarkdown.header")(o,c,4)+`

`);break;case"h5":d||(y=r.subParser("makeMarkdown.header")(o,c,5)+`

`);break;case"h6":d||(y=r.subParser("makeMarkdown.header")(o,c,6)+`

`);break;case"p":d||(y=r.subParser("makeMarkdown.paragraph")(o,c)+`

`);break;case"blockquote":d||(y=r.subParser("makeMarkdown.blockquote")(o,c)+`

`);break;case"hr":d||(y=r.subParser("makeMarkdown.hr")(o,c)+`

`);break;case"ol":d||(y=r.subParser("makeMarkdown.list")(o,c,"ol")+`

`);break;case"ul":d||(y=r.subParser("makeMarkdown.list")(o,c,"ul")+`

`);break;case"precode":d||(y=r.subParser("makeMarkdown.codeBlock")(o,c)+`

`);break;case"pre":d||(y=r.subParser("makeMarkdown.pre")(o,c)+`

`);break;case"table":d||(y=r.subParser("makeMarkdown.table")(o,c)+`

`);break;case"code":y=r.subParser("makeMarkdown.codeSpan")(o,c);break;case"em":case"i":y=r.subParser("makeMarkdown.emphasis")(o,c);break;case"strong":case"b":y=r.subParser("makeMarkdown.strong")(o,c);break;case"del":y=r.subParser("makeMarkdown.strikethrough")(o,c);break;case"a":y=r.subParser("makeMarkdown.links")(o,c);break;case"img":y=r.subParser("makeMarkdown.image")(o,c);break;default:y=o.outerHTML+`

`}return y}),r.subParser("makeMarkdown.paragraph",function(o,c){var d="";if(o.hasChildNodes())for(var y=o.childNodes,w=y.length,x=0;x<w;++x)d+=r.subParser("makeMarkdown.node")(y[x],c);return d=d.trim(),d}),r.subParser("makeMarkdown.pre",function(o,c){var d=o.getAttribute("prenum");return"<pre>"+c.preList[d]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(o,c){var d="";if(o.hasChildNodes()){d+="~~";for(var y=o.childNodes,w=y.length,x=0;x<w;++x)d+=r.subParser("makeMarkdown.node")(y[x],c);d+="~~"}return d}),r.subParser("makeMarkdown.strong",function(o,c){var d="";if(o.hasChildNodes()){d+="**";for(var y=o.childNodes,w=y.length,x=0;x<w;++x)d+=r.subParser("makeMarkdown.node")(y[x],c);d+="**"}return d}),r.subParser("makeMarkdown.table",function(o,c){var d="",y=[[],[]],w=o.querySelectorAll("thead>tr>th"),x=o.querySelectorAll("tbody>tr"),k,M;for(k=0;k<w.length;++k){var z=r.subParser("makeMarkdown.tableCell")(w[k],c),R="---";if(w[k].hasAttribute("style")){var b=w[k].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(b){case"text-align:left;":R=":---";break;case"text-align:right;":R="---:";break;case"text-align:center;":R=":---:";break}}y[0][k]=z.trim(),y[1][k]=R}for(k=0;k<x.length;++k){var S=y.push([])-1,h=x[k].getElementsByTagName("td");for(M=0;M<w.length;++M){var j=" ";typeof h[M]<"u"&&(j=r.subParser("makeMarkdown.tableCell")(h[M],c)),y[S].push(j)}}var H=3;for(k=0;k<y.length;++k)for(M=0;M<y[k].length;++M){var N=y[k][M].length;N>H&&(H=N)}for(k=0;k<y.length;++k){for(M=0;M<y[k].length;++M)k===1?y[k][M].slice(-1)===":"?y[k][M]=r.helper.padEnd(y[k][M].slice(-1),H-1,"-")+":":y[k][M]=r.helper.padEnd(y[k][M],H,"-"):y[k][M]=r.helper.padEnd(y[k][M],H);d+="| "+y[k].join(" | ")+` |
`}return d.trim()}),r.subParser("makeMarkdown.tableCell",function(o,c){var d="";if(!o.hasChildNodes())return"";for(var y=o.childNodes,w=y.length,x=0;x<w;++x)d+=r.subParser("makeMarkdown.node")(y[x],c,!0);return d.trim()}),r.subParser("makeMarkdown.txt",function(o){var c=o.nodeValue;return c=c.replace(/ +/g," "),c=c.replace(/¨NBSP;/g," "),c=r.helper.unescapeHTMLEntities(c),c=c.replace(/([*_~|`])/g,"\\$1"),c=c.replace(/^(\s*)>/g,"\\$1>"),c=c.replace(/^#/gm,"\\#"),c=c.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),c=c.replace(/^( {0,3}\d+)\./gm,"$1\\."),c=c.replace(/^( {0,3})([+-])/gm,"$1\\$2"),c=c.replace(/]([\s]*)\(/g,"\\]$1\\("),c=c.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),c});var $=this;e.exports?e.exports=r:$.showdown=r}).call(qu)})(uu);var ag=uu.exports;const ug=Gu(ag);var to={},dg=Cs;Object.defineProperty(to,"__esModule",{value:!0});var du=to.default=void 0,cg=dg(Es()),lg=p,fg=(0,cg.default)((0,lg.jsx)("path",{d:"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.9959.9959 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41l-2.33-2.35zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12-2.44 2.44z"}),"AutoFixHigh");du=to.default=fg;function hg(e){return typeof e=="string"}function pg(e,t,n){return e===void 0||hg(e)?t:ne({},t,{ownerState:ne({},t.ownerState,n)})}function ni(e,t,n=(r,s)=>r===s){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}const gg={disableDefaultClasses:!1},mg=E.createContext(gg);function no(e){const{disableDefaultClasses:t}=E.useContext(mg);return n=>t?"":e(n)}function on(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function yg(e,t,n){return typeof e=="function"?e(t,n):e}function bg(e){const{rootElementName:t=""}=e,[n,r]=E.useState(t.toUpperCase()),s=E.useCallback(a=>{var i;r((i=a==null?void 0:a.tagName)!=null?i:"")},[]);return[n,s]}function ri(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function wg(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:s,className:a}=e;if(!t){const _=fo(n==null?void 0:n.className,a,s==null?void 0:s.className,r==null?void 0:r.className),I=ne({},n==null?void 0:n.style,s==null?void 0:s.style,r==null?void 0:r.style),A=ne({},n,s,r);return _.length>0&&(A.className=_),Object.keys(I).length>0&&(A.style=I),{props:A,internalRef:void 0}}const i=on(ne({},s,r)),u=ri(r),l=ri(s),f=t(i),g=fo(f==null?void 0:f.className,n==null?void 0:n.className,a,s==null?void 0:s.className,r==null?void 0:r.className),m=ne({},f==null?void 0:f.style,n==null?void 0:n.style,s==null?void 0:s.style,r==null?void 0:r.style),v=ne({},f,n,l,u);return g.length>0&&(v.className=g),Object.keys(m).length>0&&(v.style=m),{props:v,internalRef:f.ref}}const _g=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function ro(e){var t;const{elementType:n,externalSlotProps:r,ownerState:s,skipResolvingSlotProps:a=!1}=e,i=mr(e,_g),u=a?{}:yg(r,s),{props:l,internalRef:f}=wg(ne({},i,{externalSlotProps:u})),g=An(f,u==null?void 0:u.ref,(t=e.additionalProps)==null?void 0:t.ref);return pg(n,ne({},l,{ref:g}),s)}const cu="base";function vg(e){return`${cu}--${e}`}function xg(e,t){return`${cu}-${e}-${t}`}function Cr(e,t){const n=Ku[t];return n?vg(n):xg(e,t)}function Er(e,t){const n={};return t.forEach(r=>{n[r]=Cr(e,r)}),n}const lu="Tabs";function kg(e){return Cr(lu,e)}Er(lu,["root","horizontal","vertical"]);const so=E.createContext(null);function Sg(e){const t=Array.from(e.keys()).map(n=>{const r=e.get(n);return{key:n,subitem:r}});return t.sort((n,r)=>{const s=n.subitem.ref.current,a=r.subitem.ref.current;return s===null||a===null||s===a?0:s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}),new Map(t.map(n=>[n.key,n.subitem]))}function fu(){const[e,t]=E.useState(new Map),n=E.useRef(new Set),r=E.useCallback(function(f){n.current.delete(f),t(g=>{const m=new Map(g);return m.delete(f),m})},[]),s=E.useCallback(function(f,g){let m;return typeof f=="function"?m=f(n.current):m=f,n.current.add(m),t(v=>{const _=new Map(v);return _.set(m,g),_}),{id:m,deregister:()=>r(m)}},[r]),a=E.useMemo(()=>Sg(e),[e]),i=E.useCallback(function(f){return Array.from(a.keys()).indexOf(f)},[a]);return{contextValue:E.useMemo(()=>({getItemIndex:i,registerItem:s,totalSubitemCount:e.size}),[i,s,e.size]),subitems:a}}function Cg(e,t){const n=E.useContext(so);if(n===null)throw new Error("useCompoundItem must be used within a useCompoundParent");const{registerItem:r}=n,[s,a]=E.useState(typeof e=="function"?void 0:e);return Xu(()=>{const{id:i,deregister:u}=r(e,t);return a(i),u},[r,t,e]),{id:s,index:s!==void 0?n.getItemIndex(s):-1,totalItemCount:n.totalSubitemCount}}function Eg(e){const{value:t,defaultValue:n,onChange:r,orientation:s="horizontal",direction:a="ltr",selectionFollowsFocus:i=!1}=e,[u,l]=Yu({controlled:t,default:n,name:"Tabs",state:"value"}),f=E.useCallback((T,C)=>{l(C),r==null||r(T,C)},[r,l]),{subitems:g,contextValue:m}=fu(),v=E.useRef(()=>{}),_=E.useCallback(T=>{var C;return(C=g.get(T))==null?void 0:C.id},[g]),I=E.useCallback(T=>v.current(T),[]),A=E.useCallback(T=>{v.current=T},[]);return{contextValue:ne({direction:a,getTabId:I,getTabPanelId:_,onSelected:f,orientation:s,registerTabIdLookup:A,selectionFollowsFocus:i,value:u},m)}}const hu=E.createContext(null);function pu(){const e=E.useContext(hu);if(e==null)throw new Error("No TabsContext provided");return e}function Mg(e){const{value:t,children:n}=e,{direction:r,getItemIndex:s,onSelected:a,orientation:i,registerItem:u,registerTabIdLookup:l,selectionFollowsFocus:f,totalSubitemCount:g,value:m,getTabId:v,getTabPanelId:_}=t,I=E.useMemo(()=>({getItemIndex:s,registerItem:u,totalSubitemCount:g}),[u,s,g]),A=E.useMemo(()=>({direction:r,getTabId:v,getTabPanelId:_,onSelected:a,orientation:i,registerTabIdLookup:l,selectionFollowsFocus:f,value:m}),[r,v,_,a,i,l,f,m]);return p.jsx(so.Provider,{value:I,children:p.jsx(hu.Provider,{value:A,children:n})})}const jg=["children","value","defaultValue","orientation","direction","onChange","selectionFollowsFocus","slotProps","slots"],Ag=e=>{const{orientation:t}=e;return Ms({root:["root",t]},no(kg))},gu=E.forwardRef(function(t,n){var r;const{children:s,orientation:a="horizontal",direction:i="ltr",slotProps:u={},slots:l={}}=t,f=mr(t,jg),g=ne({},t,{orientation:a,direction:i}),{contextValue:m}=Eg(g),v=Ag(g),_=(r=l.root)!=null?r:"div",I=ro({elementType:_,externalSlotProps:u.root,externalForwardedProps:f,additionalProps:{ref:n},ownerState:g,className:v.root});return p.jsx(_,ne({},I,{children:p.jsx(Mg,{value:m,children:s})}))}),mu=Dn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new an({key:new un("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,s=[];if(!n)return null;const a=this.editor.isEmpty;return e.descendants((i,u)=>{const l=r>=u&&r<=u+i.nodeSize,f=!i.isLeaf&&pd(i);if((l||!this.options.showOnlyCurrent)&&f){const g=[this.options.emptyNodeClass];a&&g.push(this.options.emptyEditorClass);const m=Rs.node(u,u+i.nodeSize,{class:g.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:i,pos:u,hasAnchor:l}):this.options.placeholder});s.push(m)}return this.options.includeChildren}),zs.create(e,s)}}})]}}),Tg=/^\s*>\s$/,Ig=Ge.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return["blockquote",_e(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[vn({find:Tg,type:this.type})]}}),Ng=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Dg=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Lg=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,$g=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Rg=br.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",_e(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[en({find:Ng,type:this.type}),en({find:Lg,type:this.type})]},addPasteRules(){return[Qt({find:Dg,type:this.type}),Qt({find:$g,type:this.type})]}}),zg="listItem",si="textStyle",oi=/^\s*([-+*])\s$/,Hg=Ge.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",_e(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(zg,this.editor.getAttributes(si)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=vn({find:oi,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=vn({find:oi,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(si),editor:this.editor})),[e]}}),Vg=/(^|[^`])`([^`]+)`(?!`)/,Pg=/(^|[^`])`([^`]+)`(?!`)/g,Bg=br.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",_e(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[en({find:Vg,type:this.type})]},addPasteRules(){return[Qt({find:Pg,type:this.type})]}}),Og=/^```([a-z]+)?[\s\n]$/,Fg=/^~~~([a-z]+)?[\s\n]$/,Wg=Ge.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,a=[...((t=e.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",_e(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const a=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!a||!i?!1:e.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:s,empty:a}=n;if(!a||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const u=s.after();return u===void 0?!1:r.nodeAt(u)?e.commands.command(({tr:f})=>(f.setSelection(xn.near(r.resolve(u))),!0)):e.commands.exitCode()}}},addInputRules(){return[us({find:Og,type:this.type,getAttributes:e=>({language:e[1]})}),us({find:Fg,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new an({key:new un("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,a=s==null?void 0:s.mode;if(!n||!a)return!1;const{tr:i,schema:u}=e.state,l=u.text(n.replace(/\r\n?/g,`
`));return i.replaceSelectionWith(this.type.create({language:a},l)),i.selection.$from.parent.type!==this.type&&i.setSelection(Xt.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.setMeta("paste",!0),e.dispatch(i),!0}}})]}}),Ug=Ge.create({name:"doc",topNode:!0,content:"block+"});function Gg(e={}){return new an({view(t){return new qg(t,e)}})}class qg{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let a=i=>{this[s](i)};return t.dom.addEventListener(s,a),{name:s,handler:a}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,s=this.editorView.dom,a=s.getBoundingClientRect(),i=a.width/s.offsetWidth,u=a.height/s.offsetHeight;if(n){let m=t.nodeBefore,v=t.nodeAfter;if(m||v){let _=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(_){let I=_.getBoundingClientRect(),A=m?I.bottom:I.top;m&&v&&(A=(A+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let T=this.width/2*u;r={left:I.left,right:I.right,top:A-T,bottom:A+T}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),v=this.width/2*i;r={left:m.left-v,right:m.left+v,top:m.top,bottom:m.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let f,g;if(!l||l==document.body&&getComputedStyle(l).position=="static")f=-pageXOffset,g=-pageYOffset;else{let m=l.getBoundingClientRect(),v=m.width/l.offsetWidth,_=m.height/l.offsetHeight;f=m.left-l.scrollLeft*v,g=m.top-l.scrollTop*_}this.element.style.left=(r.left-f)/i+"px",this.element.style.top=(r.top-g)/u+"px",this.element.style.width=(r.right-r.left)/i+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,a=typeof s=="function"?s(this.editorView,n,t):s;if(n&&!a){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=gd(this.editorView.state.doc,i,this.editorView.dragging.slice);u!=null&&(i=u)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}const Kg=Dn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Gg(this.options)]}});class ge extends xn{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return ge.valid(r)?new ge(r):xn.near(r)}content(){return Mi.empty}eq(t){return t instanceof ge&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ge(t.resolve(n.pos))}getBookmark(){return new oo(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!Xg(t)||!Yg(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(t.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&ge.valid(t))return t;let s=t.pos,a=null;for(let i=t.depth;;i--){let u=t.node(i);if(n>0?t.indexAfter(i)<u.childCount:t.index(i)>0){a=u.child(n>0?t.indexAfter(i):t.index(i)-1);break}else if(i==0)return null;s+=n;let l=t.doc.resolve(s);if(ge.valid(l))return l}for(;;){let i=n>0?a.firstChild:a.lastChild;if(!i){if(a.isAtom&&!a.isText&&!Hs.isSelectable(a)){t=t.doc.resolve(s+a.nodeSize*n),r=!1;continue e}break}a=i,s+=n;let u=t.doc.resolve(s);if(ge.valid(u))return u}return null}}}ge.prototype.visible=!1;ge.findFrom=ge.findGapCursorFrom;xn.jsonID("gapcursor",ge);class oo{constructor(t){this.pos=t}map(t){return new oo(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return ge.valid(n)?new ge(n):xn.near(n)}}function Xg(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function Yg(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function Zg(){return new an({props:{decorations:tm,createSelectionBetween(e,t,n){return t.pos==n.pos&&ge.valid(n)?new ge(n):null},handleClick:Qg,handleKeyDown:Jg,handleDOMEvents:{beforeinput:em}}})}const Jg=md({ArrowLeft:Zn("horiz",-1),ArrowRight:Zn("horiz",1),ArrowUp:Zn("vert",-1),ArrowDown:Zn("vert",1)});function Zn(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,s,a){let i=r.selection,u=t>0?i.$to:i.$from,l=i.empty;if(i instanceof Xt){if(!a.endOfTextblock(n)||u.depth==0)return!1;l=!1,u=r.doc.resolve(t>0?u.after():u.before())}let f=ge.findGapCursorFrom(u,t,l);return f?(s&&s(r.tr.setSelection(new ge(f))),!0):!1}}function Qg(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!ge.valid(r))return!1;let s=e.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&Hs.isSelectable(e.state.doc.nodeAt(s.inside))?!1:(e.dispatch(e.state.tr.setSelection(new ge(r))),!0)}function em(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof ge))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let s=yo.empty;for(let i=r.length-1;i>=0;i--)s=yo.from(r[i].createAndFill(null,s));let a=e.state.tr.replace(n.pos,n.pos,new Mi(s,0,0));return a.setSelection(Xt.near(a.doc.resolve(n.pos+1))),e.dispatch(a),!1}function tm(e){if(!(e.selection instanceof ge))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",zs.create(e.doc,[Rs.widget(e.selection.head,t,{key:"gapcursor"})])}const nm=Dn.create({name:"gapCursor",addProseMirrorPlugins(){return[Zg()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=yd(bd(e,"allowGapCursor",n)))!==null&&t!==void 0?t:null}}}),rm=Ge.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",_e(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:s,storedMarks:a}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:u}=r.extensionManager,l=a||s.$to.parentOffset&&s.$from.marks();return t().insertContent({type:this.name}).command(({tr:f,dispatch:g})=>{if(g&&l&&i){const m=l.filter(v=>u.includes(v.type.name));f.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),sm=Ge.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,_e(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>us({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}});var gr=200,Ce=function(){};Ce.prototype.append=function(t){return t.length?(t=Ce.from(t),!this.length&&t||t.length<gr&&this.leafAppend(t)||this.length<gr&&t.leafPrepend(this)||this.appendInner(t)):this};Ce.prototype.prepend=function(t){return t.length?Ce.from(t).append(this):this};Ce.prototype.appendInner=function(t){return new om(this,t)};Ce.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Ce.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Ce.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Ce.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Ce.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(a,i){return s.push(t(a,i))},n,r),s};Ce.from=function(t){return t instanceof Ce?t:t&&t.length?new yu(t):Ce.empty};var yu=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,a){return s==0&&a==this.length?this:new t(this.values.slice(s,a))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,a,i,u){for(var l=a;l<i;l++)if(s(this.values[l],u+l)===!1)return!1},t.prototype.forEachInvertedInner=function(s,a,i,u){for(var l=a-1;l>=i;l--)if(s(this.values[l],u+l)===!1)return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=gr)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=gr)return new t(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Ce);Ce.empty=new yu([]);var om=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,s,a,i){var u=this.left.length;if(s<u&&this.left.forEachInner(r,s,Math.min(a,u),i)===!1||a>u&&this.right.forEachInner(r,Math.max(s-u,0),Math.min(this.length,a)-u,i+u)===!1)return!1},t.prototype.forEachInvertedInner=function(r,s,a,i){var u=this.left.length;if(s>u&&this.right.forEachInvertedInner(r,s-u,Math.max(a,u)-u,i+u)===!1||a<u&&this.left.forEachInvertedInner(r,Math.min(s,u),a,i)===!1)return!1},t.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var a=this.left.length;return s<=a?this.left.slice(r,s):r>=a?this.right.slice(r-a,s-a):this.left.slice(r,a).append(this.right.slice(0,s-a))},t.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new t(s,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(Ce);const im=500;class Je{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,a;n&&(s=this.remapping(r,this.items.length),a=s.maps.length);let i=t.tr,u,l,f=[],g=[];return this.items.forEach((m,v)=>{if(!m.step){s||(s=this.remapping(r,v+1),a=s.maps.length),a--,g.push(m);return}if(s){g.push(new tt(m.map));let _=m.step.map(s.slice(a)),I;_&&i.maybeStep(_).doc&&(I=i.mapping.maps[i.mapping.maps.length-1],f.push(new tt(I,void 0,void 0,f.length+g.length))),a--,I&&s.appendMap(I,a)}else i.maybeStep(m.step);if(m.selection)return u=s?m.selection.map(s.slice(a)):m.selection,l=new Je(this.items.slice(0,r).append(g.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:u}}addTransform(t,n,r,s){let a=[],i=this.eventCount,u=this.items,l=!s&&u.length?u.get(u.length-1):null;for(let g=0;g<t.steps.length;g++){let m=t.steps[g].invert(t.docs[g]),v=new tt(t.mapping.maps[g],m,n),_;(_=l&&l.merge(v))&&(v=_,g?a.pop():u=u.slice(0,u.length-1)),a.push(v),n&&(i++,n=void 0),s||(l=v)}let f=i-r.depth;return f>um&&(u=am(u,f),i-=f),new Je(u.append(a),i)}remapping(t,n){let r=new wd;return this.items.forEach((s,a)=>{let i=s.mirrorOffset!=null&&a-s.mirrorOffset>=t?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,i)},t,n),r}addMaps(t){return this.eventCount==0?this:new Je(this.items.append(t.map(n=>new tt(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),a=t.mapping,i=t.steps.length,u=this.eventCount;this.items.forEach(v=>{v.selection&&u--},s);let l=n;this.items.forEach(v=>{let _=a.getMirror(--l);if(_==null)return;i=Math.min(i,_);let I=a.maps[_];if(v.step){let A=t.steps[_].invert(t.docs[_]),T=v.selection&&v.selection.map(a.slice(l+1,_));T&&u++,r.push(new tt(I,A,T))}else r.push(new tt(I))},s);let f=[];for(let v=n;v<i;v++)f.push(new tt(a.maps[v]));let g=this.items.slice(0,s).append(f).append(r),m=new Je(g,u);return m.emptyItemCount()>im&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,s=[],a=0;return this.items.forEach((i,u)=>{if(u>=t)s.push(i),i.selection&&a++;else if(i.step){let l=i.step.map(n.slice(r)),f=l&&l.getMap();if(r--,f&&n.appendMap(f,r),l){let g=i.selection&&i.selection.map(n.slice(r));g&&a++;let m=new tt(f.invert(),l,g),v,_=s.length-1;(v=s.length&&s[_].merge(m))?s[_]=v:s.push(m)}}else i.map&&r--},this.items.length,0),new Je(Ce.from(s.reverse()),a)}}Je.empty=new Je(Ce.empty,0);function am(e,t){let n;return e.forEach((r,s)=>{if(r.selection&&t--==0)return n=s,!1}),e.slice(n)}class tt{constructor(t,n,r,s){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=s}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new tt(n.getMap().invert(),n,this.selection)}}}class St{constructor(t,n,r,s,a){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=a}}const um=20;function dm(e,t,n,r){let s=n.getMeta(Ht),a;if(s)return s.historyState;n.getMeta(fm)&&(e=new St(e.done,e.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(i&&i.getMeta(Ht))return i.getMeta(Ht).redo?new St(e.done.addTransform(n,void 0,r,sr(t)),e.undone,ii(n.mapping.maps),e.prevTime,e.prevComposition):new St(e.done,e.undone.addTransform(n,void 0,r,sr(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let u=n.getMeta("composition"),l=e.prevTime==0||!i&&e.prevComposition!=u&&(e.prevTime<(n.time||0)-r.newGroupDelay||!cm(n,e.prevRanges)),f=i?es(e.prevRanges,n.mapping):ii(n.mapping.maps);return new St(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,sr(t)),Je.empty,f,n.time,u??e.prevComposition)}else return(a=n.getMeta("rebased"))?new St(e.done.rebased(n,a),e.undone.rebased(n,a),es(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new St(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),es(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function cm(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,s)=>{for(let a=0;a<t.length;a+=2)r<=t[a+1]&&s>=t[a]&&(n=!0)}),n}function ii(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,s,a,i)=>t.push(a,i));return t}function es(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let s=t.map(e[r],1),a=t.map(e[r+1],-1);s<=a&&n.push(s,a)}return n}function lm(e,t,n){let r=sr(t),s=Ht.get(t).spec.config,a=(n?e.undone:e.done).popEvent(t,r);if(!a)return null;let i=a.selection.resolve(a.transform.doc),u=(n?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),s,r),l=new St(n?u:a.remaining,n?a.remaining:u,null,0,-1);return a.transform.setSelection(i).setMeta(Ht,{redo:n,historyState:l})}let ts=!1,ai=null;function sr(e){let t=e.plugins;if(ai!=t){ts=!1,ai=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){ts=!0;break}}return ts}const Ht=new un("history"),fm=new un("closeHistory");function hm(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new an({key:Ht,state:{init(){return new St(Je.empty,Je.empty,null,0,-1)},apply(t,n,r){return dm(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,s=r=="historyUndo"?wu:r=="historyRedo"?_u:null;return s?(n.preventDefault(),s(t.state,t.dispatch)):!1}}}})}function bu(e,t){return(n,r)=>{let s=Ht.getState(n);if(!s||(e?s.undone:s.done).eventCount==0)return!1;if(r){let a=lm(s,n,e);a&&r(t?a.scrollIntoView():a)}return!0}}const wu=bu(!1,!0),_u=bu(!0,!0),pm=Dn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>wu(e,t),redo:()=>({state:e,dispatch:t})=>_u(e,t)}},addProseMirrorPlugins(){return[hm(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),gm=Ge.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",_e(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!vd(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$from:r,$to:s}=n,a=e();return r.parentOffset===0?a.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):xd(n)?a.insertContentAt(s.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(({tr:i,dispatch:u})=>{var l;if(u){const{$to:f}=i.selection,g=f.end();if(f.nodeAfter)f.nodeAfter.isTextblock?i.setSelection(Xt.create(i.doc,f.pos+1)):f.nodeAfter.isBlock?i.setSelection(Hs.create(i.doc,f.pos)):i.setSelection(Xt.create(i.doc,f.pos));else{const m=(l=f.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();m&&(i.insert(g,m),i.setSelection(Xt.create(i.doc,g+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[_d({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),mm=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,ym=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,bm=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,wm=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,_m=br.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",_e(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[en({find:mm,type:this.type}),en({find:bm,type:this.type})]},addPasteRules(){return[Qt({find:ym,type:this.type}),Qt({find:wm,type:this.type})]}}),vm=Ge.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",_e(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),xm="listItem",ui="textStyle",di=/^(\d+)\.\s$/,km=Ge.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",_e(this.options.HTMLAttributes,n),0]:["ol",_e(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(xm,this.editor.getAttributes(ui)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=vn({find:di,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=vn({find:di,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(ui)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),Sm=Ge.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",_e(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Cm=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Em=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Mm=br.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",_e(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[en({find:Cm,type:this.type})]},addPasteRules(){return[Qt({find:Em,type:this.type})]}}),jm=Ge.create({name:"text",group:"inline"}),vu=Dn.create({name:"starterKit",addExtensions(){const e=[];return this.options.bold!==!1&&e.push(Rg.configure(this.options.bold)),this.options.blockquote!==!1&&e.push(Ig.configure(this.options.blockquote)),this.options.bulletList!==!1&&e.push(Hg.configure(this.options.bulletList)),this.options.code!==!1&&e.push(Bg.configure(this.options.code)),this.options.codeBlock!==!1&&e.push(Wg.configure(this.options.codeBlock)),this.options.document!==!1&&e.push(Ug.configure(this.options.document)),this.options.dropcursor!==!1&&e.push(Kg.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&e.push(nm.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&e.push(rm.configure(this.options.hardBreak)),this.options.heading!==!1&&e.push(sm.configure(this.options.heading)),this.options.history!==!1&&e.push(pm.configure(this.options.history)),this.options.horizontalRule!==!1&&e.push(gm.configure(this.options.horizontalRule)),this.options.italic!==!1&&e.push(_m.configure(this.options.italic)),this.options.listItem!==!1&&e.push(vm.configure(this.options.listItem)),this.options.orderedList!==!1&&e.push(km.configure(this.options.orderedList)),this.options.paragraph!==!1&&e.push(Sm.configure(this.options.paragraph)),this.options.strike!==!1&&e.push(Mm.configure(this.options.strike)),this.options.text!==!1&&e.push(jm.configure(this.options.text)),e}});function Am(e){var t;const{char:n,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:a,startOfLine:i,$position:u}=e,l=r&&!s,f=kd(n),g=new RegExp(`\\s${f}$`),m=i?"^":"",v=s?"":f,_=l?new RegExp(`${m}${f}.*?(?=\\s${v}|$)`,"gm"):new RegExp(`${m}(?:^)?${f}[^\\s${v}]*`,"gm"),I=((t=u.nodeBefore)===null||t===void 0?void 0:t.isText)&&u.nodeBefore.text;if(!I)return null;const A=u.pos-I.length,T=Array.from(I.matchAll(_)).pop();if(!T||T.input===void 0||T.index===void 0)return null;const C=T.input.slice(Math.max(0,T.index-1),T.index),D=new RegExp(`^[${a==null?void 0:a.join("")}\0]?$`).test(C);if(a!==null&&!D)return null;const $=A+T.index;let o=$+T[0].length;return l&&g.test(I.slice(o-1,o+1))&&(T[0]+=" ",o+=1),$<u.pos&&o>=u.pos?{range:{from:$,to:o},query:T[0].slice(n.length),text:T[0]}:null}const Tm=new un("suggestion");function Im({pluginKey:e=Tm,editor:t,char:n="@",allowSpaces:r=!1,allowToIncludeChar:s=!1,allowedPrefixes:a=[" "],startOfLine:i=!1,decorationTag:u="span",decorationClass:l="suggestion",decorationContent:f="",decorationEmptyClass:g="is-empty",command:m=()=>null,items:v=()=>[],render:_=()=>({}),allow:I=()=>!0,findSuggestionMatch:A=Am}){let T;const C=_==null?void 0:_(),D=new an({key:e,view(){return{update:async($,o)=>{var c,d,y,w,x,k,M;const z=(c=this.key)===null||c===void 0?void 0:c.getState(o),R=(d=this.key)===null||d===void 0?void 0:d.getState($.state),b=z.active&&R.active&&z.range.from!==R.range.from,S=!z.active&&R.active,h=z.active&&!R.active,j=!S&&!h&&z.query!==R.query,H=S||b&&j,N=j||b,V=h||b&&j;if(!H&&!N&&!V)return;const L=V&&!H?z:R,P=$.dom.querySelector(`[data-decoration-id="${L.decorationId}"]`);T={editor:t,range:L.range,query:L.query,text:L.text,items:[],command:O=>m({editor:t,range:L.range,props:O}),decorationNode:P,clientRect:P?()=>{var O;const{decorationId:F}=(O=this.key)===null||O===void 0?void 0:O.getState(t.state),G=$.dom.querySelector(`[data-decoration-id="${F}"]`);return(G==null?void 0:G.getBoundingClientRect())||null}:null},H&&((y=C==null?void 0:C.onBeforeStart)===null||y===void 0||y.call(C,T)),N&&((w=C==null?void 0:C.onBeforeUpdate)===null||w===void 0||w.call(C,T)),(N||H)&&(T.items=await v({editor:t,query:L.query})),V&&((x=C==null?void 0:C.onExit)===null||x===void 0||x.call(C,T)),N&&((k=C==null?void 0:C.onUpdate)===null||k===void 0||k.call(C,T)),H&&((M=C==null?void 0:C.onStart)===null||M===void 0||M.call(C,T))},destroy:()=>{var $;T&&(($=C==null?void 0:C.onExit)===null||$===void 0||$.call(C,T))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply($,o,c,d){const{isEditable:y}=t,{composing:w}=t.view,{selection:x}=$,{empty:k,from:M}=x,z={...o};if(z.composing=w,y&&(k||t.view.composing)){(M<o.range.from||M>o.range.to)&&!w&&!o.composing&&(z.active=!1);const R=A({char:n,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:a,startOfLine:i,$position:x.$from}),b=`id_${Math.floor(Math.random()*4294967295)}`;R&&I({editor:t,state:d,range:R.range,isActive:o.active})?(z.active=!0,z.decorationId=o.decorationId?o.decorationId:b,z.range=R.range,z.query=R.query,z.text=R.text):z.active=!1}else z.active=!1;return z.active||(z.decorationId=null,z.range={from:0,to:0},z.query=null,z.text=null),z}},props:{handleKeyDown($,o){var c;const{active:d,range:y}=D.getState($.state);return d&&((c=C==null?void 0:C.onKeyDown)===null||c===void 0?void 0:c.call(C,{view:$,event:o,range:y}))||!1},decorations($){const{active:o,range:c,decorationId:d,query:y}=D.getState($);if(!o)return null;const w=!(y!=null&&y.length),x=[l];return w&&x.push(g),zs.create($.doc,[Rs.inline(c.from,c.to,{nodeName:u,class:x.join(" "),"data-decoration-id":d,"data-decoration-content":f})])}}});return D}function Nm({editor:e,overrideSuggestionOptions:t,extensionName:n,char:r="@"}){const s=new un;return{editor:e,char:r,pluginKey:s,command:({editor:a,range:i,props:u})=>{var l,f,g;const m=a.view.state.selection.$to.nodeAfter;((l=m==null?void 0:m.text)===null||l===void 0?void 0:l.startsWith(" "))&&(i.to+=1),a.chain().focus().insertContentAt(i,[{type:n,attrs:{...u,mentionSuggestionChar:r}},{type:"text",text:" "}]).run(),(g=(f=a.view.dom.ownerDocument.defaultView)===null||f===void 0?void 0:f.getSelection())===null||g===void 0||g.collapseToEnd()},allow:({state:a,range:i})=>{const u=a.doc.resolve(i.from),l=a.schema.nodes[n];return!!u.parent.type.contentMatch.matchType(l)},...t}}function xu(e){return(e.options.suggestions.length?e.options.suggestions:[e.options.suggestion]).map(t=>Nm({editor:e.editor,overrideSuggestionOptions:t,extensionName:e.name,char:t.char}))}function ci(e,t){const n=xu(e),r=n.find(s=>s.char===t);return r||(n.length?n[0]:null)}const ku=Ge.create({name:"mention",priority:101,addOptions(){return{HTMLAttributes:{},renderText({node:e,suggestion:t}){var n,r;return`${(n=t==null?void 0:t.char)!==null&&n!==void 0?n:"@"}${(r=e.attrs.label)!==null&&r!==void 0?r:e.attrs.id}`},deleteTriggerWithBackspace:!1,renderHTML({options:e,node:t,suggestion:n}){var r,s;return["span",_e(this.HTMLAttributes,e.HTMLAttributes),`${(r=n==null?void 0:n.char)!==null&&r!==void 0?r:"@"}${(s=t.attrs.label)!==null&&s!==void 0?s:t.attrs.id}`]},suggestions:[],suggestion:{}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}},mentionSuggestionChar:{default:"@",parseHTML:e=>e.getAttribute("data-mention-suggestion-char"),renderHTML:e=>({"data-mention-suggestion-char":e.mentionSuggestionChar})}}},parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({node:e,HTMLAttributes:t}){const n=ci(this,e.attrs.mentionSuggestionChar);if(this.options.renderLabel!==void 0)return console.warn("renderLabel is deprecated use renderText and renderHTML instead"),["span",_e({"data-type":this.name},this.options.HTMLAttributes,t),this.options.renderLabel({options:this.options,node:e,suggestion:n})];const r={...this.options};r.HTMLAttributes=_e({"data-type":this.name},this.options.HTMLAttributes,t);const s=this.options.renderHTML({options:r,node:e,suggestion:n});return typeof s=="string"?["span",_e({"data-type":this.name},this.options.HTMLAttributes,t),s]:s},renderText({node:e}){const t={options:this.options,node:e,suggestion:ci(this,e.attrs.mentionSuggestionChar)};return this.options.renderLabel!==void 0?(console.warn("renderLabel is deprecated use renderText and renderHTML instead"),this.options.renderLabel(t)):this.options.renderText(t)},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:e,state:t})=>{let n=!1;const{selection:r}=t,{empty:s,anchor:a}=r;if(!s)return!1;t.doc.nodesBetween(a-1,a,(l,f)=>{if(l.type.name===this.name)return n=!0,e.insertText(this.options.deleteTriggerWithBackspace?"":this.options.suggestion.char||"",f,f+l.nodeSize),!1});let i=new Sd,u=0;return t.doc.nodesBetween(a-1,a,(l,f)=>{if(l.type.name===this.name)return n=!0,i=l,u=f,!1}),n&&e.insertText(this.options.deleteTriggerWithBackspace?"":i.attrs.mentionSuggestionChar,u,u+i.nodeSize),n})}},addProseMirrorPlugins(){return xu(this).map(Im)}}),Dm=(e,t,n,r,s,a)=>[vu,ku.configure({HTMLAttributes:{class:"variable"},renderHTML({options:i,node:u}){return["span",_e(this.HTMLAttributes,i.HTMLAttributes),`${i.suggestion.char} ${u.attrs.label??u.attrs.id} }}`]},suggestion:Ai(e,t,n,r,s,a),deleteTriggerWithBackspace:!0})],Lm=Tt(Ti)(({theme:e,rows:t,disabled:n})=>({"& .ProseMirror":{padding:"0px 14px",height:t?`${t*1.4375}rem`:"2.4rem",overflowY:t?"auto":"hidden",overflowX:t?"auto":"hidden",lineHeight:t?"1.4375em":"0.875em",fontWeight:500,color:n?e.palette.action.disabled:e.palette.grey[900],border:`1px solid ${e.palette.grey[900]+25}`,borderRadius:"10px",backgroundColor:e.palette.textBackground.main,boxSizing:"border-box",whiteSpace:t?"pre-wrap":"nowrap","&:hover":{borderColor:n?`${e.palette.grey[900]+25}`:e.palette.text.primary,cursor:n?"default":"text"},"&:focus":{borderColor:n?`${e.palette.grey[900]+25}`:e.palette.primary.main,outline:"none"},"& p.is-editor-empty:first-of-type::before":{content:"attr(data-placeholder)",float:"left",color:n?e.palette.action.disabled:e.palette.text.primary,opacity:n?.6:.4,pointerEvents:"none",height:0}}})),Su=({inputParam:e,value:t,nodes:n,edges:r,nodeId:s,onChange:a,disabled:i=!1})=>{const[u,l]=E.useState([]),[f,g]=E.useState([]),[m,v]=E.useState({}),[_,I]=E.useState(!1);E.useEffect(()=>{var T,C,D;if(!i&&n&&r&&s&&e){const $=e!=null&&e.acceptVariable?ar(n,r,s,e.id):[];l($);const o=n.find(y=>y.data.name==="startAgentflow"),c=(C=(T=o==null?void 0:o.data)==null?void 0:T.inputs)==null?void 0:C.startState;g(c);const d=n.find(y=>y.data.id===s);v(d==null?void 0:d.data),I(((D=n.find(y=>y.data.id===s))==null?void 0:D.extent)==="parent")}},[i,e,n,r,s]);const A=ji({extensions:[...Dm(u,f,e==null?void 0:e.acceptNodeOutputAsVariable,n,m,_),mu.configure({placeholder:e==null?void 0:e.placeholder})],content:t,onUpdate:({editor:T})=>{a(T.getHTML())},editable:!i},[u]);return p.jsx(we,{sx:{mt:1,border:""},children:p.jsx(Lm,{editor:A,rows:e==null?void 0:e.rows,disabled:i})})};Su.propTypes={inputParam:X.object,value:X.oneOfType([X.string,X.number]),onChange:X.func,disabled:X.bool,nodes:X.array,edges:X.array,nodeId:X.string};const Cu="TabsList";function $m(e){return Cr(Cu,e)}Er(Cu,["root","horizontal","vertical"]);const Eu={valueChange:"valueChange"},Se={blur:"list:blur",itemClick:"list:itemClick",itemHover:"list:itemHover",itemsChange:"list:itemsChange",keyDown:"list:keyDown",resetHighlight:"list:resetHighlight",highlightLast:"list:highlightLast",textNavigation:"list:textNavigation",clearSelection:"list:clearSelection"};function Rm(e,t,n,r,s,a){if(n.length===0||!r&&n.every((u,l)=>s(u,l)))return-1;let i=e;for(;;){if(!a&&t==="next"&&i===n.length||!a&&t==="previous"&&i===-1)return-1;if(r?!1:s(n[i],i))i+=t==="next"?1:-1,a&&(i=(i+n.length)%n.length);else return i}}function Ie(e,t,n){var r;const{items:s,isItemDisabled:a,disableListWrap:i,disabledItemsFocusable:u,itemComparer:l,focusManagement:f}=n,g=f==="DOM"?0:-1,m=s.length-1,v=e==null?-1:s.findIndex(C=>l(C,e));let _,I,A=!i;switch(t){case"reset":if(g===-1)return null;_=0,I="next",A=!1;break;case"start":_=0,I="next",A=!1;break;case"end":_=m,I="previous",A=!1;break;default:{const C=v+t;C<0?!A&&v!==-1||Math.abs(t)>1?(_=0,I="next"):(_=m,I="previous"):C>m?!A||Math.abs(t)>1?(_=m,I="previous"):(_=0,I="next"):(_=C,I=t>=0?"next":"previous")}}const T=Rm(_,I,s,u,a,A);return T===-1&&e!==null&&!a(e,v)?e:(r=s[T])!=null?r:null}function zm(e,t,n,r){return n==="none"?[]:n==="single"?r(t[0],e)?t:[e]:t.some(s=>r(s,e))?t.filter(s=>!r(s,e)):[...t,e]}function Mu(e,t,n){const{itemComparer:r,isItemDisabled:s,selectionMode:a,items:i}=n,{selectedValues:u}=t,l=i.findIndex(g=>r(e,g));if(s(e,l))return t;const f=zm(e,u,a,r);return ne({},t,{selectedValues:f,highlightedValue:e})}function Hm(e,t,n){const r=t.highlightedValue,{orientation:s,pageSize:a}=n;switch(e){case"Home":return ne({},t,{highlightedValue:Ie(r,"start",n)});case"End":return ne({},t,{highlightedValue:Ie(r,"end",n)});case"PageUp":return ne({},t,{highlightedValue:Ie(r,-a,n)});case"PageDown":return ne({},t,{highlightedValue:Ie(r,a,n)});case"ArrowUp":if(s!=="vertical")break;return ne({},t,{highlightedValue:Ie(r,-1,n)});case"ArrowDown":if(s!=="vertical")break;return ne({},t,{highlightedValue:Ie(r,1,n)});case"ArrowLeft":{if(s==="vertical")break;return ne({},t,{highlightedValue:Ie(r,s==="horizontal-ltr"?-1:1,n)})}case"ArrowRight":{if(s==="vertical")break;return ne({},t,{highlightedValue:Ie(r,s==="horizontal-ltr"?1:-1,n)})}case"Enter":case" ":return t.highlightedValue===null?t:Mu(t.highlightedValue,t,n)}return t}function Vm(e,t){return t.focusManagement==="DOM"?e:ne({},e,{highlightedValue:null})}function Pm(e,t,n){var r;const s=(r=n(e))==null?void 0:r.trim().toLowerCase();return!s||s.length===0?!1:s.indexOf(t)===0}function Bm(e,t,n){const{items:r,isItemDisabled:s,disabledItemsFocusable:a,getItemAsString:i}=n,u=t.length>1;let l=u?e.highlightedValue:Ie(e.highlightedValue,1,n);for(let f=0;f<r.length;f+=1){if(!l||!u&&e.highlightedValue===l)return e;if(Pm(l,t,i)&&(!s(l,r.indexOf(l))||a))return ne({},e,{highlightedValue:l});l=Ie(l,1,n)}return e}function Om(e,t,n,r){var s;const{itemComparer:a,focusManagement:i}=r;let u=null;if(n.highlightedValue!=null){var l;u=(l=e.find(m=>a(m,n.highlightedValue)))!=null?l:null}else i==="DOM"&&t.length===0&&(u=Ie(null,"reset",r));const g=((s=n.selectedValues)!=null?s:[]).filter(m=>e.some(v=>a(v,m)));return ne({},n,{highlightedValue:u,selectedValues:g})}function Fm(e,t){return ne({},e,{highlightedValue:Ie(null,"reset",t)})}function Wm(e,t){return ne({},e,{highlightedValue:Ie(null,"end",t)})}function Um(e,t){return ne({},e,{selectedValues:[],highlightedValue:Ie(null,"reset",t)})}function ju(e,t){const{type:n,context:r}=t;switch(n){case Se.keyDown:return Hm(t.key,e,r);case Se.itemClick:return Mu(t.item,e,r);case Se.blur:return Vm(e,r);case Se.textNavigation:return Bm(e,t.searchString,r);case Se.itemsChange:return Om(t.items,t.previousItems,e,r);case Se.resetHighlight:return Fm(e,r);case Se.highlightLast:return Wm(e,r);case Se.clearSelection:return Um(e,r);default:return e}}function Gm(e,t){return e===t}const ns={},li=()=>{};function Ss(e,t){const n=ne({},e);return Object.keys(t).forEach(r=>{t[r]!==void 0&&(n[r]=t[r])}),n}function qm(e){const{nextState:t,initialState:n,stateComparers:r,onStateChange:s,controlledProps:a,lastActionRef:i}=e,u=E.useRef(n);E.useEffect(()=>{if(i.current===null)return;const l=Ss(u.current,a);Object.keys(t).forEach(f=>{var g;const m=(g=r[f])!=null?g:Gm,v=t[f],_=l[f];if(_==null&&v!=null||_!=null&&v==null||_!=null&&v!=null&&!m(v,_)){var I,A;s==null||s((I=i.current.event)!=null?I:null,f,v,(A=i.current.type)!=null?A:"",t)}}),u.current=t,i.current=null},[u,t,i,s,r,a])}function Km(e){const t=E.useRef(null),{reducer:n,initialState:r,controlledProps:s=ns,stateComparers:a=ns,onStateChange:i=li,actionContext:u}=e;E.useRef(s);const l=E.useCallback((v,_)=>{t.current=_;const I=Ss(v,s);return n(I,_)},[s,n]),[f,g]=E.useReducer(l,r),m=E.useCallback(v=>{g(ne({},v,{context:u}))},[u]);return qm({nextState:f,initialState:r,stateComparers:a??ns,onStateChange:i??li,controlledProps:s,lastActionRef:t}),[Ss(f,s),m]}const Xm=500;function Ym(e){const t=E.useRef({searchString:"",lastTime:null});return E.useCallback(n=>{if(n.key.length===1&&n.key!==" "){const r=t.current,s=n.key.toLowerCase(),a=performance.now();r.searchString.length>0&&r.lastTime&&a-r.lastTime>Xm?r.searchString=s:(r.searchString.length!==1||s!==r.searchString)&&(r.searchString+=s),r.lastTime=a,e(r.searchString,n)}},[e])}const fi={},Zm=()=>{},Jm=(e,t)=>e===t,Qm=()=>!1,ey=e=>typeof e=="string"?e:String(e),ty=()=>({highlightedValue:null,selectedValues:[]});function ny(e){const{controlledProps:t=fi,disabledItemsFocusable:n=!1,disableListWrap:r=!1,focusManagement:s="activeDescendant",getInitialState:a=ty,getItemDomElement:i,getItemId:u,isItemDisabled:l=Qm,rootRef:f,onStateChange:g=Zm,items:m,itemComparer:v=Jm,getItemAsString:_=ey,onChange:I,onHighlightChange:A,onItemsChange:T,orientation:C="vertical",pageSize:D=5,reducerActionContext:$=fi,selectionMode:o="single",stateReducer:c,componentName:d="useList"}=e,y=E.useRef(null),w=An(f,y),x=E.useCallback((K,q,re)=>{if(A==null||A(K,q,re),s==="DOM"&&q!=null&&(re===Se.itemClick||re===Se.keyDown||re===Se.textNavigation)){var te;i==null||(te=i(q))==null||te.focus()}},[i,A,s]),k=E.useMemo(()=>({highlightedValue:v,selectedValues:(K,q)=>ni(K,q,v)}),[v]),M=E.useCallback((K,q,re,te,fe)=>{switch(g==null||g(K,q,re,te,fe),q){case"highlightedValue":x(K,re,te);break;case"selectedValues":I==null||I(K,re,te);break}},[x,I,g]),z=E.useMemo(()=>({disabledItemsFocusable:n,disableListWrap:r,focusManagement:s,isItemDisabled:l,itemComparer:v,items:m,getItemAsString:_,onHighlightChange:x,orientation:C,pageSize:D,selectionMode:o,stateComparers:k}),[n,r,s,l,v,m,_,x,C,D,o,k]),R=a(),b=c??ju,S=E.useMemo(()=>ne({},$,z),[$,z]),[h,j]=Km({reducer:b,actionContext:S,initialState:R,controlledProps:t,stateComparers:k,onStateChange:M}),{highlightedValue:H,selectedValues:N}=h,V=Ym((K,q)=>j({type:Se.textNavigation,event:q,searchString:K})),L=E.useRef([]);E.useEffect(()=>{ni(L.current,m,v)||(j({type:Se.itemsChange,event:null,items:m,previousItems:L.current}),L.current=m,T==null||T(m))},[m,v,j,T]);const P=K=>q=>{var re;if((re=K.onKeyDown)==null||re.call(K,q),q.defaultMuiPrevented)return;const te=["Home","End","PageUp","PageDown"];C==="vertical"?te.push("ArrowUp","ArrowDown"):te.push("ArrowLeft","ArrowRight"),s==="activeDescendant"&&te.push(" ","Enter"),te.includes(q.key)&&q.preventDefault(),j({type:Se.keyDown,key:q.key,event:q}),V(q)},O=K=>q=>{var re,te;(re=K.onBlur)==null||re.call(K,q),!q.defaultMuiPrevented&&((te=y.current)!=null&&te.contains(q.relatedTarget)||j({type:Se.blur,event:q}))},F=(K={})=>{const q=on(K);return ne({},K,{"aria-activedescendant":s==="activeDescendant"&&H!=null?u(H):void 0,tabIndex:s==="DOM"?-1:0,ref:w},q,{onBlur:O(q),onKeyDown:P(q)})},G=E.useCallback(K=>{const q=(N??[]).some(fe=>fe!=null&&v(K,fe)),re=H!=null&&v(K,H);return{focusable:s==="DOM",highlighted:re,selected:q}},[v,N,H,s]),ee=E.useMemo(()=>({dispatch:j,getItemState:G}),[j,G]);return E.useDebugValue({state:h}),{contextValue:ee,dispatch:j,getRootProps:F,rootRef:w,state:h}}const Au=E.createContext(null);function ry(e){const{handlePointerOverEvents:t=!1,item:n}=e,r=E.useContext(Au);if(!r)throw new Error("useListItem must be used within a ListProvider");const{dispatch:s,getItemState:a}=r,{highlighted:i,selected:u,focusable:l}=a(n),f=E.useCallback(_=>I=>{var A;(A=_.onClick)==null||A.call(_,I),!I.defaultPrevented&&s({type:Se.itemClick,item:n,event:I})},[s,n]),g=E.useCallback(_=>I=>{var A;(A=_.onMouseOver)==null||A.call(_,I),!I.defaultPrevented&&s({type:Se.itemHover,item:n,event:I})},[s,n]);let m;return l&&(m=i?0:-1),{getRootProps:(_={})=>{const I=on(_);return ne({},_,{onClick:f(I),onPointerOver:t?g(I):void 0,tabIndex:m})},highlighted:i,selected:u}}function sy(e,t){if(t.type===Eu.valueChange)return ne({},e,{highlightedValue:t.value});const n=ju(e,t),{context:{selectionFollowsFocus:r}}=t;if(t.type===Se.itemsChange){if(n.selectedValues.length>0)return ne({},n,{highlightedValue:n.selectedValues[0]});Ie(null,"reset",t.context)}return r&&n.highlightedValue!=null?ne({},n,{selectedValues:[n.highlightedValue]}):n}function oy(e){var t;const{rootRef:n}=e,{direction:r="ltr",onSelected:s,orientation:a="horizontal",value:i,registerTabIdLookup:u,selectionFollowsFocus:l}=pu(),{subitems:f,contextValue:g}=fu(),m=E.useCallback(M=>{var z;return(z=f.get(M))==null?void 0:z.id},[f]);u(m);const v=E.useMemo(()=>Array.from(f.keys()),[f]),_=E.useCallback(M=>{var z,R;return M==null?null:(z=(R=f.get(M))==null?void 0:R.ref.current)!=null?z:null},[f]),I=r==="rtl";let A;a==="vertical"?A="vertical":A=I?"horizontal-rtl":"horizontal-ltr";const T=E.useCallback((M,z)=>{var R;s(M,(R=z[0])!=null?R:null)},[s]),C=E.useMemo(()=>i===void 0?{}:i!=null?{selectedValues:[i]}:{selectedValues:[]},[i]),D=E.useCallback(M=>{var z,R;return(z=(R=f.get(M))==null?void 0:R.disabled)!=null?z:!1},[f]),{contextValue:$,dispatch:o,getRootProps:c,state:{highlightedValue:d,selectedValues:y},rootRef:w}=ny({controlledProps:C,disabledItemsFocusable:!l,focusManagement:"DOM",getItemDomElement:_,isItemDisabled:D,items:v,rootRef:n,onChange:T,orientation:A,reducerActionContext:E.useMemo(()=>({selectionFollowsFocus:l||!1}),[l]),selectionMode:"single",stateReducer:sy});E.useEffect(()=>{i!==void 0&&i!=null&&o({type:Eu.valueChange,value:i})},[o,i]);const x=(M={})=>ne({},M,c(M),{"aria-orientation":a==="vertical"?"vertical":void 0,role:"tablist"});return{contextValue:E.useMemo(()=>ne({},g,$),[g,$]),dispatch:o,getRootProps:x,highlightedValue:d,isRtl:I,orientation:a,rootRef:w,selectedValue:(t=y[0])!=null?t:null}}function iy(e){const{value:t,children:n}=e,{dispatch:r,getItemIndex:s,getItemState:a,registerItem:i,totalSubitemCount:u}=t,l=E.useMemo(()=>({dispatch:r,getItemState:a,getItemIndex:s}),[r,s,a]),f=E.useMemo(()=>({getItemIndex:s,registerItem:i,totalSubitemCount:u}),[i,s,u]);return p.jsx(so.Provider,{value:f,children:p.jsx(Au.Provider,{value:l,children:n})})}const ay=["children","slotProps","slots"],uy=e=>{const{orientation:t}=e;return Ms({root:["root",t]},no($m))},dy=E.forwardRef(function(t,n){var r;const{children:s,slotProps:a={},slots:i={}}=t,u=mr(t,ay),{isRtl:l,orientation:f,getRootProps:g,contextValue:m}=oy({rootRef:n}),v=ne({},t,{isRtl:l,orientation:f}),_=uy(v),I=(r=i.root)!=null?r:"div",A=ro({elementType:I,getSlotProps:g,externalSlotProps:a.root,externalForwardedProps:u,ownerState:v,className:_.root});return p.jsx(iy,{value:m,children:p.jsx(I,ne({},A,{children:s}))})}),or={200:"#80BFFF",400:"#3399FF",500:"#007FFF",600:"#0072E5"},Tu=ki(dy)(({theme:e,...t})=>{var n;return`
    min-width: 400px;
    background-color: ${((n=t.sx)==null?void 0:n.backgroundColor)||or[500]};
    border-radius: 20px;
    margin-top: 16px;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    align-content: space-between;
    box-shadow: 0px 4px 6px ${e.palette.mode==="dark"?"rgba(0,0,0, 0.4)":"rgba(0,0,0, 0.2)"};
    `}),cy="Button",ly=Er(cy,["root","active","disabled","focusVisible"]);function fy(e={}){const{disabled:t=!1,focusableWhenDisabled:n,href:r,rootRef:s,tabIndex:a,to:i,type:u,rootElementName:l}=e,f=E.useRef(),[g,m]=E.useState(!1),{isFocusVisibleRef:v,onFocus:_,onBlur:I,ref:A}=Zu(),[T,C]=E.useState(!1);t&&!n&&T&&C(!1),E.useEffect(()=>{v.current=T},[T,v]);const[D,$]=bg({rootElementName:l??(r||i?"a":void 0)}),o=S=>h=>{var j;T&&h.preventDefault(),(j=S.onMouseLeave)==null||j.call(S,h)},c=S=>h=>{var j;I(h),v.current===!1&&C(!1),(j=S.onBlur)==null||j.call(S,h)},d=S=>h=>{var j;if(f.current||(f.current=h.currentTarget),_(h),v.current===!0){var H;C(!0),(H=S.onFocusVisible)==null||H.call(S,h)}(j=S.onFocus)==null||j.call(S,h)},y=()=>{const S=f.current;return D==="BUTTON"||D==="INPUT"&&["button","submit","reset"].includes(S==null?void 0:S.type)||D==="A"&&(S==null?void 0:S.href)},w=S=>h=>{if(!t){var j;(j=S.onClick)==null||j.call(S,h)}},x=S=>h=>{var j;t||(m(!0),document.addEventListener("mouseup",()=>{m(!1)},{once:!0})),(j=S.onMouseDown)==null||j.call(S,h)},k=S=>h=>{var j;if((j=S.onKeyDown)==null||j.call(S,h),!h.defaultMuiPrevented&&(h.target===h.currentTarget&&!y()&&h.key===" "&&h.preventDefault(),h.target===h.currentTarget&&h.key===" "&&!t&&m(!0),h.target===h.currentTarget&&!y()&&h.key==="Enter"&&!t)){var H;(H=S.onClick)==null||H.call(S,h),h.preventDefault()}},M=S=>h=>{var j;if(h.target===h.currentTarget&&m(!1),(j=S.onKeyUp)==null||j.call(S,h),h.target===h.currentTarget&&!y()&&!t&&h.key===" "&&!h.defaultMuiPrevented){var H;(H=S.onClick)==null||H.call(S,h)}},z=An($,s,A,f),R={};return a!==void 0&&(R.tabIndex=a),D==="BUTTON"?(R.type=u??"button",n?R["aria-disabled"]=t:R.disabled=t):D==="INPUT"?u&&["button","submit","reset"].includes(u)&&(n?R["aria-disabled"]=t:R.disabled=t):D!==""&&(!r&&!i&&(R.role="button",R.tabIndex=a??0),t&&(R["aria-disabled"]=t,R.tabIndex=n?a??0:-1)),{getRootProps:(S={})=>{const h=ne({},on(e),on(S)),j=ne({type:u},h,R,S,{onBlur:c(h),onClick:w(h),onFocus:d(h),onKeyDown:k(h),onKeyUp:M(h),onMouseDown:x(h),onMouseLeave:o(h),ref:z});return delete j.onFocusVisible,j},focusVisible:T,setFocusVisible:C,active:g,rootRef:z}}const Iu="Tab";function hy(e){return Cr(Iu,e)}const py=Er(Iu,["root","selected","disabled"]);function gy(e,t){return function(r={}){const s=ne({},r,e(r));return ne({},s,t(s))}}function my(e){return e.size}function yy(e){const{value:t,rootRef:n,disabled:r=!1,id:s}=e,a=E.useRef(null),i=Ju(s),{value:u,selectionFollowsFocus:l,getTabPanelId:f}=pu(),g=E.useMemo(()=>({disabled:r,ref:a,id:i}),[r,a,i]),{id:m,index:v,totalItemCount:_}=Cg(t??my,g),{getRootProps:I,highlighted:A,selected:T}=ry({item:m}),{getRootProps:C,rootRef:D,active:$,focusVisible:o,setFocusVisible:c}=fy({disabled:r,focusableWhenDisabled:!l,type:"button"}),d=An(a,n,D),y=m!==void 0?f(m):void 0;return{getRootProps:(x={})=>{const k=on(x),M=gy(I,C);return ne({},x,M(k),{role:"tab","aria-controls":y,"aria-selected":T,id:i,ref:d})},active:$,focusVisible:o,highlighted:A,index:v,rootRef:d,selected:T||m===u,setFocusVisible:c,totalTabsCount:_}}const by=["action","children","disabled","onChange","onClick","onFocus","slotProps","slots","value"],wy=e=>{const{selected:t,disabled:n}=e;return Ms({root:["root",t&&"selected",n&&"disabled"]},no(hy))},_y=E.forwardRef(function(t,n){var r;const{children:s,disabled:a=!1,slotProps:i={},slots:u={},value:l}=t,f=mr(t,by),g=E.useRef(),m=An(g,n),{active:v,highlighted:_,selected:I,getRootProps:A}=yy(ne({},t,{rootRef:m,value:l})),T=ne({},t,{active:v,disabled:a,highlighted:_,selected:I}),C=wy(T),D=(r=u.root)!=null?r:"button",$=ro({elementType:D,getSlotProps:A,externalSlotProps:i.root,externalForwardedProps:f,additionalProps:{ref:n},ownerState:T,className:C.root});return p.jsx(D,ne({},$,{children:s}))}),Nu=ki(_y)(({...e})=>{var t,n;return`
  font-family: 'IBM Plex Sans', sans-serif;
  color: white;
  cursor: pointer;
  font-size: 0.75rem;
  font-weight: bold;
  background-color: transparent;
  width: 100%;
  line-height: 1.5;
  padding: 8px 12px;
  margin: 6px;
  border: none;
  border-radius: 25px;
  display: flex;
  justify-content: center;

  &:hover {
    background-color: ${((t=e.sx)==null?void 0:t.backgroundColor)||or[400]};
  }

  &:focus {
    color: #fff;
    outline: 3px solid ${((n=e.sx)==null?void 0:n.backgroundColor)||or[200]};
  }

  &.${py.selected} {
    background-color: #fff;
    color: ${or[600]};
  }

  &.${ly.disabled} {
    opacity: 0.5;
    cursor: not-allowed;
  }
 `}),Du=({data:e,inputParam:t,disabled:n=!1,arrayIndex:r=null,parentParamForArray:s=null})=>{const a=js(),{reactFlowInstance:i}=E.useContext(yr),[u,l]=E.useState(!1),[f,g]=E.useState({}),[m,v]=E.useState({mainValue:null,configValue:null,arrayValue:null}),_=(T,C)=>{l(C)},I=({inputParam:T,newValue:C})=>{let D=Qe.cloneDeep(f);const $={...D.inputs};$[T.name]=C;const o=Br({...D,inputs:$});Object.keys($).forEach(d=>{const y=o.find(w=>w.name===d);y&&y.display===!1&&delete $[d]});const c=$.credential||$[qt];D={...D,inputParams:o,inputs:$,credential:c||void 0},g(D)},A=E.useMemo(()=>({mainValue:e.inputs[t.name],configValue:e.inputs[`${t.name}Config`],arrayValue:s?e.inputs[s.name]:null}),[e.inputs,t.name,s==null?void 0:s.name]);return E.useEffect(()=>{(async()=>{const C=e.inputs[t.name],D=await Cd.getSpecificNode(C);if(!D.data)return;const $=Qe.cloneDeep(yi(D.data,`${D.data.nodeName}_0`)),o=()=>s&&e.inputs[s.name],c=()=>s&&e.inputs[s.name]&&Array.isArray(e.inputs[s.name])&&e.inputs[s.name][r]&&e.inputs[s.name][r][`${t.name}Config`],d=()=>c()?e.inputs[s.name][r][t.name]:e.inputs[t.name],y=()=>c()?e.inputs[s.name][r][`${t.name}Config`]:e.inputs[`${t.name}Config`];if(c()||e.inputs[`${t.name}Config`]){const x=y(),k=d();if(x[t.name]!==k){const M=ho($.inputParams);$.inputs={...M,[t.name]:k}}else $.inputs={...x,[t.name]:k}}else{const x=o()?e.inputs[s.name][r][t.name]:e.inputs[t.name];$.inputs={...$.inputs,[t.name]:x}}$.inputParams=Br({...$,inputs:$.inputs});const w=$.inputs.credential||$.inputs[qt];$.credential=w||void 0,g($),v({mainValue:e.inputs[t.name],configValue:e.inputs[`${t.name}Config`],arrayValue:s?e.inputs[s.name]:null})})()},[]),E.useEffect(()=>{if(!f.inputParams)return;const T=m.mainValue!==A.mainValue,C=m.configValue!==A.configValue,D=m.arrayValue!==A.arrayValue;if(!T&&!C&&!D)return;(()=>{const o=Qe.cloneDeep(f),c=()=>s&&e.inputs[s.name]&&Array.isArray(e.inputs[s.name])&&e.inputs[s.name][r]&&e.inputs[s.name][r][`${t.name}Config`],d=()=>c()?e.inputs[s.name][r][t.name]:e.inputs[t.name],y=()=>c()?e.inputs[s.name][r][`${t.name}Config`]:e.inputs[`${t.name}Config`],w=d();if(w!==void 0&&(o.inputs[t.name]=w),c()||e.inputs[`${t.name}Config`]){const k=y();if(k&&k[t.name]===w)o.inputs={...k,[t.name]:w};else if(T){const M=ho(o.inputParams);o.inputs={...M,[t.name]:w}}}o.inputParams=Br({...o,inputs:o.inputs});const x=o.inputs.credential||o.inputs[qt];o.credential=x||void 0,g(o),v({mainValue:A.mainValue,configValue:A.configValue,arrayValue:A.arrayValue})})()},[A,f.inputParams,t.name,s==null?void 0:s.name,r]),E.useEffect(()=>{f.inputs&&i.setNodes(T=>T.map(C=>(C.id!==e.id||(r!==null&&s?(C.data.inputs[s.name]||(C.data.inputs[s.name]=[]),C.data.inputs[s.name][r]||(C.data.inputs[s.name][r]={}),C.data.inputs[s.name][r][`${t.name}Config`]=f.inputs):C.data.inputs[`${t.name}Config`]=f.inputs),C)))},[f]),p.jsx(p.Fragment,{children:p.jsx(we,{sx:{p:0,mt:1,mb:1,border:1,borderColor:a.palette.grey[900]+25,borderRadius:2},children:p.jsxs(Ni,{sx:{background:"transparent"},expanded:u,onChange:_,children:[p.jsxs(Di,{expandIcon:p.jsx(Qn,{}),sx:{background:"transparent"},children:[p.jsx(Qu,{stroke:1.5,size:"1.3rem"}),p.jsxs(Ae,{sx:{ml:1},children:[f==null?void 0:f.label," Parameters"]})]}),p.jsx(Li,{children:(f.inputParams??[]).filter(T=>!T.hidden).filter(T=>T.display!==!1).map((T,C)=>p.jsx(Rn,{disabled:n,inputParam:T,data:f,isAdditionalParams:!0,onCustomDataChange:I},C))})]})})})};Du.propTypes={name:X.string,inputParam:X.object,data:X.object,disabled:X.bool,arrayIndex:X.number,parentParamForArray:X.object};const Lu=({show:e,dialogProps:t,onChange:n,onCancel:r})=>{const s=document.getElementById("portal"),a=Tn(l=>l.customization),i=Bt();E.useEffect(()=>(i(e?{type:In}:{type:st}),()=>i({type:st})),[e,i]);const u=e?p.jsxs(ot,{onClose:r,open:e,fullWidth:!0,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[p.jsx(jt,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:t.inputParam.label??"Format Prompt Values"}),p.jsx(it,{children:p.jsx(As,{style:{height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden"},children:p.jsx($s,{onChange:l=>n(l),value:t.value,isDarkMode:a.isDarkMode,inputParam:t.inputParam,nodes:t.nodes,edges:t.edges,nodeId:t.nodeId,isSequentialAgent:t.data.category==="Sequential Agents"})})})]}):null;return yt.createPortal(u,s)};Lu.propTypes={show:X.bool,dialogProps:X.object,onChange:X.func,onCancel:X.func};const vy=Tt(Ti)(({theme:e,rows:t})=>({"& .ProseMirror":{padding:"0px 14px",height:t?`${t*1.4375}rem`:"2.4rem",overflowY:t?"auto":"hidden",overflowX:t?"auto":"hidden",lineHeight:t?"1.4375em":"0.875em",fontWeight:500,color:e.palette.grey[900],border:`1px solid ${e.palette.textBackground.border}`,borderRadius:"10px",backgroundColor:e.palette.textBackground.main,boxSizing:"border-box",whiteSpace:t?"pre-wrap":"nowrap","&:hover":{borderColor:e.palette.text.primary,cursor:"text"},"&:focus":{borderColor:e.palette.primary.main,boxShadow:`0 0 0 0px ${e.palette.primary.main}`,outline:"none"},"&[disabled]":{backgroundColor:e.palette.action.disabledBackground,color:e.palette.action.disabled},"& p.is-editor-empty:first-of-type::before":{content:"attr(data-placeholder)",float:"left",color:e.palette.text.primary,opacity:.4,pointerEvents:"none",height:0}}})),xy=(e,t,n,r,s,a)=>[vu,ku.configure({HTMLAttributes:{class:"variable"},renderHTML({options:i,node:u}){return["span",_e(this.HTMLAttributes,i.HTMLAttributes),`${i.suggestion.char} ${u.attrs.label??u.attrs.id} }}`]},suggestion:Ai(e,t,n,r,s,a),deleteTriggerWithBackspace:!0})],$u=({show:e,dialogProps:t,onCancel:n,onInputHintDialogClicked:r,onConfirm:s})=>{const a=document.getElementById("portal"),i=Bt(),[u,l]=E.useState(""),[f,g]=E.useState(null),[m,v]=E.useState([]),[_,I]=E.useState([]),[A,T]=E.useState({}),[C,D]=E.useState(!1);E.useEffect(()=>(t.value&&l(t.value),t.inputParam&&g(t.inputParam),()=>{l(""),g(null)}),[t]),E.useEffect(()=>(i(e?{type:In}:{type:st}),()=>i({type:st})),[e,i]),E.useEffect(()=>{var c,d,y;if(!t.disabled&&t.nodes&&t.edges&&t.nodeId&&f){const w=f!=null&&f.acceptVariable?ar(t.nodes,t.edges,t.nodeId,f.id):[];v(w);const x=t.nodes.find(z=>z.data.name==="startAgentflow"),k=(d=(c=x==null?void 0:x.data)==null?void 0:c.inputs)==null?void 0:d.startState;I(k);const M=t.nodes.find(z=>z.data.id===t.nodeId);T(M==null?void 0:M.data),D(((y=t.nodes.find(z=>z.data.id===t.nodeId))==null?void 0:y.extent)==="parent")}},[t.disabled,f,t.nodes,t.edges,t.nodeId]);const $=ji({extensions:[...xy(m,_,f==null?void 0:f.acceptNodeOutputAsVariable,t.nodes,A,C),mu.configure({placeholder:f==null?void 0:f.placeholder})],content:u,onUpdate:({editor:c})=>{l(c.getHTML())},editable:!t.disabled},[m]);E.useEffect(()=>{e&&$&&setTimeout(()=>{$.commands.focus()},100)},[e,$]);const o=e?p.jsxs(ot,{open:e,fullWidth:!0,maxWidth:"md","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[p.jsx(it,{children:p.jsx("div",{style:{display:"flex",flexDirection:"row"},children:f&&p.jsxs("div",{style:{flex:70,width:"100%"},children:[p.jsxs("div",{style:{marginBottom:"10px",display:"flex",flexDirection:"row"},children:[p.jsx(Ae,{variant:"h4",children:f.label}),p.jsx("div",{style:{flex:1}}),f.hint&&p.jsx(oe,{sx:{p:0,px:2},color:"secondary",variant:"text",onClick:()=>{r(f.hint)},children:f.hint.label})]}),p.jsx(As,{style:{borderRadius:"12px",height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden"},children:p.jsx(we,{sx:{mt:1,border:""},children:p.jsx(vy,{editor:$,rows:15})})})]})})}),p.jsxs(At,{children:[p.jsx(oe,{onClick:n,children:t.cancelButtonName}),p.jsx(Nn,{disabled:t.disabled,variant:"contained",onClick:()=>s(u,f.name),children:t.confirmButtonName})]})]}):null;return yt.createPortal(o,a)};$u.propTypes={show:X.bool,dialogProps:X.object,onCancel:X.func,onConfirm:X.func,onInputHintDialogClicked:X.func};const Ru=({show:e,dialogProps:t,onCancel:n,onConfirm:r})=>{const s=document.getElementById("portal"),a=Bt(),[i,u]=E.useState(null),[l,f]=E.useState(0),[g,m]=E.useState({});E.useEffect(()=>(t.inputParam&&u(t.inputParam),t.data&&m(t.data),()=>{u(null),m({})}),[t]),E.useEffect(()=>(a(e?{type:In}:{type:st}),()=>a({type:st})),[e,a]);const v=e?p.jsxs(ot,{open:e,fullWidth:!0,maxWidth:"md","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[p.jsx(it,{children:p.jsx(p.Fragment,{children:i&&i.type.includes("conditionFunction")&&p.jsxs(p.Fragment,{children:[p.jsx(gu,{value:l,onChange:(_,I)=>f(I),"aria-label":"tabs",variant:"fullWidth",children:p.jsx(Tu,{children:i.tabs.map((_,I)=>p.jsx(Nu,{children:_.label},I))})}),i.tabs.filter(_=>_.display!==!1).map((_,I)=>p.jsx(Ii,{value:l,index:I,children:p.jsx(Rn,{disabled:_.disabled,inputParam:_,data:g,isAdditionalParams:!0,disablePadding:!0})},I))]})})}),p.jsxs(At,{children:[p.jsx(oe,{onClick:n,children:t.cancelButtonName}),p.jsx(Nn,{disabled:t.disabled,variant:"contained",onClick:()=>r(g,i,l),children:t.confirmButtonName})]})]}):null;return yt.createPortal(v,s)};Ru.propTypes={show:X.bool,dialogProps:X.object,onCancel:X.func,onConfirm:X.func};var io={},ky=Cs;Object.defineProperty(io,"__esModule",{value:!0});var zu=io.default=void 0,Sy=ky(Es()),Cy=p,Ey=(0,Sy.default)((0,Cy.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIosSharp");zu=io.default=Ey;var ao={},My=Cs;Object.defineProperty(ao,"__esModule",{value:!0});var ir=ao.default=void 0,jy=My(Es()),Ay=p,Ty=(0,jy.default)((0,Ay.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");ir=ao.default=Ty;const hi="/assets/logs_empty-BSF3_JNE.svg",Iy=e=>Ts.post("/prompts-list",e),Ny=e=>Ts.post("/load-prompt",e),pi={getAvailablePrompts:Iy,getPrompt:Ny},Dy=({children:e=""})=>e.split(`
`).reduce(function(t,n){return t.concat(n,p.jsx("br",{}))},[]),rs=Tt(e=>p.jsx(Ni,{disableGutters:!0,elevation:0,square:!0,...e}))(({theme:e})=>({border:`1px solid ${e.palette.divider}`,"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}})),ss=Tt(e=>p.jsx(Di,{expandIcon:p.jsx(zu,{sx:{fontSize:"0.9rem"}}),...e}))(({theme:e})=>({backgroundColor:e.palette.mode==="dark"?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(180deg)"},"& .MuiAccordionSummary-content":{marginLeft:e.spacing(1)}})),os=Tt(Li)(({theme:e})=>({padding:e.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"})),Hu=({promptType:e,show:t,onCancel:n,onSubmit:r})=>{var V;const s=document.getElementById("portal"),a=Bt(),i=Tn(L=>L.customization),u=ed(pi.getAvailablePrompts);E.useEffect(()=>(a(t?{type:In}:{type:st}),()=>a({type:st})),[t,a]),E.useEffect(()=>{e&&t&&(M(!0),u.request({tags:e==="template"?"StringPromptTemplate&":"ChatPromptTemplate&"}))},[e,t]),E.useEffect(()=>{var L;u.data&&u.data.repos&&(c(u.data.repos),(L=u.data.repos)!=null&&L.length&&R(0,u.data.repos),M(!1))},[u.data]);const g={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},m=[{id:101,name:"anthropic:claude-instant-1"},{id:102,name:"anthropic:claude-instant-1.2"},{id:103,name:"anthropic:claude-2"},{id:104,name:"google:palm-2-chat-bison"},{id:105,name:"google:palm-2-codechat-bison"},{id:106,name:"google:palm-2-text-bison"},{id:107,name:"meta:llama-2-13b-chat"},{id:108,name:"meta:llama-2-70b-chat"},{id:109,name:"openai:gpt-3.5-turbo"},{id:110,name:"openai:gpt-4"},{id:111,name:"openai:text-davinci-003"}],[v,_]=E.useState([]),I=[{id:201,name:"Agents"},{id:202,name:"Agent Stimulation"},{id:203,name:"Autonomous agents"},{id:204,name:"Classification"},{id:205,name:"Chatbots"},{id:206,name:"Code understanding"},{id:207,name:"Code writing"},{id:208,name:"Evaluation"},{id:209,name:"Extraction"},{id:210,name:"Interacting with APIs"},{id:211,name:"Multi-modal"},{id:212,name:"QA over documents"},{id:213,name:"Self-checking"},{id:214,name:"SQL"},{id:215,name:"Summarization"},{id:216,name:"Tagging"}],[A,T]=E.useState([]),C=[{id:301,name:"Chinese"},{id:302,name:"English"},{id:303,name:"French"},{id:304,name:"German"},{id:305,name:"Russian"},{id:306,name:"Spanish"}],[D,$]=E.useState([]),[o,c]=E.useState([]),[d,y]=E.useState({}),[w,x]=E.useState(["prompt"]),[k,M]=E.useState(!1),z=L=>(P,O)=>{const F=[...w];O?(F.push(L),x(F)):x(F.filter(G=>G!==L))},R=async(L,P=[])=>{const O=P.length?P[L]:o[L];if(!O.detailed){const F=await pi.getPrompt({promptName:O.full_name});F.data&&(O.detailed=F.data.templates)}y(O)},b=async()=>{let L=e==="template"?"StringPromptTemplate&":"ChatPromptTemplate&";v.forEach(P=>{L+=`tags=${P.name}&`}),A.forEach(P=>{L+=`tags=${P.name}&`}),D.forEach(P=>{L+=`tags=${P.name}&`}),M(!0),u.request({tags:L})},S=L=>{let P=[];return L.forEach(O=>{L.filter(F=>F.id===O.id).length===1&&P.push(O)}),P},h=L=>{const{target:{value:P}}=L;_(S(P))},j=L=>{const{target:{value:P}}=L;T(S(P))},H=L=>{const{target:{value:P}}=L;$(S(P))},N=t?p.jsxs(ot,{onClose:n,open:t,fullWidth:!0,maxWidth:"lg","aria-labelledby":"prompt-dialog-title","aria-describedby":"prompt-dialog-description",children:[p.jsxs(jt,{sx:{fontSize:"1rem"},id:"prompt-dialog-title",children:["Langchain Hub (",e==="template"?"PromptTemplate":"ChatPromptTemplate",")"]}),p.jsxs(it,{dividers:!0,sx:{p:1},children:[p.jsxs(we,{sx:{display:"flex",flexDirection:"row",p:2,pt:1,alignItems:"center"},children:[p.jsxs($t,{sx:{mr:1,width:"30%"},children:[p.jsx(_n,{size:"small",id:"model-checkbox-label",children:"Model"}),p.jsx(wn,{id:"model-checkbox",labelId:"model-checkbox-label",multiple:!0,size:"small",value:v,onChange:h,input:p.jsx(zt,{label:"Model"}),renderValue:L=>L.map(P=>P.name).join(", "),endAdornment:v.length?p.jsx($e,{sx:{mr:2},onClick:()=>_([]),children:p.jsx(ir,{style:{width:20,height:20}})}):!1,sx:{".MuiSvgIcon-root ":{fill:i.isDarkMode?"white !important":""}},MenuProps:g,children:m.map(L=>p.jsxs(Kt,{value:L,children:[p.jsx(Or,{id:L.id,checked:v.findIndex(P=>P.id===L.id)>=0}),p.jsx(Fr,{primary:L.name})]},L.id))})]}),p.jsxs($t,{sx:{mr:1,width:"30%"},children:[p.jsx(_n,{size:"small",id:"usecase-checkbox-label",children:"Usecase"}),p.jsx(wn,{autoWidth:!1,labelId:"usecase-checkbox-label",id:"usecase-checkbox",multiple:!0,size:"small",value:A,onChange:j,input:p.jsx(zt,{label:"Usecase"}),renderValue:L=>L.map(P=>P.name).join(", "),endAdornment:A.length?p.jsx($e,{sx:{mr:2},onClick:()=>T([]),children:p.jsx(ir,{style:{width:20,height:20}})}):!1,sx:{".MuiSvgIcon-root ":{fill:i.isDarkMode?"white !important":""}},MenuProps:g,children:I.map(L=>p.jsxs(Kt,{value:L,children:[p.jsx(Or,{id:L.id,checked:A.findIndex(P=>P.id===L.id)>=0}),p.jsx(Fr,{primary:L.name})]},L.id))})]}),p.jsxs($t,{sx:{mr:1,width:"30%"},children:[p.jsx(_n,{size:"small",id:"language-checkbox-label",children:"Language"}),p.jsx(wn,{labelId:"language-checkbox-label",id:"language-checkbox",multiple:!0,size:"small",value:D,onChange:H,input:p.jsx(zt,{label:"language"}),renderValue:L=>L.map(P=>P.name).join(", "),endAdornment:D.length?p.jsx($e,{sx:{mr:2},onClick:()=>$([]),children:p.jsx(ir,{style:{width:20,height:20}})}):!1,sx:{".MuiSvgIcon-root ":{fill:i.isDarkMode?"white !important":""}},MenuProps:g,children:C.map(L=>p.jsxs(Kt,{value:L,children:[p.jsx(Or,{id:L.id,checked:D.findIndex(P=>P.id===L.id)>=0}),p.jsx(Fr,{primary:L.name})]},L.id))})]}),p.jsx($t,{sx:{width:"10%"},children:p.jsx(oe,{disableElevation:!0,variant:"outlined",onClick:b,children:"Search"})})]}),k&&p.jsxs(Jn,{sx:{alignItems:"center",justifyContent:"center",width:"100%",pb:3},flexDirection:"column",children:[p.jsx(we,{sx:{p:5,height:"auto"},children:p.jsx("img",{style:{objectFit:"cover",height:"20vh",width:"auto"},src:hi,alt:"promptEmptySVG"})}),p.jsx("div",{children:"Please wait....loading Prompts"})]}),!k&&o&&o.length===0&&p.jsxs(Jn,{sx:{alignItems:"center",justifyContent:"center",width:"100%",pb:3},flexDirection:"column",children:[p.jsx(we,{sx:{p:5,height:"auto"},children:p.jsx("img",{style:{objectFit:"cover",height:"20vh",width:"auto"},src:hi,alt:"promptEmptySVG"})}),p.jsx("div",{children:"No Available Prompts"})]}),!k&&o&&o.length>0&&p.jsx(Jn,{sx:{alignItems:"center",justifyContent:"center",width:"100%"},flexDirection:"column",children:p.jsx(we,{sx:{width:"100%",p:2},children:p.jsxs(Wr,{xs:12,container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:[p.jsx(Wr,{xs:4,item:!0,sx:{textAlign:"left"},children:p.jsx(we,{sx:{width:"100%",maxWidth:360},children:p.jsx(po,{variant:"outlined",sx:{height:470,overflow:"auto",borderRadius:0},children:p.jsxs(go,{sx:{p:1},children:[p.jsx(Ae,{sx:{fontSize:10},color:"text.secondary",gutterBottom:!0,children:"Available Prompts"}),p.jsx(td,{component:"nav","aria-label":"secondary mailbox folder",children:o.map((L,P)=>p.jsx(nd,{selected:L.id===(d==null?void 0:d.id),onClick:()=>R(P),children:p.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[p.jsx(Ae,{sx:{fontSize:16,p:1,fontWeight:500},children:L.full_name}),p.jsx("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:5},children:L.tags.map((O,F)=>p.jsx(bi,{label:O,style:{marginRight:5,marginBottom:5}},F))})]})},L.id))})]})})})}),p.jsx(Wr,{xs:8,item:!0,sx:{textAlign:"left"},children:p.jsx(we,{sx:{display:"flex",flexDirection:"column"},children:p.jsx(po,{sx:{height:470,overflow:"auto"},children:p.jsxs(go,{sx:{p:.5},children:[p.jsxs(rs,{expanded:w.includes("prompt"),onChange:z("prompt"),children:[p.jsx(ss,{"aria-controls":"panel2d-content",expandIcon:p.jsx(Qn,{}),id:"panel2d-header",children:p.jsx(Ae,{children:"Prompt"})}),p.jsx(os,{children:p.jsx(Ae,{sx:{wordWrap:"true"},color:"text.primary",children:(V=d==null?void 0:d.detailed)==null?void 0:V.map(L=>p.jsxs(p.Fragment,{children:[p.jsx(Ae,{sx:{fontSize:12},color:"text.secondary",gutterBottom:!0,children:L.typeDisplay.toUpperCase()}),p.jsx(Ae,{children:p.jsx("p",{style:{whiteSpace:"pre-wrap -moz-pre-wrap -pre-wrap -o-pre-wrap",wordWrap:"break-word",fontFamily:"inherit",wordSpacing:"0.1rem",lineHeight:"1.5rem"},children:p.jsx(Dy,{children:L.template})})})]}))})})]}),p.jsxs(rs,{expanded:w.includes("description"),onChange:z("description"),children:[p.jsx(ss,{"aria-controls":"panel1d-content",expandIcon:p.jsx(Qn,{}),id:"panel1d-header",children:p.jsx(Ae,{children:"Description"})}),p.jsx(os,{children:p.jsx(Ae,{sx:{wordWrap:"true",wordSpacing:"0.1rem",lineHeight:"1.5rem"},color:"text.primary",children:d==null?void 0:d.description})})]}),p.jsxs(rs,{expanded:w.includes("readme"),onChange:z("readme"),children:[p.jsx(ss,{expandIcon:p.jsx(Qn,{}),"aria-controls":"panel3d-content",id:"panel3d-header",children:p.jsx(Ae,{children:"Readme"})}),p.jsx(os,{children:p.jsx("div",{style:{lineHeight:1.75,"& a":{display:"block",marginRight:"2.5rem",wordWrap:"break-word",color:"#16bed7",fontWeight:500},"& a:hover":{opacity:.8},"& code":{color:"#0ab126",fontWeight:500,whiteSpace:"pre-wrap !important"}},children:p.jsx($i,{children:d==null?void 0:d.readme})})})]})]})})})})]})})})]}),o&&o.length>0&&p.jsxs(At,{children:[p.jsx(oe,{onClick:n,children:"Cancel"}),p.jsx(Nn,{disabled:!(d!=null&&d.detailed),onClick:()=>r(d.detailed),variant:"contained",children:"Load"})]})]}):null;return yt.createPortal(N,s)};Hu.propTypes={promptType:X.string,show:X.bool,onCancel:X.func,onSubmit:X.func};const Ly=(e,t,n)=>Ts.get(`/fetch-links?url=${encodeURIComponent(e)}&relativeLinksMethod=${t}&limit=${n}`),$y={fetchLinks:Ly},uo=({show:e,dialogProps:t,onCancel:n,onSave:r})=>{const s=document.getElementById("portal"),a=Bt();Is();const i=(...c)=>a(Ns(...c)),u=(...c)=>a(Ds(...c)),[l,f]=E.useState(!1),[g,m]=E.useState([]),[v,_]=E.useState("");E.useEffect(()=>(t.url&&_(t.url),t.selectedLinks&&m(t.selectedLinks),()=>{f(!1),m([]),_("")}),[t]),E.useEffect(()=>(a(e?{type:In}:{type:st}),()=>a({type:st})),[e,a]);const I=async()=>{f(!0);try{const c=await $y.fetchLinks(v,t.relativeLinksMethod,t.limit);c.data&&(m(c.data.links),i({message:"Successfully fetched links",options:{key:new Date().getTime()+Math.random(),variant:"success",action:d=>p.jsx(oe,{style:{color:"white"},onClick:()=>u(d),children:p.jsx(nt,{})})}}))}catch(c){i({message:typeof c.response.data=="object"?c.response.data.message:c.response.data,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:d=>p.jsx(oe,{style:{color:"white"},onClick:()=>u(d),children:p.jsx(nt,{})})}})}f(!1)},A=(c,d)=>{const{value:y}=d.target,w=[...g];w[c]=y,m(w)},T=c=>{const d=[...g];d.splice(c,1),m(d)},C=()=>{m([...g,""])},D=()=>{m([])},$=()=>{r(v,g)},o=e?p.jsxs(ot,{onClose:n,open:e,fullWidth:!0,maxWidth:"sm","aria-labelledby":"manage-scraped-links-dialog-title","aria-describedby":"manage-scraped-links-dialog-description",children:[p.jsx(jt,{sx:{fontSize:"1rem"},id:"manage-scraped-links-dialog-title",children:t.title||`Manage Scraped Links - ${v}`}),p.jsxs(it,{children:[p.jsx(we,{sx:{mb:4},children:p.jsxs(Jn,{flexDirection:"row",gap:1,sx:{width:"100%"},children:[p.jsx($t,{sx:{mt:1,width:"100%",display:"flex",flexShrink:1},size:"small",children:p.jsx(zt,{id:"url",size:"small",type:"text",value:v,name:"url",onChange:c=>{_(c.target.value)}})}),p.jsx(oe,{disabled:!v,sx:{borderRadius:"12px",mt:1,display:"flex",flexShrink:0},size:"small",variant:"contained",onClick:I,children:"Fetch Links"})]})}),p.jsxs(we,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1.5},children:[p.jsx(Ae,{sx:{fontWeight:500},children:"Scraped Links"}),p.jsx(we,{sx:{width:"auto",flexGrow:1},children:p.jsx($e,{sx:{height:30,width:30,marginLeft:"8px"},size:"small",color:"primary",onClick:()=>C(),children:p.jsx(Ls,{})})}),g.length>0?p.jsx(oe,{sx:{height:"max-content",width:"max-content"},variant:"outlined",color:"error",title:"Clear All Links",onClick:D,startIcon:p.jsx(Bd,{}),children:"Clear All"}):null]}),p.jsxs(p.Fragment,{children:[l&&p.jsx(Ri,{open:l}),g.length>0?p.jsx(As,{style:{height:"100%",maxHeight:"320px",overflowX:"hidden",display:"flex",flexDirection:"column",gap:4},children:g.map((c,d)=>p.jsxs("div",{style:{display:"flex",width:"100%"},children:[p.jsx(we,{sx:{display:"flex",width:"100%"},children:p.jsx(zt,{sx:{width:"100%"},type:"text",onChange:y=>A(d,y),size:"small",value:c,name:`link_${d}`},d)}),p.jsx(we,{sx:{width:"auto",flexGrow:1},children:p.jsx($e,{sx:{height:30,width:30},size:"small",color:"error",onClick:()=>T(d),edge:"end",children:p.jsx(Hi,{})})})]},d))}):p.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:p.jsx(Ae,{sx:{my:2},children:"Links scraped from the URL will appear here"})})]})]}),p.jsxs(At,{children:[p.jsx(oe,{onClick:n,children:"Cancel"}),p.jsx(Nn,{variant:"contained",onClick:$,children:"Save"})]})]}):null;return yt.createPortal(o,s)};uo.propTypes={show:X.bool,dialogProps:X.object,onCancel:X.func,onSave:X.func};const Vu=({show:e,dialogProps:t,onCancel:n})=>{const r=document.getElementById("portal"),s=e?p.jsxs(ot,{onClose:n,open:e,fullWidth:!0,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[p.jsx(jt,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:t.label}),p.jsx(it,{children:p.jsx($i,{children:t==null?void 0:t.value})})]}):null;return yt.createPortal(s,r)};Vu.propTypes={show:X.bool,dialogProps:X.object,onCancel:X.func};const Pu=({open:e,onClose:t,onComplete:n})=>{const r=document.getElementById("portal"),s={"nvcr.io/nim/meta/llama-3.1-8b-instruct:1.8.0-RTX":{label:"Llama 3.1 8B Instruct",licenseUrl:"https://catalog.ngc.nvidia.com/orgs/nim/teams/meta/containers/llama-3.1-8b-instruct"},"nvcr.io/nim/deepseek-ai/deepseek-r1-distill-llama-8b:1.8.0-RTX":{label:"DeepSeek R1 Distill Llama 8B",licenseUrl:"https://catalog.ngc.nvidia.com/orgs/nim/teams/deepseek-ai/containers/deepseek-r1-distill-llama-8b"},"nvcr.io/nim/nv-mistralai/mistral-nemo-12b-instruct:1.8.0-rtx":{label:"Mistral Nemo 12B Instruct",licenseUrl:"https://catalog.ngc.nvidia.com/orgs/nim/teams/nv-mistralai/containers/mistral-nemo-12b-instruct"}},[a,i]=E.useState(0),[u,l]=E.useState(!1),[f,g]=E.useState(""),[m,v]=E.useState(null),[_,I]=E.useState("0"),[A,T]=E.useState("8080"),[C,D]=E.useState(!1),[$,o]=E.useState(null),c=["Download Installer","Pull Image","Start Container"],d=async()=>{var b;try{l(!0),await Ye.get("/api/v1/nvidia-nim/download-installer"),l(!1)}catch(S){let h=S.message;typeof S=="string"?h=S:(b=S.response)!=null&&b.data&&(h=S.response.data.message),alert("Failed to download installer: "+h),l(!1)}},y=async()=>{var b;try{l(!0),await Ye.get("/api/v1/nvidia-nim/preload"),l(!1),i(1)}catch(S){let h=S.message;typeof S=="string"?h=S:(b=S.response)!=null&&b.data&&(h=S.response.data.message),alert("Failed to preload: "+h),l(!1)}},w=async()=>{var b,S;try{l(!0);try{const N=await Ye.post("/api/v1/nvidia-nim/get-image",{imageTag:f});if(N.data&&N.data.tag===f){l(!1),i(2);return}}catch(N){if(((b=N.response)==null?void 0:b.status)!==404)throw N}const j=(await Ye.get("/api/v1/nvidia-nim/get-token")).data.access_token;await Ye.post("/api/v1/nvidia-nim/pull-image",{imageTag:f,apiKey:j});const H=setInterval(async()=>{var N;try{(await Ye.post("/api/v1/nvidia-nim/get-image",{imageTag:f})).data&&(clearInterval(H),l(!1),i(2))}catch(V){((N=V.response)==null?void 0:N.status)!==404&&(clearInterval(H),alert("Failed to check image status: "+V.message),l(!1))}},5e3);v(H)}catch(h){let j=h.message;typeof h=="string"?j=h:(S=h.response)!=null&&S.data&&(j=h.response.data.message),alert("Failed to pull image: "+j),l(!1)}},x=async()=>{var b,S,h;try{l(!0);try{const j=await Ye.post("/api/v1/nvidia-nim/get-container",{imageTag:f,port:parseInt(A)});if(j.data){o(j.data),D(!0),l(!1);return}}catch(j){if(((b=j.response)==null?void 0:b.status)===409){alert(`Port ${A} is already in use by another container. Please choose a different port.`),l(!1);return}if(((S=j.response)==null?void 0:S.status)!==404)throw j}await k()}catch(j){let H=j.message;typeof j=="string"?H=j:(h=j.response)!=null&&h.data&&(H=j.response.data.message),alert("Failed to check container status: "+H),l(!1)}},k=async()=>{var b;try{l(!0);const h=(await Ye.get("/api/v1/nvidia-nim/get-token")).data.access_token;await Ye.post("/api/v1/nvidia-nim/start-container",{imageTag:f,apiKey:h,nimRelaxMemConstraints:parseInt(_),hostPort:parseInt(A)});const j=setInterval(async()=>{var H;try{const N=await Ye.post("/api/v1/nvidia-nim/get-container",{imageTag:f,port:parseInt(A)});N.data&&(clearInterval(j),l(!1),n(N.data),t())}catch(N){((H=N.response)==null?void 0:H.status)!==404&&(clearInterval(j),alert("Failed to check container status: "+N.message),l(!1))}},5e3);v(j)}catch(S){let h=S.message;typeof S=="string"?h=S:(b=S.response)!=null&&b.data&&(h=S.response.data.message),alert("Failed to start container: "+h),l(!1)}},M=async()=>{var b;try{l(!0);const S=setInterval(async()=>{var h;try{const j=await Ye.post("/api/v1/nvidia-nim/get-container",{imageTag:f,port:parseInt(A)});j.data&&(clearInterval(S),l(!1),n(j.data),t())}catch(j){((h=j.response)==null?void 0:h.status)!==404&&(clearInterval(S),alert("Failed to check container status: "+j.message),l(!1))}},5e3);v(S)}catch(S){let h=S.message;typeof S=="string"?h=S:(b=S.response)!=null&&b.data&&(h=S.response.data.message),alert("Failed to check container status: "+h),l(!1)}},z=()=>{if(a===1&&!f){alert("Please enter an image tag");return}if(a===2){const b=parseInt(A);if(isNaN(b)||b<1||b>65535){alert("Please enter a valid port number between 1 and 65535");return}}switch(a){case 0:y();break;case 1:w();break;case 2:x();break;default:i(b=>b+1)}};E.useEffect(()=>()=>{m&&clearInterval(m)},[m]),E.useEffect(()=>{e||(i(0),l(!1),g(""))},[e]);const R=e?p.jsxs(p.Fragment,{children:[p.jsxs(ot,{open:e,children:[p.jsx(jt,{children:"NIM Setup"}),p.jsxs(it,{children:[p.jsx(Ad,{activeStep:a,children:c.map(b=>p.jsx(Td,{children:p.jsx(Id,{children:b})},b))}),a===0&&p.jsxs("div",{style:{marginTop:20},children:[p.jsx("p",{style:{marginBottom:20},children:"Would you like to download the NIM installer? Click Next if it has been installed"}),u&&p.jsx(Ur,{})]}),a===1&&p.jsxs("div",{children:[p.jsxs($t,{fullWidth:!0,sx:{mt:2},children:[p.jsx(_n,{children:"Model"}),p.jsx(wn,{label:"Model",value:f,onChange:b=>g(b.target.value),children:Object.entries(s).map(([b,{label:S}])=>p.jsx(Kt,{value:b,children:S},b))})]}),f&&p.jsx(oe,{variant:"text",size:"small",sx:{mt:1},onClick:()=>window.open(s[f].licenseUrl,"_blank"),children:"View License"}),u&&p.jsxs("div",{children:[p.jsx("div",{style:{marginBottom:20}}),p.jsx(Ur,{}),p.jsx("p",{children:"Pulling image..."})]})]}),a===2&&p.jsx("div",{children:u?p.jsxs(p.Fragment,{children:[p.jsx("div",{style:{marginBottom:20}}),p.jsx(Ur,{}),p.jsx("p",{children:"Starting container..."})]}):p.jsxs(p.Fragment,{children:[p.jsxs($t,{fullWidth:!0,sx:{mt:2},children:[p.jsx(_n,{children:"Relax Memory Constraints"}),p.jsxs(wn,{label:"Relax Memory Constraints",value:_,onChange:b=>I(b.target.value),children:[p.jsx(Kt,{value:"1",children:"Yes"}),p.jsx(Kt,{value:"0",children:"No"})]})]}),p.jsx(Oi,{fullWidth:!0,type:"number",label:"Host Port",value:A,onChange:b=>T(b.target.value),inputProps:{min:1,max:65535},sx:{mt:2}}),p.jsx("p",{style:{marginTop:20},children:"Click Next to start the container."})]})})]}),p.jsxs(At,{children:[p.jsx(oe,{onClick:t,variant:"outline",children:"Cancel"}),a===0&&p.jsx(oe,{onClick:z,variant:"outline",color:"secondary",children:"Next"}),p.jsx(oe,{onClick:a===0?d:z,disabled:u||a===2&&(!_||!A),children:a===0?"Download":"Next"})]})]}),p.jsxs(ot,{open:C,onClose:()=>D(!1),children:[p.jsx(jt,{children:"Container Already Exists"}),p.jsxs(it,{children:[p.jsx("p",{children:"A container for this image already exists:"}),p.jsxs("div",{children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Name:"})," ",($==null?void 0:$.name)||"N/A"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Status:"})," ",($==null?void 0:$.status)||"N/A"]})]}),p.jsx("p",{children:"You can:"}),p.jsxs("ul",{children:[p.jsx("li",{children:"Use the existing container (recommended)"}),p.jsx("li",{children:"Change the port and try again"})]})]}),p.jsxs(At,{children:[p.jsx(oe,{onClick:()=>{D(!1),o(null)},children:"Cancel"}),p.jsx(oe,{onClick:()=>{D(!1),M()},children:"Use Existing"})]})]})]}):null;return yt.createPortal(R,r)};Pu.propTypes={open:X.bool,onClose:X.func,onComplete:X.func};const Ry=[{text:"Summarize a document",img:p.jsx(Ud,{})},{text:"Translate the language",img:p.jsx($d,{})},{text:"Write me an email",img:p.jsx(Fd,{})},{text:"Convert the code to another language",img:p.jsx(Ed,{})},{text:"Research and generate a report",img:p.jsx(qd,{})},{text:"Plan a trip",img:p.jsx(rd,{})}],Bu=({show:e,dialogProps:t,onCancel:n,onConfirm:r})=>{const s=document.getElementById("portal"),[a,i]=E.useState(""),[u,l]=E.useState(""),[f,g]=E.useState(!1),m=Bt();Is();const v=(...T)=>m(Ns(...T)),_=(...T)=>m(Ds(...T)),I=async()=>{try{g(!0);const T={name:t.data.selectedChatModel.name,inputs:t.data.selectedChatModel.inputs},C=await Fi.generateAssistantInstruction({selectedChatModel:T,task:a});C.data&&(g(!1),C.data.content&&l(C.data.content))}catch(T){g(!1),v({message:typeof T.response.data=="object"?T.response.data.message:T.response.data,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:C=>p.jsx(oe,{style:{color:"white"},onClick:()=>_(C),children:p.jsx(nt,{})})}})}};E.useEffect(()=>{e||(i(""),l(""))},[e]);const A=e?p.jsx(p.Fragment,{children:p.jsxs(ot,{fullWidth:!0,maxWidth:"md",open:e,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[p.jsx(jt,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:t.title}),p.jsxs(it,{children:[p.jsx("span",{children:t.description}),p.jsx("div",{style:{display:"block",flexDirection:"row",width:"100%",marginTop:"15px"},children:Ry.map((T,C)=>p.jsx(oe,{size:"small",sx:{textTransform:"none",mr:1,mb:1,borderRadius:"16px"},variant:"outlined",color:"inherit",onClick:()=>{i(T.text),l("")},startIcon:T.img,children:T.text},C))}),!u&&p.jsx(zt,{sx:{mt:2,width:"100%"},type:"text",multiline:!0,rows:12,disabled:f,value:a,placeholder:"Describe your task here",onChange:T=>i(T.target.value)}),u&&p.jsx(zt,{sx:{mt:2,width:"100%"},type:"text",multiline:!0,rows:12,value:u,onChange:T=>l(T.target.value)})]}),p.jsxs(At,{sx:{pb:3,pr:3},children:[!u&&p.jsx(Nd,{loading:f,variant:"contained",onClick:()=>{I()},startIcon:p.jsx(ds,{size:20}),children:"Generate"}),u&&p.jsx(oe,{variant:"outlined",startIcon:p.jsx(Dd,{size:20}),onClick:()=>{l("")},children:"Back"}),u&&p.jsx(Nn,{variant:"contained",onClick:()=>r(u),children:"Apply"})]})]})}):null;return yt.createPortal(A,s)};Bu.propTypes={show:X.bool,dialogProps:X.object,onConfirm:X.func,onCancel:X.func};const gi=["selectedTool","selectedAssistant"],mi=Tt(({className:e,...t})=>p.jsx(Wi,{...t,classes:{popper:e}}))({[`& .${zd.tooltip}`]:{maxWidth:500}}),zy=Tt(ud)({boxShadow:"0px 8px 10px -5px rgb(0 0 0 / 20%), 0px 16px 24px 2px rgb(0 0 0 / 14%), 0px 6px 30px 5px rgb(0 0 0 / 12%)",borderRadius:"10px",[`& .${Vd.listbox}`]:{boxSizing:"border-box","& ul":{padding:10,margin:10}}}),Hy=new ug.Converter({simplifiedAutoLink:!0,strikethrough:!0,tables:!0,tasklists:!0}),Rn=({inputAnchor:e,inputParam:t,data:n,disabled:r=!1,isAdditionalParams:s=!1,disablePadding:a=!1,parentParamForArray:i=null,arrayIndex:u=null,onHideNodeInfoDialog:l,onCustomDataChange:f})=>{const g=js(),m=Tn(B=>B.customization),v=E.useRef(null),{reactFlowInstance:_,deleteEdge:I,onNodeDataChange:A}=E.useContext(yr),T=ig();Is();const C=Bt(),D=(...B)=>C(Ns(...B)),$=(...B)=>C(Ds(...B)),[o,c]=E.useState(0),[d,y]=E.useState(!1),[w,x]=E.useState({}),[k,M]=E.useState(!1),[z,R]=E.useState({}),[b,S]=E.useState(""),[h,j]=E.useState({}),[H,N]=E.useState(Date.now().toString()),[V,L]=E.useState(!1),[P,O]=E.useState({}),[F,G]=E.useState(!1),[ee,K]=E.useState(!1),[q,re]=E.useState({}),[te,fe]=E.useState(!1),[ke,Me]=E.useState({}),[Ne,de]=E.useState(!1),[Ve,ie]=E.useState({}),[Q,je]=E.useState(!1),[ut,It]=E.useState(0),[bt,Pe]=E.useState(!1),[Ke,wt]=E.useState([]),[dt,ct]=E.useState([]),[ue,Be]=E.useState({}),[_t,ve]=E.useState(null),[De,Le]=E.useState(!1),[lt,Oe]=E.useState(!1),[Xe,ze]=E.useState({}),Fe=({inputParam:B,newValue:U})=>{n.inputs[B.name]=U,["boolean","asyncOptions","asyncMultiOptions","options","multiOptions"].includes(B.type)&&(f?f({nodeId:n.id,inputParam:B,newValue:U}):A({nodeId:n.id,inputParam:B,newValue:U}))},vt=B=>{const U={...B};Me(U),fe(!0)},Nt=(B,U,Z)=>{const Y={value:B,inputParam:U,disabled:r,languageType:Z,nodes:(_==null?void 0:_.getNodes())||[],edges:(_==null?void 0:_.getEdges())||[],nodeId:n.id,confirmButtonName:"Save",cancelButtonName:"Cancel"};U.acceptVariable?(R(Y),M(!0)):(x(Y),y(!0))},dn=B=>{ie({data:n,inputParam:B,disabled:r,confirmButtonName:"Save",cancelButtonName:"Cancel"}),de(!0),l(!0)},zn=()=>{G(!0)},ft=B=>{G(!1);for(const U of B)Object.prototype.hasOwnProperty.call(n.inputs,U.type)&&(n.inputs[U.type]=U.template)},Mr=(B,U,Z,Y)=>{re({url:B,relativeLinksMethod:Z,limit:Y,selectedLinks:U,confirmButtonName:"Save",cancelButtonName:"Cancel"}),K(!0)},jr=(B,U)=>{K(!1),n.inputs.url=B,n.inputs.selectedLinks=U},Hn=B=>{if(!B)return"";const U={},Z=od(B);for(const Y of Z)U[Y]="";return Object.keys(U).length?JSON.stringify(U):""},Ar=(B,U)=>{const Z=[];for(const Y of B){const ae=_?_.getNodes().find(he=>he.data.name==="seqState"):null;if(Y.type==="asyncSingleSelect"&&Y.loadMethod&&Y.loadMethod.includes("loadStateKeys"))if(ae){const he=ae.data.inputParams.find(ce=>ce.tabIdentifier);if(he&&he.tabs.length>0){const ce=he.tabIdentifier,Te=ae.data.inputs[`${ce}_${ae.data.id}`]||he.default||he.tabs[0].name,pe=ae.data.inputs[Te];if(pe)try{const be=JSON.parse(pe),le=Array.isArray(be)?be.map(xe=>xe.key):Object.keys(be);Z.push({...Y,field:Y.field,headerName:Y.headerName,type:"singleSelect",editable:!0,valueOptions:le})}catch(be){console.error("Error parsing stateMemory",be)}}}else Z.push({...Y,field:Y.field,headerName:Y.headerName,type:"singleSelect",editable:!0,valueOptions:[]});else if(Y.type==="freeSolo"){const he=[];if(Y.loadMethod&&Y.loadMethod.includes("getPreviousMessages")){const ce=ar((_==null?void 0:_.getNodes())||[],(_==null?void 0:_.getEdges())||[],n.id,U.id);for(const Te of ce)he.push({value:`$${Te.id}`,label:`Output from ${Te.data.id}`})}if(Y.loadMethod&&Y.loadMethod.includes("loadStateKeys")&&ae){const ce=ae.data.inputParams.find(Te=>Te.tabIdentifier);if(ce&&ce.tabs.length>0){const Te=ce.tabIdentifier,pe=ae.data.inputs[`${Te}_${ae.data.id}`]||ce.default||ce.tabs[0].name,be=ae.data.inputs[pe];if(be)try{const le=JSON.parse(be),xe=Array.isArray(le)?le.map(We=>We.key):Object.keys(le);for(const We of xe)he.push({value:`$flow.state.${We}`,label:`Value from ${We}`})}catch(le){console.error("Error parsing stateMemory",le)}}}Z.push({...Y,field:Y.field,headerName:Y.headerName,renderEditCell:({id:ce,field:Te,value:pe})=>{const be=fd();return p.jsx(Hd,{id:Y.field,freeSolo:!0,fullWidth:!0,options:[...he,...Y.valueOptions],value:pe,PopperComponent:zy,renderInput:le=>p.jsx(Oi,{...le}),renderOption:(le,xe)=>p.jsx("li",{...le,children:p.jsxs("div",{children:[p.jsx("strong",{children:xe.value}),p.jsx("br",{}),p.jsx("small",{children:xe.label})]})}),getOptionLabel:le=>typeof le=="string"?le:le.value,onInputChange:(le,xe)=>{be.current.setEditCellValue({id:ce,field:Te,value:xe})},sx:{"& .MuiInputBase-root":{height:"50px"},"& .MuiOutlinedInput-root":{border:"none"},"& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{border:"none"}}})}})}else Z.push(Y)}return Z},Vn=B=>{const U=[];if(B.loadPreviousNodes){const Z=ar((_==null?void 0:_.getNodes())||[],(_==null?void 0:_.getEdges())||[],n.id,B.id);for(const Y of Z)U.push({name:`{{ ${Y.data.id} }}`,label:`{{ ${Y.data.id} }}`,description:`Output from ${Y.data.id}`})}return[...U,...B.options]},cn=B=>B.tabs.findIndex(U=>U.name===n.inputs[`${B.tabIdentifier}_${n.id}`])>=0?B.tabs.findIndex(U=>U.name===n.inputs[`${B.tabIdentifier}_${n.id}`]):ut,Tr=(B,U)=>{let Z=B;if(U.name==="promptValues"&&!B){const ae=(n.inputs.template??"")+(n.inputs.systemMessagePrompt??"")+(n.inputs.humanMessagePrompt??"")+(n.inputs.workerPrompt??"");Z=Hn(ae)}const Y={value:Z,inputParam:U,nodes:(_==null?void 0:_.getNodes())||[],edges:(_==null?void 0:_.getEdges())||[],nodeId:n.id,data:n};O(Y),L(!0)},Ir=(B,U)=>{n.inputs[U]=B,y(!1)},Nr=(B,U)=>{n.inputs[U]=B,M(!1)},Dr=(B,U,Z)=>{n.inputs[`${U.tabIdentifier}_${n.id}`]=U.tabs[Z].name;const Y=(_==null?void 0:_.getEdges().filter(ce=>ce.source===n.id))||[],{outputAnchors:ae,toBeRemovedEdgeIds:he}=id(B.inputs[U.tabs[Z].name],n.id,Y,U.tabs[Z].type==="datagrid");if(ae){n.outputAnchors=ae;for(const ce of he)I(ce);de(!1),l(!1)}},Lr=(B,U)=>{B==="selectedTool"?j({title:"Edit Tool",type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",toolId:U}):B==="selectedAssistant"&&j({title:"Edit Assistant",type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",assistantId:U}),S(B)},$r=B=>{B==="selectedTool"?j({title:"Add New Tool",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add"}):B==="selectedAssistant"&&j({title:"Add New Assistant",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add"}),S(B)},Pn=(B="")=>{B?(n.inputs[b]=B,Fe({inputParam:{name:b},newValue:B}),N(Date.now().toString())):(n.inputs[b]="",Fe({inputParam:{name:b},newValue:""})),j({}),S("")},Rr=B=>{B&&(n.inputs.basePath=B.baseUrl,n.inputs.modelName=B.image)},Bn=async()=>{try{const B=await Fi.getChatModels();if(B.data){const U=B.data??[],Z=U.map(Y=>({name:Y.name,label:Y.label,description:Y.description,imageSrc:`${ad}/api/v1/node-icon/${Y.name}`}));wt(U),ct(Z)}}catch(B){console.error("Error loading chat models:",B)}},On=()=>{let B=!0;if(ue&&Object.keys(ue).length>0){const U=(ue.inputParams??[]).filter(Z=>!Z.hidden);for(const Z of U)if(!Z.optional&&(!ue.inputs[Z.name]||!ue.credential)){if(Z.type==="credential"&&!ue.credential){B=!1;break}else if(Z.type!=="credential"&&!ue.inputs[Z.name]){B=!1;break}}}return B},ln=()=>{D({message:"Please fill in all mandatory fields.",options:{key:new Date().getTime()+Math.random(),variant:"warning",action:B=>p.jsx(oe,{style:{color:"white"},onClick:()=>$(B),children:p.jsx(nt,{})})}})},zr=async B=>{var he,ce,Te;if(!B){D({message:"Please select a knowledge base",options:{key:new Date().getTime()+Math.random(),variant:"error",action:pe=>p.jsx(oe,{style:{color:"white"},onClick:()=>$(pe),children:p.jsx(nt,{})})}});return}if(B=B.split(":")[0],!On()){ln();return}const Z=_==null?void 0:_.getNodes().find(pe=>pe.id===n.id),Y=(he=Z==null?void 0:Z.data)==null?void 0:he.inputs,ae=(Y==null?void 0:Y.llmModel)||(Y==null?void 0:Y.agentModel)||(Y==null?void 0:Y.humanInputModel);if(ae){try{Le(!0);const pe={name:ae,inputs:(Y==null?void 0:Y.llmModelConfig)||(Y==null?void 0:Y.agentModelConfig)||(Y==null?void 0:Y.humanInputModelConfig)},be=await bo.generateDocStoreToolDesc(B,{selectedChatModel:pe});if(be.data){Le(!1);const le=((ce=be.data)==null?void 0:ce.content)||((Te=be.data.kwargs)==null?void 0:Te.content);n.inputs[t.name]=le,D({message:"Document Store Tool Description generated successfully",options:{key:new Date().getTime()+Math.random(),variant:"success",action:xe=>p.jsx(oe,{style:{color:"white"},onClick:()=>$(xe),children:p.jsx(nt,{})})}})}}catch(pe){console.error("Error generating doc store tool desc",pe),Le(!1),D({message:typeof pe.response.data=="object"?pe.response.data.message:pe.response.data,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:be=>p.jsx(oe,{style:{color:"white"},onClick:()=>$(be),children:p.jsx(nt,{})})}})}return}await Bn(),ve(()=>async pe=>{var be,le;try{Le(!0);const xe={name:pe.name,inputs:pe.inputs},We=await bo.generateDocStoreToolDesc(B,{selectedChatModel:xe});if(We.data){Le(!1);const Fn=((be=We.data)==null?void 0:be.content)||((le=We.data.kwargs)==null?void 0:le.content);n.inputs[t.name]=Fn,D({message:"Document Store Tool Description generated successfully",options:{key:new Date().getTime()+Math.random(),variant:"success",action:Vr=>p.jsx(oe,{style:{color:"white"},onClick:()=>$(Vr),children:p.jsx(nt,{})})}})}}catch(xe){console.error("Error generating doc store tool desc",xe),Le(!1),D({message:typeof xe.response.data=="object"?xe.response.data.message:xe.response.data,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:We=>p.jsx(oe,{style:{color:"white"},onClick:()=>$(We),children:p.jsx(nt,{})})}})}}),Pe(!0)},Hr=async()=>{var ae;if(!On()){ln();return}const U=_==null?void 0:_.getNodes().find(he=>he.id===n.id),Z=(ae=U==null?void 0:U.data)==null?void 0:ae.inputs,Y=(Z==null?void 0:Z.llmModel)||(Z==null?void 0:Z.agentModel)||(Z==null?void 0:Z.humanInputModel);if(Y){ze({title:"Generate Instructions",description:"You can generate a prompt template by sharing basic details about your task.",data:{selectedChatModel:{name:Y,inputs:(Z==null?void 0:Z.llmModelConfig)||(Z==null?void 0:Z.agentModelConfig)||(Z==null?void 0:Z.humanInputModelConfig)}}}),Oe(!0);return}await Bn(),ve(()=>async he=>{ze({title:"Generate Instructions",description:"You can generate a prompt template by sharing basic details about your task.",data:{selectedChatModel:he}}),Oe(!0)}),Pe(!0)};return E.useEffect(()=>{v.current&&v.current.offsetTop&&v.current.clientHeight&&(c(v.current.offsetTop+v.current.clientHeight/2),T(n.id))},[n.id,v,T]),E.useEffect(()=>{T(n.id)},[n.id,o,T]),p.jsxs("div",{ref:v,children:[e&&p.jsxs(p.Fragment,{children:[p.jsx(mi,{placement:"left",title:e.type,children:p.jsx(sn,{type:"target",position:J.Left,id:e.id,isValidConnection:B=>mo(B,_),style:{height:10,width:10,backgroundColor:n.selected?g.palette.primary.main:g.palette.text.secondary,top:o}},e.id)}),p.jsx(we,{sx:{p:2},children:p.jsxs(Ae,{children:[e.label,!e.optional&&p.jsx("span",{style:{color:"red"},children:" *"}),e.description&&p.jsx(as,{style:{marginLeft:10},title:e.description})]})})]}),(t&&!t.additionalParams||s)&&p.jsxs(p.Fragment,{children:[t.acceptVariable&&!s&&p.jsx(mi,{placement:"left",title:t.type,children:p.jsx(sn,{type:"target",position:J.Left,id:t.id,isValidConnection:B=>mo(B,_),style:{height:10,width:10,backgroundColor:n.selected?g.palette.primary.main:g.palette.text.secondary,top:o}},t.id)}),p.jsxs(we,{sx:{p:a?0:2},children:[(n.name==="promptTemplate"||n.name==="chatPromptTemplate")&&(t.name==="template"||t.name==="systemMessagePrompt")&&p.jsxs(p.Fragment,{children:[p.jsx(oe,{style:{display:"flex",flexDirection:"row",width:"100%"},disabled:r,sx:{borderRadius:25,width:"100%",mb:2,mt:0},variant:"outlined",onClick:()=>zn(),endIcon:p.jsx(du,{}),children:"Langchain Hub"}),p.jsx(Hu,{promptType:t.name,show:F,onCancel:()=>G(!1),onSubmit:ft})]}),n.name==="chatNvidiaNIM"&&t.name==="modelName"&&p.jsx(p.Fragment,{children:p.jsx(oe,{style:{display:"flex",flexDirection:"row",width:"100%"},sx:{borderRadius:"12px",width:"100%",mb:2,mt:-1},variant:"outlined",onClick:()=>je(!0),children:"Setup NIM Locally"})}),p.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[p.jsxs(Ae,{children:[t.label,!t.optional&&p.jsx("span",{style:{color:"red"},children:" *"}),t.description&&p.jsx(as,{style:{marginLeft:10},title:t.description})]}),p.jsx("div",{style:{flexGrow:1}}),t.hint&&!s&&p.jsx($e,{size:"small",sx:{height:25,width:25},title:t.hint.label,color:"secondary",onClick:()=>vt(t.hint),children:p.jsx(vo,{})}),t.hint&&s&&p.jsx(oe,{sx:{p:0,px:2},color:"secondary",variant:"text",onClick:()=>{vt(t.hint)},startIcon:p.jsx(vo,{size:17}),children:t.hint.label}),t.acceptVariable&&t.type==="string"&&p.jsx(Wi,{title:"Type {{ to select variables",children:p.jsx(sd,{size:20,style:{color:"teal"}})}),t.generateDocStoreDescription&&p.jsx($e,{title:"Generate knowledge base description",sx:{height:25,width:25},size:"small",color:"secondary",onClick:()=>zr(n.inputs.documentStore),children:p.jsx(ds,{})}),t.generateInstruction&&p.jsx($e,{title:"Generate instructions",sx:{height:25,width:25,ml:.5},size:"small",color:"secondary",onClick:()=>Hr(),children:p.jsx(ds,{})}),(t.type==="string"&&t.rows||t.type==="code")&&p.jsx($e,{size:"small",sx:{height:25,width:25,ml:.5},title:"Expand",color:"primary",onClick:()=>Nt(n.inputs[t.name]??t.default??"",t),children:p.jsx(Vi,{})})]}),t.warning&&p.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",borderRadius:10,background:"rgb(254,252,191)",padding:10,marginTop:10,marginBottom:10},children:[p.jsx(Pi,{size:30,color:"orange"}),p.jsx("span",{style:{color:"rgb(116,66,16)",marginLeft:10},children:hd(t.warning)})]}),t.type==="credential"&&p.jsx(_i,{disabled:r,data:n,inputParam:t,onSelect:B=>{n.credential=B,n.inputs[qt]=B}}),t.type==="tabs"&&p.jsxs(p.Fragment,{children:[p.jsx(gu,{value:cn(t),onChange:(B,U)=>{It(U),n.inputs[`${t.tabIdentifier}_${n.id}`]=t.tabs[U].name},"aria-label":"tabs",variant:"fullWidth",defaultValue:cn(t),children:p.jsx(Tu,{children:t.tabs.map((B,U)=>p.jsx(Nu,{children:B.label},U))})}),t.tabs.filter(B=>B.display!==!1).map((B,U)=>p.jsx(Ii,{value:cn(t),index:U,children:p.jsx(Rn,{disabled:B.disabled,inputParam:B,data:n,isAdditionalParams:!0,disablePadding:!0})},U))]}),t.type==="file"&&p.jsx(Si,{disabled:r,fileType:t.fileType||"*",onChange:B=>n.inputs[t.name]=B,value:n.inputs[t.name]??t.default??"Choose a file to upload"}),t.type==="boolean"&&p.jsx(Ci,{disabled:r,onChange:B=>Fe({inputParam:t,newValue:B}),value:n.inputs[t.name]??t.default??!1}),t.type==="datagrid"&&p.jsx(Vs,{disabled:r,columns:Ar(t.datagrid,t),hideFooter:!0,rows:n.inputs[t.name]??JSON.stringify(t.default)??[],onChange:B=>n.inputs[t.name]=B}),t.type==="code"&&p.jsxs(p.Fragment,{children:[p.jsx("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},children:t.codeExample&&p.jsx(oe,{variant:"outlined",onClick:()=>{n.inputs[t.name]=t.codeExample,N(Date.now().toString())},children:"See Example"})}),p.jsx("div",{style:{marginTop:"10px",border:"1px solid",borderColor:g.palette.grey[900]+25,borderRadius:"6px",height:t.rows?"100px":"200px"},children:p.jsx(Ei,{disabled:r,value:n.inputs[t.name]??t.default??"",height:t.rows?"100px":"200px",theme:m.isDarkMode?"dark":"light",lang:"js",placeholder:t.placeholder,onValueChange:B=>n.inputs[t.name]=B,basicSetup:{highlightActiveLine:!1,highlightActiveLineGutter:!1}})},`${H}_${n.id}}`)]}),(t.type==="string"||t.type==="password"||t.type==="number")&&(t!=null&&t.acceptVariable&&(window.location.href.includes("v2/agentcanvas")||window.location.href.includes("v2/marketplace"))?p.jsx(Su,{placeholder:t.placeholder,disabled:r,inputParam:t,onChange:B=>n.inputs[t.name]=B,value:n.inputs[t.name]??t.default??"",nodes:_?_.getNodes():[],edges:_?_.getEdges():[],nodeId:n.id},n.inputs[t.name]):p.jsx(xi,{placeholder:t.placeholder,disabled:r,inputParam:t,onChange:B=>n.inputs[t.name]=B,value:n.inputs[t.name]??t.default??"",nodes:[],edges:[],nodeId:n.id},n.inputs[t.name])),t.type==="json"&&p.jsxs(p.Fragment,{children:[!(t!=null&&t.acceptVariable)&&p.jsx($s,{disabled:r,onChange:B=>n.inputs[t.name]=B,value:n.inputs[t.name]||t.default||Hn(n.inputs.workerPrompt)||"",isSequentialAgent:n.category==="Sequential Agents",isDarkMode:m.isDarkMode}),(t==null?void 0:t.acceptVariable)&&p.jsxs(p.Fragment,{children:[p.jsx(oe,{sx:{borderRadius:25,width:"100%",mb:0,mt:2},variant:"outlined",disabled:r,onClick:()=>Tr(n.inputs[t.name]??"",t),children:t.label}),p.jsx(Lu,{show:V,dialogProps:P,onCancel:()=>L(!1),onChange:B=>n.inputs[t.name]=B})]})]}),t.type==="options"&&p.jsx("div",{children:p.jsx(is,{disabled:r,name:t.name,options:Vn(t),freeSolo:t.freeSolo,onSelect:B=>Fe({inputParam:t,newValue:B}),value:n.inputs[t.name]??t.default??"choose an option"})},`${n.id}_${JSON.stringify(n.inputs[t.name])}`),t.type==="multiOptions"&&p.jsx("div",{children:p.jsx(wi,{disabled:r,name:t.name,options:Vn(t),onSelect:B=>Fe({inputParam:t,newValue:B}),value:n.inputs[t.name]??t.default??"choose an option"})},`${n.id}_${JSON.stringify(n.inputs[t.name])}`),(t.type==="asyncOptions"||t.type==="asyncMultiOptions")&&p.jsxs(p.Fragment,{children:[n.inputParams.length===1&&p.jsx("div",{style:{marginTop:10}}),p.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[p.jsx(vi,{disabled:r,name:t.name,nodeData:n,value:n.inputs[t.name]??t.default??"choose an option",freeSolo:t.freeSolo,multiple:t.type==="asyncMultiOptions",isCreateNewOption:gi.includes(t.name),onSelect:B=>{t.loadConfig&&N(Date.now().toString()),Fe({inputParam:t,newValue:B})},onCreateNew:()=>$r(t.name)}),gi.includes(t.name)&&n.inputs[t.name]&&p.jsx($e,{title:"Edit",color:"primary",size:"small",onClick:()=>Lr(t.name,n.inputs[t.name]),children:p.jsx(Ld,{})}),t.refresh&&p.jsx($e,{title:"Refresh",color:"primary",size:"small",onClick:()=>N(Date.now().toString()),children:p.jsx(Bi,{})})]},`${H}_${n.id}_${JSON.stringify(n.inputs[t.name])}`)]}),t.type==="array"&&p.jsx(co,{inputParam:t,data:n,disabled:r}),t.type.includes("conditionFunction")&&p.jsx(p.Fragment,{children:p.jsx(oe,{style:{display:"flex",flexDirection:"row",width:"100%"},sx:{borderRadius:"12px",width:"100%",mt:1},variant:"outlined",onClick:()=>dn(t),children:t.label})}),(n.name==="cheerioWebScraper"||n.name==="puppeteerWebScraper"||n.name==="playwrightWebScraper")&&t.name==="url"&&p.jsxs(p.Fragment,{children:[p.jsx(oe,{style:{display:"flex",flexDirection:"row",width:"100%"},disabled:r,sx:{borderRadius:"12px",width:"100%",mt:1},variant:"outlined",onClick:()=>Mr(n.inputs[t.name]??t.default??"",n.inputs.selectedLinks,n.inputs.relativeLinksMethod??"webCrawl",parseInt(n.inputs.limit)??0),children:"Manage Links"}),p.jsx(uo,{show:ee,dialogProps:q,onCancel:()=>K(!1),onSave:jr})]}),t.loadConfig&&n&&n.inputs&&n.inputs[t.name]&&p.jsx(p.Fragment,{children:p.jsx(Du,{data:n,inputParam:t,disabled:r,arrayIndex:u,parentParamForArray:i},`${n.id}_${JSON.stringify(n.inputs[t.name])}_${u}_${i==null?void 0:i.name}`)})]})]}),p.jsx(Md,{show:b==="selectedTool",dialogProps:h,onCancel:()=>S(""),onConfirm:Pn}),p.jsx(jd,{show:b==="selectedAssistant",dialogProps:h,onCancel:()=>S(""),onConfirm:Pn}),p.jsx(zi,{show:d,dialogProps:w,onCancel:()=>y(!1),onConfirm:(B,U)=>Ir(B,U),onInputHintDialogClicked:vt}),p.jsx($u,{show:k,dialogProps:z,onCancel:()=>M(!1),onConfirm:(B,U)=>Nr(B,U),onInputHintDialogClicked:vt}),p.jsx(Ru,{show:Ne,dialogProps:Ve,onCancel:()=>{de(!1),l(!1)},onConfirm:(B,U,Z)=>Dr(B,U,Z)}),p.jsx(Vu,{show:te,dialogProps:ke,onCancel:()=>fe(!1)}),p.jsx(Pu,{open:Q,onClose:()=>je(!1),onComplete:Rr}),p.jsxs(ot,{open:bt,onClose:()=>{Pe(!1),Be({})},"aria-labelledby":"model-selection-dialog-title",maxWidth:"sm",fullWidth:!0,children:[p.jsx(jt,{id:"model-selection-dialog-title",children:"Select Model"}),p.jsx(it,{children:p.jsxs(we,{sx:{mt:2},children:[p.jsx(we,{sx:{px:2},children:p.jsx(is,{name:"chatModel",options:dt??[],onSelect:B=>{if(!B)Be({});else{const U=Ke.find(Z=>Z.name===B);if(U){const Z=`${U.name}_0`,Y=Qe.cloneDeep(U),ae=yi(Y,Z);Be(ae)}}},value:(ue==null?void 0:ue.name)??"choose an option"})}),ue&&Object.keys(ue).length>0&&p.jsx(we,{sx:{mt:2},children:(ue.inputParams??[]).filter(B=>!B.hidden).map((B,U)=>p.jsx(lo,{inputParam:B,data:ue},U))})]})}),p.jsxs(At,{children:[p.jsx(oe,{onClick:()=>{Pe(!1),Be({})},children:"Cancel"}),p.jsx(oe,{disabled:!ue||Object.keys(ue).length===0,onClick:async()=>{Pe(!1),_t&&await _t(ue),Be({})},variant:"contained",children:"Confirm"})]})]}),p.jsx(Bu,{show:lt,dialogProps:Xe,onCancel:()=>Oe(!1),onConfirm:B=>{try{if(t!=null&&t.acceptVariable&&window.location.href.includes("v2/agentcanvas")){const U=Hy.makeHtml(B);n.inputs[t.name]=U}else n.inputs[t.name]=B;Oe(!1)}catch{D({message:"Error setting generated instruction",options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:Z=>p.jsx(oe,{style:{color:"white"},onClick:()=>$(Z),children:p.jsx(nt,{})})}})}}}),De&&p.jsx(Ri,{open:De})]})};Rn.propTypes={inputAnchor:X.object,inputParam:X.object,data:X.object,disabled:X.bool,isAdditionalParams:X.bool,disablePadding:X.bool,parentParamForArray:X.object,arrayIndex:X.number,onCustomDataChange:X.func,onHideNodeInfoDialog:X.func};const co=({inputParam:e,data:t,disabled:n,isDocStore:r=!1})=>{const[s,a]=E.useState([]),[i,u]=E.useState([]),l=js(),f=Tn(C=>C.customization),g=E.useContext(yr),{reactFlowInstance:m}=g||{},v=({inputParam:C,newValue:D},$)=>{let o=Qe.cloneDeep(t);const c=[...s],d={...c[$]};for(let w=0;w<e.array.length;w+=1){const x=e.array[w];(x.show||x.hide)&&(d[x.name]=x.default||"")}d[C.name]=D,c[$]=d,a(c),t.inputs[e.name]=c,o.inputs[e.name]=c;const y=Gr(o,"inputParams",Qe.cloneDeep(e.array),$);if(y.length){const w=[...i];w[$]=y,u(w)}};E.useEffect(()=>{const C=t.inputs[e.name]||[];a(C);const D=[];for(let $=0;$<C.length;$+=1){const o=Gr(t,"inputParams",Qe.cloneDeep(e.array),$);o.length&&D.push(o)}u(D)},[t,e]);const _=(C,D,$)=>{if(r||!m||t.name!=="conditionAgentflow"&&t.name!=="conditionAgentAgentflow")return;const o=C.map((y,w)=>({id:`${t.id}-output-${w}`,label:w,name:w,description:`Condition ${w}`}));t.name==="conditionAgentflow"&&o.push({id:`${t.id}-output-${C.length}`,label:C.length,name:C.length,description:"Else"}),t.outputAnchors=o;const d=m.getNodes().map(y=>y.id===t.id?{...y,data:{...y.data,outputAnchors:o}}:y);if(m.setNodes(d),D==="DELETE"){const w=m.getEdges().filter(x=>!(x.sourceHandle&&x.sourceHandle.includes(t.id)&&x.sourceHandle.split("-").pop()===$.toString()));m.setEdges(w)}},I=()=>{let C={};for(const o of e.array)C[o.name]=o.default||"";const D=[...s,C];a(D),t.inputs[e.name]=D;const $=[];for(let o=0;o<D.length;o+=1){const c=Gr(t,"inputParams",Qe.cloneDeep(e.array),o);c.length&&$.push(c)}u($),_(D,"ADD")},A=C=>{const D=s.filter((o,c)=>c!==C);a(D),t.inputs[e.name]=D;const $=i.filter((o,c)=>c!==C);u($),_(D,"DELETE",C)},T=t.name!=="conditionAgentflow"&&t.name!=="conditionAgentAgentflow"||s.length>1;return p.jsxs(p.Fragment,{children:[s.map((C,D)=>{const $={...t,inputs:C,inputParams:i[D]||[]};return p.jsxs(we,{sx:{p:2,mt:2,mb:1,border:1,borderColor:l.palette.grey[900]+25,borderRadius:2,position:"relative"},children:[T&&p.jsx($e,{title:"Delete",onClick:()=>A(D),sx:{position:"absolute",height:"35px",width:"35px",right:10,top:10,color:f!=null&&f.isDarkMode?l.palette.grey[300]:"inherit","&:hover":{color:"red"}},children:p.jsx(Hi,{})}),p.jsx(bi,{label:`${D}`,size:"small",sx:{position:"absolute",right:T?45:10,top:16}}),i[D].filter(o=>o.display!==!1).map((o,c)=>r?p.jsx(lo,{disabled:n,inputParam:o,data:$,onNodeDataChange:({inputParam:d,newValue:y})=>{v({inputParam:d,newValue:y},D)}},c):p.jsx(Rn,{disabled:n,inputParam:o,data:$,isAdditionalParams:!0,parentParamForArray:e,arrayIndex:D,onCustomDataChange:({inputParam:d,newValue:y})=>{v({inputParam:d,newValue:y},D)}},c))]},D)}),p.jsxs(oe,{fullWidth:!0,size:"small",variant:"outlined",sx:{borderRadius:"16px",mt:2},startIcon:p.jsx(Ls,{}),onClick:I,children:["Add ",e.label]})]})};co.propTypes={inputParam:X.object.isRequired,data:X.object.isRequired,disabled:X.bool,isDocStore:X.bool};const lo=({inputParam:e,data:t,disabled:n=!1,onNodeDataChange:r})=>{var y;const s=Tn(w=>w.customization),a=E.useContext(yr),i=r||(a==null?void 0:a.onNodeDataChange),[u,l]=E.useState(!1),[f,g]=E.useState({}),[m,v]=E.useState(!1),[_,I]=E.useState({}),[A,T]=E.useState(Date.now().toString()),C=({inputParam:w,newValue:x})=>{t.inputs[w.name]=x,["boolean","asyncOptions","asyncMultiOptions","options","multiOptions"].includes(w.type)&&i&&i({nodeId:t.id,inputParam:w,newValue:x})},D=(w,x)=>{g({value:w,inputParam:x,disabled:n,confirmButtonName:"Save",cancelButtonName:"Cancel"}),l(!0)},$=(w,x,k,M)=>{I({url:w,relativeLinksMethod:k,limit:M,selectedLinks:x,confirmButtonName:"Save",cancelButtonName:"Cancel"}),v(!0)},o=(w,x)=>{v(!1),t.inputs.url=w,t.inputs.selectedLinks=x},c=(w,x)=>{l(!1),t.inputs[x]=w},d=()=>{const w=t.inputs.credential||t.inputs[qt];return w?{credential:w}:{}};return p.jsxs("div",{children:[e&&p.jsx(p.Fragment,{children:p.jsxs(we,{sx:{p:2},children:[p.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[p.jsxs(Ae,{children:[e.label,!e.optional&&p.jsx("span",{style:{color:"red"},children:" *"}),e.description&&p.jsx(as,{style:{marginLeft:10},title:e.description})]}),p.jsx("div",{style:{flexGrow:1}}),(e.type==="string"&&e.rows||e.type==="code")&&p.jsx($e,{size:"small",sx:{height:25,width:25},title:"Expand",color:"primary",onClick:()=>D(t.inputs[e.name]??e.default??"",e),children:p.jsx(Vi,{})})]}),e.warning&&p.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",borderRadius:10,background:"rgb(254,252,191)",padding:10,marginTop:10,marginBottom:10},children:[p.jsx(Pi,{size:30,color:"orange"}),p.jsx("span",{style:{color:"rgb(116,66,16)",marginLeft:10},children:e.warning})]}),e.type==="credential"&&p.jsx(_i,{disabled:n,data:d(),inputParam:e,onSelect:w=>{t.credential=w,t.inputs[qt]=w}},JSON.stringify(e)),e.type==="file"&&p.jsx(Si,{disabled:n,fileType:e.fileType||"*",onChange:w=>t.inputs[e.name]=w,value:t.inputs[e.name]??e.default??"Choose a file to upload"}),e.type==="boolean"&&p.jsx(Ci,{disabled:n,onChange:w=>C({inputParam:e,newValue:w}),value:t.inputs[e.name]??e.default??!1}),e.type==="datagrid"&&p.jsx(Vs,{disabled:n,columns:e.datagrid,hideFooter:!0,rows:t.inputs[e.name]??JSON.stringify(e.default)??[],onChange:w=>t.inputs[e.name]=w}),e.type==="code"&&p.jsxs(p.Fragment,{children:[p.jsx("div",{style:{height:"5px"}}),p.jsx("div",{style:{height:e.rows?"100px":"200px"},children:p.jsx(Ei,{disabled:n,value:t.inputs[e.name]??e.default??"",height:e.rows?"100px":"200px",theme:s.isDarkMode?"dark":"light",lang:"js",placeholder:e.placeholder,onValueChange:w=>t.inputs[e.name]=w,basicSetup:{highlightActiveLine:!1,highlightActiveLineGutter:!1}})})]}),(e.type==="string"||e.type==="password"||e.type==="number")&&p.jsx(xi,{disabled:n,inputParam:e,onChange:w=>t.inputs[e.name]=w,value:t.inputs[e.name]??e.default??"",nodeId:t.id},t.inputs[e.name]),e.type==="json"&&p.jsx($s,{disabled:n,onChange:w=>t.inputs[e.name]=w,value:t.inputs[e.name]??e.default??"",isDarkMode:s.isDarkMode}),e.type==="options"&&p.jsx(is,{disabled:n,name:e.name,options:e.options,onSelect:w=>C({inputParam:e,newValue:w}),value:t.inputs[e.name]??e.default??"choose an option"},JSON.stringify(e)),e.type==="multiOptions"&&p.jsx(wi,{disabled:n,name:e.name,options:e.options,onSelect:w=>C({inputParam:e,newValue:w}),value:t.inputs[e.name]??e.default??"choose an option"},JSON.stringify(e)),(e.type==="asyncOptions"||e.type==="asyncMultiOptions")&&p.jsxs(p.Fragment,{children:[((y=t.inputParams)==null?void 0:y.length)===1&&p.jsx("div",{style:{marginTop:10}}),p.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[p.jsx("div",{style:{flex:1},children:p.jsx(vi,{disabled:n,name:e.name,nodeData:t,freeSolo:e.freeSolo,multiple:e.type==="asyncMultiOptions",value:t.inputs[e.name]??e.default??"choose an option",onSelect:w=>C({inputParam:e,newValue:w}),onCreateNew:()=>addAsyncOption(e.name),fullWidth:!0},JSON.stringify(e))},A),e.refresh&&p.jsx($e,{title:"Refresh",color:"primary",size:"small",onClick:()=>T(Date.now().toString()),children:p.jsx(Bi,{})})]})]}),e.type==="array"&&p.jsx(co,{inputParam:e,data:t,disabled:n,isDocStore:!0}),(t.name==="cheerioWebScraper"||t.name==="puppeteerWebScraper"||t.name==="playwrightWebScraper")&&e.name==="url"&&p.jsxs(p.Fragment,{children:[p.jsx(oe,{style:{display:"flex",flexDirection:"row",width:"100%"},disabled:n,sx:{borderRadius:"12px",width:"100%",mt:1},variant:"outlined",onClick:()=>$(t.inputs[e.name]??e.default??"",t.inputs.selectedLinks,t.inputs.relativeLinksMethod??"webCrawl",parseInt(t.inputs.limit)??0),children:"Manage Links"}),p.jsx(uo,{show:m,dialogProps:_,onCancel:()=>v(!1),onSave:o})]})]})}),p.jsx(zi,{show:u,dialogProps:f,onCancel:()=>l(!1),onConfirm:(w,x)=>c(w,x)})]})};lo.propTypes={inputParam:X.object,data:X.object,disabled:X.bool,onNodeDataChange:X.func};export{Bu as A,lo as D,xh as E,sn as H,ds as I,Rn as N,wh as P,sg as R,Bd as a,j0 as b,$h as c,Ee as d,ye as e,Ua as f,Ca as g,qe as h,ig as i,J as j,Ze as k,Et as l,Zt as m,C0 as n,Zs as o,rt as p,E0 as q,Ih as r,Re as s,me as t,M0 as u,mp as v,Fl as w,rn as x,mh as z};
