import{a as y,u as I,f as M,cM as O,r as a,bI as P,j as t,B as p,cS as A,am as B}from"./index-B5bgjFPS.js";import{C as R,I as T,a as _,B as J}from"./style-CyLs_DYe.js";/* empty css              */import{A as z,I as G,S as V,a as $,E as H}from"./EditNodeDialog-BDGzHjnv.js";import{M as L}from"./MarketplaceCanvasHeader-BNtRlBPp.js";import{u as W,b as Z,R as q}from"./DocStoreInputHandler-BDJBQrwa.js";import"./NodeInfoDialog-BuAc37BO.js";import"./Table-CZOZGZoJ.js";import"./TooltipWithParser-D26Faoyy.js";import"./index-D--Rb2MU.js";import"./Tooltip-CXmeiPEa.js";import"./config-wSoqsCQX.js";import"./StopCircle-Dr72dSBy.js";import"./ButtonGroup-DgM5AEGL.js";import"./IconCopy-bbAsun7S.js";import"./IconTrash-CekgWF9B.js";import"./ToolDialog-DZ6z_iak.js";import"./Grid-DGDGmzGP.js";import"./toPropertyKey-C9c9JG92.js";import"./Autocomplete-CinIIKT5.js";import"./Close-DT9tpzn1.js";import"./createStyled-DlEbU-rO.js";import"./InputLabel-BtU13bbu.js";import"./InputAdornment-v58Edx4J.js";import"./FormControl-o0rphY-g.js";import"./TextField-OmGdqrIf.js";import"./KeyboardArrowRight-BvTOCIXU.js";import"./LastPage--XaxDP-k.js";import"./Skeleton-DJP3nnUt.js";import"./Delete-4D-T7tnN.js";import"./ConfirmDialog-Dfe34hOz.js";import"./CodeEditor-BbQJOBPh.js";import"./index-C-cusT-F.js";import"./ExportAsTemplateDialog-481ESzFy.js";import"./GridActionsCellItem-B3aQ_RGo.js";import"./IconPlus-j8jP5X4Z.js";import"./Input-CajAyvOv.js";import"./ListItem-BfStHUI0.js";import"./IconChevronLeft-DxxY-T-U.js";import"./Dropdown-D8Rr64ju.js";import"./MultiDropdown-BUXEvYds.js";import"./CredentialInputHandler-C4W2GUgN.js";import"./CredentialListDialog-ZkUPpHPz.js";import"./Switch-D5M093wC.js";import"./main-Dw2W3SKo.js";import"./IconArrowsMaximize-BLCViMbK.js";import"./IconAlertTriangle-7YQ2ldQl.js";import"./IconSearch-4bUU90FL.js";import"./File-km8sc6Tq.js";import"./suggestionOption-DCQ-1oAJ.js";import"./TabPanel-C-h4h7GL.js";import"./ExpandMore-BZIzyY2F.js";import"./nodes-Qb-8otVq.js";import"./MemoizedReactMarkdown-mGWPD7hJ.js";import"./unsupportedIterableToArray-Bh0GkvIo.js";import"./BackdropLoader-Ch3nVEPr.js";import"./ExpandTextDialog-XWdUWqGp.js";import"./LoadingButton-CJHvS9bV.js";import"./IconRefresh-CtZoTUkg.js";import"./AssistantDialog-CJzYVebb.js";import"./assistants-DZYxhrU8.js";import"./v4-CtRu48qb.js";import"./Stepper-BCbMjc86.js";import"./IconLanguage-BXvwKb3u.js";import"./documentstore-CRtiIDJT.js";import"./string-BbYD24iH.js";import"./IconBulb-BQTovKvQ.js";const K={agentFlow:$,stickyNote:V,iteration:G},Q={agentFlow:z},lo=()=>{const n=y(),m=I(),l=M(o=>o.customization),{state:c}=O(),{flowData:r,name:d}=c,[g,f,u]=W(),[x,w,h]=Z(),[N,s]=a.useState(!1),[j,C]=a.useState({}),[i,b]=a.useState(!1),S=a.useRef(null),{setReactFlowInstance:k}=a.useContext(P);a.useEffect(()=>{if(r){const o=JSON.parse(r);f(o.nodes||[]),w(o.edges||[])}},[r]);const E=o=>{const e=JSON.stringify(o);m("/v2/agentcanvas",{state:{templateFlowData:e}})},v=a.useCallback((o,e)=>{if(!(!e||!e.data)&&e.data.name!=="stickyNoteAgentflow"){const D={data:e.data,inputParams:e.data.inputParams.filter(F=>!F.hidden),disabled:!0};C(D),s(!0)}});return t.jsx(t.Fragment,{children:t.jsxs(p,{children:[t.jsx(A,{enableColorOnDark:!0,position:"fixed",color:"inherit",elevation:1,sx:{bgcolor:n.palette.background.default},children:t.jsx(B,{children:t.jsx(L,{flowName:d,flowData:JSON.parse(r),onChatflowCopy:o=>E(o)})})}),t.jsx(p,{sx:{pt:"70px",height:"100vh",width:"100%"},children:t.jsx("div",{className:"reactflow-parent-wrapper",children:t.jsx("div",{className:"reactflow-wrapper",ref:S,children:t.jsxs(q,{nodes:g,edges:x,onNodesChange:u,onEdgesChange:h,onNodeDoubleClick:v,onInit:k,nodeTypes:K,edgeTypes:Q,fitView:!0,minZoom:.1,snapGrid:[25,25],snapToGrid:i,children:[t.jsx(R,{className:l.isDarkMode?"dark-mode-controls":"",style:{display:"flex",flexDirection:"row",left:"50%",transform:"translate(-50%, -50%)"},children:t.jsx("button",{className:"react-flow__controls-button react-flow__controls-interactive",onClick:()=>{b(!i)},title:"toggle snapping","aria-label":"toggle snapping",children:i?t.jsx(T,{}):t.jsx(_,{})})}),t.jsx(J,{color:"#aaa",gap:16}),t.jsx(H,{show:N,dialogProps:j,onCancel:()=>s(!1)})]})})})})]})})};export{lo as default};
