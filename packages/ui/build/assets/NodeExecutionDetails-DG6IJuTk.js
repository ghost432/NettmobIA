import{af as pn,r as w,b4 as me,k as kt,l as Et,j as r,aJ as ze,b1 as fn,aP as R,aO as se,y as X,K as le,a3 as Rt,aG as jt,P as G,ad as St,a as Mt,f as Pt,B as $,cJ as gn,A as mn,d as Z,o as q,C as Q,T as ut,cK as dt,ba as fe,cw as pt,ah as qe,q as ke,D as ft,m as bn,n as gt,p as In,b8 as hn,bK as xn}from"./index-B5bgjFPS.js";import{s as Se}from"./createStyled-DlEbU-rO.js";import{A as mt,d as bt,e as It,M as ge,I as ht}from"./MemoizedReactMarkdown-mGWPD7hJ.js";import{C as We,a as xt,S as yn}from"./SourceDocDialog-U52onwWn.js";import{R as vn}from"./main-Dw2W3SKo.js";import{C as Cn}from"./CodeEditor-BbQJOBPh.js";import{I as Tn}from"./IconClock-Be61hWTr.js";import{T as wn}from"./ToggleButtonGroup-RXBzXyLf.js";import{T as kn}from"./TextField-OmGdqrIf.js";/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=[["path",{d:"M9 14c0 1.657 2.686 3 6 3s6 -1.343 6 -3s-2.686 -3 -6 -3s-6 1.343 -6 3z",key:"svg-0"}],["path",{d:"M9 14v4c0 1.656 2.686 3 6 3s6 -1.344 6 -3v-4",key:"svg-1"}],["path",{d:"M3 6c0 1.072 1.144 2.062 3 2.598s4.144 .536 6 0c1.856 -.536 3 -1.526 3 -2.598c0 -1.072 -1.144 -2.062 -3 -2.598s-4.144 -.536 -6 0c-1.856 .536 -3 1.526 -3 2.598z",key:"svg-2"}],["path",{d:"M3 6v10c0 .888 .772 1.45 2 2",key:"svg-3"}],["path",{d:"M3 11c0 .888 .772 1.45 2 2",key:"svg-4"}]],Rn=pn("outline","coins","Coins",En),jn=w.createContext(),Sn=()=>w.useContext(jn)??!1,Mn=(e={})=>me.get("/executions",{params:e}),Pn=e=>me.delete("/executions",{data:{executionIds:e}}),Dn=e=>me.get(`/executions/${e}`),An=e=>me.get(`/public-executions/${e}`),On=(e,t)=>me.put(`/executions/${e}`,t),dr={getAllExecutions:Mn,deleteExecutions:Pn,getExecutionById:Dn,getExecutionByIdPublic:An,updateExecution:On};var Xe={},$n=kt;Object.defineProperty(Xe,"__esModule",{value:!0});var Ln=Xe.default=void 0,Fn=$n(Et()),Nn=r,Vn=(0,Fn.default)((0,Nn.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");Ln=Xe.default=Vn;var Ze={},_n=kt;Object.defineProperty(Ze,"__esModule",{value:!0});var Bn=Ze.default=void 0,zn=_n(Et()),Kn=r,Un=(0,zn.default)((0,Kn.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}),"Error");Bn=Ze.default=Un;function Dt(e,t,n=void 0){const o={};for(const i in e){const g=e[i];let p="",a=!0;for(let f=0;f<g.length;f+=1){const d=g[f];d&&(p+=(a===!0?"":" ")+t(d),a=!1,n&&n[d]&&(p+=" "+n[d]))}o[i]=p}return o}function je(...e){const t=w.useRef(void 0),n=w.useCallback(o=>{const i=e.map(g=>{if(g==null)return null;if(typeof g=="function"){const p=g,a=p(o);return typeof a=="function"?a:()=>{p(null)}}return g.current=o,()=>{g.current=null}});return()=>{i.forEach(g=>g==null?void 0:g())}},e);return w.useMemo(()=>e.every(o=>o==null)?null:o=>{t.current&&(t.current(),t.current=void 0),o!=null&&(t.current=n(o))},e)}function Gn(e){return typeof e=="string"}function qn(e,t,n){return e===void 0||Gn(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function W(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(o=>o.match(/^on[A-Z]/)&&typeof e[o]=="function"&&!t.includes(o)).forEach(o=>{n[o]=e[o]}),n}function yt(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function Wn(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:o,externalForwardedProps:i,className:g}=e;if(!t){const u=ze(n==null?void 0:n.className,g,i==null?void 0:i.className,o==null?void 0:o.className),y={...n==null?void 0:n.style,...i==null?void 0:i.style,...o==null?void 0:o.style},b={...n,...i,...o};return u.length>0&&(b.className=u),Object.keys(y).length>0&&(b.style=y),{props:b,internalRef:void 0}}const p=W({...i,...o}),a=yt(o),f=yt(i),d=t(p),l=ze(d==null?void 0:d.className,n==null?void 0:n.className,g,i==null?void 0:i.className,o==null?void 0:o.className),c={...d==null?void 0:d.style,...n==null?void 0:n.style,...i==null?void 0:i.style,...o==null?void 0:o.style},m={...d,...n,...f,...a};return l.length>0&&(m.className=l),Object.keys(c).length>0&&(m.style=c),{props:m,internalRef:d.ref}}function ie(e,t,n){return typeof e=="function"?e(t,n):e}function xe(e){var c;const{elementType:t,externalSlotProps:n,ownerState:o,skipResolvingSlotProps:i=!1,...g}=e,p=i?{}:ie(n,o),{props:a,internalRef:f}=Wn({...g,externalSlotProps:p}),d=je(f,p==null?void 0:p.ref,(c=e.additionalProps)==null?void 0:c.ref);return qn(t,{...a,ref:d},o)}const vt=e=>e,Jn=()=>{let e=vt;return{configure(t){e=t},generate(t){return e(t)},reset(){e=vt}}},Xn=Jn(),Zn={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Qe(e,t,n="Mui"){const o=Zn[t];return o?`${n}-${o}`:`${Xn.generate(e)}-${t}`}function At(e,t,n="Mui"){const o={};return t.forEach(i=>{o[i]=Qe(e,i,n)}),o}function Qn(e){return Qe("MuiRichTreeView",e)}At("MuiRichTreeView",["root"]);function Ot(e){return fn}const Yn=(e,t)=>{const n=w.useRef({}),[o,i]=w.useState(()=>{const p={};return e.forEach(a=>{a.models&&Object.entries(a.models).forEach(([f,d])=>{n.current[f]={isControlled:t[f]!==void 0,getDefaultValue:d.getDefaultValue},p[f]=d.getDefaultValue(t)})}),p});return Object.fromEntries(Object.entries(n.current).map(([p,a])=>{const f=t[p]??o[p];return[p,{value:f,setControlledValue:d=>{a.isControlled||i(l=>R({},l,{[p]:d}))}}]}))};class Hn{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(t,n,o={}){let i=this.events[t];i||(i={highPriority:new Map,regular:new Map},this.events[t]=i),o.isFirst?i.highPriority.set(n,!0):i.regular.set(n,!0)}removeListener(t,n){this.events[t]&&(this.events[t].regular.delete(n),this.events[t].highPriority.delete(n))}removeAllListeners(){this.events={}}emit(t,...n){const o=this.events[t];if(!o)return;const i=Array.from(o.highPriority.keys()),g=Array.from(o.regular.keys());for(let p=i.length-1;p>=0;p-=1){const a=i[p];o.highPriority.has(a)&&a.apply(this,n)}for(let p=0;p<g.length;p+=1){const a=g[p];o.regular.has(a)&&a.apply(this,n)}}once(t,n){const o=this;this.on(t,function i(...g){o.removeListener(t,i),n.apply(o,g)})}}const eo=e=>e.isPropagationStopped!==void 0,$t=()=>{const[e]=w.useState(()=>new Hn),t=w.useCallback((...o)=>{const[i,g,p={}]=o;p.defaultMuiPrevented=!1,!(eo(p)&&p.isPropagationStopped())&&e.emit(i,g,p)},[e]),n=w.useCallback((o,i)=>(e.on(o,i),()=>{e.removeListener(o,i)}),[e]);return{instance:{$$publishEvent:t,$$subscribeEvent:n}}};$t.params={};const Lt=({plugins:e})=>{const t=new Set(e);return{instance:{getAvailablePlugins:()=>t}}};Lt.params={};let Ct=0;const to=()=>(Ct+=1,`mui-tree-view-${Ct}`),Ye=({id:e,treeId:t="",itemId:n})=>e??`${t}-${n}`,He=({params:e,state:t,setState:n})=>{w.useEffect(()=>{n(i=>i.id.treeId===e.id&&i.id.treeId!==void 0?i:R({},i,{id:R({},i.id,{treeId:e.id??to()})}))},[n,e.id]);const o=e.id??t.id.treeId;return{getRootProps:()=>({id:o}),contextValue:{treeId:o}}};He.params={id:!0};He.getInitialState=({id:e})=>({id:{treeId:e??void 0}});const no=[$t,Lt,He],oo=["slots","slotProps","apiRef","experimentalFeatures"],ro=e=>{let{props:{slots:t,slotProps:n,apiRef:o,experimentalFeatures:i},plugins:g}=e,p=se(e.props,oo);const a={};g.forEach(m=>{Object.assign(a,m.params)});const f={},d={};Object.keys(p).forEach(m=>{const u=p[m];a[m]?f[m]=u:d[m]=u});const l=i??{},c=g.reduce((m,u)=>u.getDefaultizedParams?u.getDefaultizedParams({params:m,experimentalFeatures:l}):m,f);return{apiRef:o,forwardedProps:d,pluginParams:c,slots:t??{},slotProps:n??{},experimentalFeatures:l}},io=({plugins:e,instance:t,publicAPI:n,rootRef:o})=>({runItemPlugins:a=>{let f=null,d=null;const l=[],c={};e.forEach(y=>{if(!y.itemPlugin)return;const b=y.itemPlugin({props:a,rootRef:f,contentRef:d});b!=null&&b.rootRef&&(f=b.rootRef),b!=null&&b.contentRef&&(d=b.contentRef),b!=null&&b.propsEnhancers&&(l.push(b.propsEnhancers),Object.keys(b.propsEnhancers).forEach(I=>{c[I]=!0}))});const m=y=>b=>{const I={};return l.forEach(x=>{const C=x[y];C!=null&&Object.assign(I,C(b))}),I},u=Object.fromEntries(Object.keys(c).map(y=>[y,m(y)]));return{contentRef:d,rootRef:f,propsEnhancers:u}},wrapItem:({itemId:a,children:f})=>{let d=f;for(let l=e.length-1;l>=0;l-=1){const c=e[l];c.wrapItem&&(d=c.wrapItem({itemId:a,children:d,instance:t}))}return d},wrapRoot:({children:a})=>{let f=a;for(let d=e.length-1;d>=0;d-=1){const l=e[d];l.wrapRoot&&(f=l.wrapRoot({children:f,instance:t}))}return f},instance:t,rootRef:o,publicAPI:n});function so(e){const t=w.useRef({});return e?(e.current==null&&(e.current={}),e.current):t.current}const lo=({plugins:e,rootRef:t,props:n})=>{const o=[...no,...e],{pluginParams:i,forwardedProps:g,apiRef:p,experimentalFeatures:a,slots:f,slotProps:d}=ro({plugins:o,props:n}),l=Yn(o,i),m=w.useRef({}).current,u=so(p),y=w.useRef(null),b=je(y,t),I=io({plugins:o,instance:m,publicAPI:u,rootRef:y}),[x,C]=w.useState(()=>{const P={};return o.forEach(h=>{h.getInitialState&&Object.assign(P,h.getInitialState(i))}),P}),j=[],A=P=>{const h=P({instance:m,params:i,slots:f,slotProps:d,experimentalFeatures:a,state:x,setState:C,rootRef:y,models:l,plugins:o});h.getRootProps&&j.push(h.getRootProps),h.publicAPI&&Object.assign(u,h.publicAPI),h.instance&&Object.assign(m,h.instance),h.contextValue&&Object.assign(I,h.contextValue)};return o.forEach(A),{getRootProps:(P={})=>{const h=R({role:"tree"},g,P,{ref:b});return j.forEach(z=>{Object.assign(h,z(P))}),h},rootRef:b,contextValue:I,instance:m}},Ft=w.createContext(null);function ao(e){const{value:t,children:n}=e;return r.jsx(Ft.Provider,{value:t,children:t.wrapRoot({children:n,instance:t.instance})})}const ve=()=>{const e=w.useContext(Ft);if(e==null)throw new Error(["MUI X: Could not find the Tree View context.","It looks like you rendered your component outside of a SimpleTreeView or RichTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));return e},co=(e,t,n)=>{e.$$publishEvent(t,n)},Ee="__TREE_VIEW_ROOT_PARENT_ID__",uo=e=>{const t={};return e.forEach((n,o)=>{t[n]=o}),t},et=w.createContext(()=>-1),po=["children"],Nt=({items:e,isItemDisabled:t,getItemLabel:n,getItemId:o})=>{const i={},g={},p={[Ee]:[]},a=(d,l,c)=>{var b,I;const m=o?o(d):d.id;if(m==null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.","An item was provided without id in the `items` prop:",JSON.stringify(d)].join(`
`));if(i[m]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Two items were provided with the same id in the \`items\` prop: "${m}"`].join(`
`));const u=n?n(d):d.label;if(u==null)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","Alternatively, you can use the `getItemLabel` prop to specify a custom label for each item.","An item was provided without label in the `items` prop:",JSON.stringify(d)].join(`
`));i[m]={id:m,label:u,parentId:c,idAttribute:void 0,expandable:!!((b=d.children)!=null&&b.length),disabled:t?t(d):!1,depth:l},g[m]=d;const y=c??Ee;p[y]||(p[y]=[]),p[y].push(m),(I=d.children)==null||I.forEach(x=>a(x,l+1,m))};e.forEach(d=>a(d,0,null));const f={};return Object.keys(p).forEach(d=>{f[d]=uo(p[d])}),{itemMetaMap:i,itemMap:g,itemOrderedChildrenIds:p,itemChildrenIndexes:f}},Le=({instance:e,params:t,state:n,setState:o,experimentalFeatures:i})=>{const g=w.useCallback(x=>n.items.itemMetaMap[x],[n.items.itemMetaMap]),p=w.useCallback(x=>n.items.itemMap[x],[n.items.itemMap]),a=w.useCallback(()=>{const x=C=>{const j=n.items.itemMap[C],A=se(j,po),E=n.items.itemOrderedChildrenIds[C];return E&&(A.children=E.map(x)),A};return n.items.itemOrderedChildrenIds[Ee].map(x)},[n.items.itemMap,n.items.itemOrderedChildrenIds]),f=w.useCallback(x=>{if(x==null)return!1;let C=e.getItemMeta(x);if(!C)return!1;if(C.disabled)return!0;for(;C.parentId!=null;)if(C=e.getItemMeta(C.parentId),C.disabled)return!0;return!1},[e]),d=w.useCallback(x=>{const C=e.getItemMeta(x).parentId??Ee;return n.items.itemChildrenIndexes[C][x]},[e,n.items.itemChildrenIndexes]),l=w.useCallback(x=>n.items.itemOrderedChildrenIds[x??Ee]??[],[n.items.itemOrderedChildrenIds]),c=x=>{const C=e.getItemMeta(x);return C==null?null:document.getElementById(Ye({treeId:n.id.treeId,itemId:x,id:C.idAttribute}))},m=x=>t.disabledItemsFocusable?!0:!e.isItemDisabled(x),u=w.useRef(!1),y=w.useCallback(()=>{u.current=!0},[]),b=w.useCallback(()=>u.current,[]);return w.useEffect(()=>{e.areItemUpdatesPrevented()||o(x=>{const C=Nt({items:t.items,isItemDisabled:t.isItemDisabled,getItemId:t.getItemId,getItemLabel:t.getItemLabel});return Object.values(x.items.itemMetaMap).forEach(j=>{C.itemMetaMap[j.id]||co(e,"removeItem",{id:j.id})}),R({},x,{items:C})})},[e,o,t.items,t.isItemDisabled,t.getItemId,t.getItemLabel]),{getRootProps:()=>({style:{"--TreeView-itemChildrenIndentation":typeof t.itemChildrenIndentation=="number"?`${t.itemChildrenIndentation}px`:t.itemChildrenIndentation}}),publicAPI:{getItem:p,getItemDOMElement:c,getItemTree:a,getItemOrderedChildrenIds:l},instance:{getItemMeta:g,getItem:p,getItemTree:a,getItemsToRender:()=>{const x=C=>{var A;const j=n.items.itemMetaMap[C];return{label:j.label,itemId:j.id,id:j.idAttribute,children:(A=n.items.itemOrderedChildrenIds[C])==null?void 0:A.map(x)}};return n.items.itemOrderedChildrenIds[Ee].map(x)},getItemIndex:d,getItemDOMElement:c,getItemOrderedChildrenIds:l,isItemDisabled:f,isItemNavigable:m,preventItemUpdates:y,areItemUpdatesPrevented:b},contextValue:{items:{onItemClick:t.onItemClick,disabledItemsFocusable:t.disabledItemsFocusable,indentationAtItemLevel:i.indentationAtItemLevel??!1}}}};Le.getInitialState=e=>({items:Nt({items:e.items,isItemDisabled:e.isItemDisabled,getItemId:e.getItemId,getItemLabel:e.getItemLabel})});Le.getDefaultizedParams=({params:e})=>R({},e,{disabledItemsFocusable:e.disabledItemsFocusable??!1,itemChildrenIndentation:e.itemChildrenIndentation??"12px"});Le.wrapRoot=({children:e,instance:t})=>r.jsx(et.Provider,{value:n=>{var o;return((o=t.getItemMeta(n))==null?void 0:o.depth)??0},children:e});Le.params={disabledItemsFocusable:!0,items:!0,isItemDisabled:!0,getItemLabel:!0,getItemId:!0,onItemClick:!0,itemChildrenIndentation:!0};const fo=typeof window<"u"?w.useLayoutEffect:w.useEffect;function Re(e){const t=w.useRef(e);return fo(()=>{t.current=e}),w.useRef((...n)=>(0,t.current)(...n)).current}const Ke=({instance:e,params:t,models:n})=>{const o=w.useMemo(()=>{const c=new Map;return n.expandedItems.value.forEach(m=>{c.set(m,!0)}),c},[n.expandedItems.value]),i=(c,m)=>{var u;(u=t.onExpandedItemsChange)==null||u.call(t,c,m),n.expandedItems.setControlledValue(m)},g=w.useCallback(c=>o.has(c),[o]),p=w.useCallback(c=>{var m;return!!((m=e.getItemMeta(c))!=null&&m.expandable)},[e]),a=Re((c,m)=>{const u=e.isItemExpanded(m);e.setItemExpansion(c,m,!u)}),f=Re((c,m,u)=>{if(e.isItemExpanded(m)===u)return;let b;u?b=[m].concat(n.expandedItems.value):b=n.expandedItems.value.filter(I=>I!==m),t.onItemExpansionToggle&&t.onItemExpansionToggle(c,m,u),i(c,b)}),d=(c,m)=>{const u=e.getItemMeta(m),b=e.getItemOrderedChildrenIds(u.parentId).filter(x=>e.isItemExpandable(x)&&!e.isItemExpanded(x)),I=n.expandedItems.value.concat(b);b.length>0&&(t.onItemExpansionToggle&&b.forEach(x=>{t.onItemExpansionToggle(c,x,!0)}),i(c,I))},l=w.useMemo(()=>t.expansionTrigger?t.expansionTrigger:e.isTreeViewEditable?"iconContainer":"content",[t.expansionTrigger,e.isTreeViewEditable]);return{publicAPI:{setItemExpansion:f},instance:{isItemExpanded:g,isItemExpandable:p,setItemExpansion:f,toggleItemExpansion:a,expandAllSiblings:d},contextValue:{expansion:{expansionTrigger:l}}}};Ke.models={expandedItems:{getDefaultValue:e=>e.defaultExpandedItems}};const go=[];Ke.getDefaultizedParams=({params:e})=>R({},e,{defaultExpandedItems:e.defaultExpandedItems??go});Ke.params={expandedItems:!0,defaultExpandedItems:!0,onExpandedItemsChange:!0,onItemExpansionToggle:!0,expansionTrigger:!0};const Vt=(e,t)=>{let n=t.length-1;for(;n>=0&&!e.isItemNavigable(t[n]);)n-=1;if(n!==-1)return t[n]},_t=(e,t)=>{const n=e.getItemMeta(t),o=e.getItemOrderedChildrenIds(n.parentId),i=e.getItemIndex(t);if(i===0)return n.parentId;let g=i-1;for(;!e.isItemNavigable(o[g])&&g>=0;)g-=1;if(g===-1)return n.parentId==null?null:_t(e,n.parentId);let p=o[g],a=Vt(e,e.getItemOrderedChildrenIds(p));for(;e.isItemExpanded(p)&&a!=null;)p=a,a=e.getItemOrderedChildrenIds(p).find(e.isItemNavigable);return p},_e=(e,t)=>{if(e.isItemExpanded(t)){const o=e.getItemOrderedChildrenIds(t).find(e.isItemNavigable);if(o!=null)return o}let n=e.getItemMeta(t);for(;n!=null;){const o=e.getItemOrderedChildrenIds(n.parentId),i=e.getItemIndex(n.id);if(i<o.length-1){let g=i+1;for(;!e.isItemNavigable(o[g])&&g<o.length-1;)g+=1;if(e.isItemNavigable(o[g]))return o[g]}n=e.getItemMeta(n.parentId)}return null},Bt=e=>{let t=null;for(;t==null||e.isItemExpanded(t);){const n=e.getItemOrderedChildrenIds(t),o=Vt(e,n);if(o==null)return t;t=o}return t},Oe=e=>e.getItemOrderedChildrenIds(null).find(e.isItemNavigable),zt=(e,t,n)=>{if(t===n)return[t,n];const o=e.getItemMeta(t),i=e.getItemMeta(n);if(o.parentId===i.id||i.parentId===o.id)return i.parentId===o.id?[o.id,i.id]:[i.id,o.id];const g=[o.id],p=[i.id];let a=o.parentId,f=i.parentId,d=p.indexOf(a)!==-1,l=g.indexOf(f)!==-1,c=!0,m=!0;for(;!l&&!d;)c&&(g.push(a),d=p.indexOf(a)!==-1,c=a!==null,!d&&c&&(a=e.getItemMeta(a).parentId)),m&&!d&&(p.push(f),l=g.indexOf(f)!==-1,m=f!==null,!l&&m&&(f=e.getItemMeta(f).parentId));const u=d?a:f,y=e.getItemOrderedChildrenIds(u),b=g[g.indexOf(u)-1],I=p[p.indexOf(u)-1];return y.indexOf(b)<y.indexOf(I)?[t,n]:[n,t]},mo=(e,t,n)=>{const o=f=>{if(e.isItemExpandable(f)&&e.isItemExpanded(f))return e.getItemOrderedChildrenIds(f)[0];let d=e.getItemMeta(f);for(;d!=null;){const l=e.getItemOrderedChildrenIds(d.parentId),c=e.getItemIndex(d.id);if(c<l.length-1)return l[c+1];d=e.getItemMeta(d.parentId)}throw new Error("Invalid range")},[i,g]=zt(e,t,n),p=[i];let a=i;for(;a!==g;)a=o(a),e.isItemDisabled(a)||p.push(a);return p},bo=e=>{let t=Oe(e);const n=[];for(;t!=null;)n.push(t),t=_e(e,t);return n},$e=(e,t)=>t!==e.closest('*[role="treeitem"]'),Be=e=>Array.isArray(e)?e:e!=null?[e]:[],Je=e=>{const t={};return e.forEach(n=>{t[n]=!0}),t},Ue=({instance:e,params:t,models:n})=>{const o=w.useRef(null),i=w.useRef({}),g=w.useMemo(()=>{const b=new Map;return Array.isArray(n.selectedItems.value)?n.selectedItems.value.forEach(I=>{b.set(I,!0)}):n.selectedItems.value!=null&&b.set(n.selectedItems.value,!0),b},[n.selectedItems.value]),p=(b,I)=>{if(t.onItemSelectionToggle)if(t.multiSelect){const x=I.filter(j=>!e.isItemSelected(j)),C=n.selectedItems.value.filter(j=>!I.includes(j));x.forEach(j=>{t.onItemSelectionToggle(b,j,!0)}),C.forEach(j=>{t.onItemSelectionToggle(b,j,!1)})}else I!==n.selectedItems.value&&(n.selectedItems.value!=null&&t.onItemSelectionToggle(b,n.selectedItems.value,!1),I!=null&&t.onItemSelectionToggle(b,I,!0));t.onSelectedItemsChange&&t.onSelectedItemsChange(b,I),n.selectedItems.setControlledValue(I)},a=b=>g.has(b),f=({event:b,itemId:I,keepExistingSelection:x=!1,shouldBeSelected:C})=>{if(t.disableSelection)return;let j;if(x){const A=Be(n.selectedItems.value),E=e.isItemSelected(I);E&&(C===!1||C==null)?j=A.filter(P=>P!==I):!E&&(C===!0||C==null)?j=[I].concat(A):j=A}else C===!1||C==null&&e.isItemSelected(I)?j=t.multiSelect?[]:null:j=t.multiSelect?[I]:I;p(b,j),o.current=I,i.current={}},d=(b,[I,x])=>{if(t.disableSelection||!t.multiSelect)return;let C=Be(n.selectedItems.value).slice();Object.keys(i.current).length>0&&(C=C.filter(P=>!i.current[P]));const j=Je(C),A=mo(e,I,x),E=A.filter(P=>!j[P]);C=C.concat(E),p(b,C),i.current=Je(A)};return{getRootProps:()=>({"aria-multiselectable":t.multiSelect}),publicAPI:{selectItem:f},instance:{isItemSelected:a,selectItem:f,selectAllNavigableItems:b=>{if(t.disableSelection||!t.multiSelect)return;const I=bo(e);p(b,I),i.current=Je(I)},expandSelectionRange:(b,I)=>{if(o.current!=null){const[x,C]=zt(e,I,o.current);d(b,[x,C])}},selectRangeFromStartToItem:(b,I)=>{d(b,[Oe(e),I])},selectRangeFromItemToEnd:(b,I)=>{d(b,[I,Bt(e)])},selectItemFromArrowNavigation:(b,I,x)=>{if(t.disableSelection||!t.multiSelect)return;let C=Be(n.selectedItems.value).slice();Object.keys(i.current).length===0?(C.push(x),i.current={[I]:!0,[x]:!0}):(i.current[I]||(i.current={}),i.current[x]?(C=C.filter(j=>j!==I),delete i.current[I]):(C.push(x),i.current[x]=!0)),p(b,C)}},contextValue:{selection:{multiSelect:t.multiSelect,checkboxSelection:t.checkboxSelection,disableSelection:t.disableSelection}}}};Ue.models={selectedItems:{getDefaultValue:e=>e.defaultSelectedItems}};const Io=[];Ue.getDefaultizedParams=({params:e})=>R({},e,{disableSelection:e.disableSelection??!1,multiSelect:e.multiSelect??!1,checkboxSelection:e.checkboxSelection??!1,defaultSelectedItems:e.defaultSelectedItems??(e.multiSelect?Io:null)});Ue.params={disableSelection:!0,multiSelect:!0,checkboxSelection:!0,defaultSelectedItems:!0,selectedItems:!0,onSelectedItemsChange:!0,onItemSelectionToggle:!0};function ho(e){return e&&e.ownerDocument||document}const Tt=1e3;class xo{constructor(t=Tt){this.timeouts=new Map,this.cleanupTimeout=Tt,this.cleanupTimeout=t}register(t,n,o){this.timeouts||(this.timeouts=new Map);const i=setTimeout(()=>{typeof n=="function"&&n(),this.timeouts.delete(o.cleanupToken)},this.cleanupTimeout);this.timeouts.set(o.cleanupToken,i)}unregister(t){const n=this.timeouts.get(t.cleanupToken);n&&(this.timeouts.delete(t.cleanupToken),clearTimeout(n))}reset(){this.timeouts&&(this.timeouts.forEach((t,n)=>{this.unregister({cleanupToken:n})}),this.timeouts=void 0)}}class yo{constructor(){this.registry=new FinalizationRegistry(t=>{typeof t=="function"&&t()})}register(t,n,o){this.registry.register(t,n,o)}unregister(t){this.registry.unregister(t)}reset(){}}class vo{}function Co(e){let t=0;return function(o,i,g){e.registry===null&&(e.registry=typeof FinalizationRegistry<"u"?new yo:new xo);const[p]=w.useState(new vo),a=w.useRef(null),f=w.useRef(void 0);f.current=g;const d=w.useRef(null);if(!a.current&&f.current){const l=(c,m)=>{var u;m.defaultMuiPrevented||(u=f.current)==null||u.call(f,c,m)};a.current=o.$$subscribeEvent(i,l),t+=1,d.current={cleanupToken:t},e.registry.register(p,()=>{var c;(c=a.current)==null||c.call(a),a.current=null,d.current=null},d.current)}else!f.current&&a.current&&(a.current(),a.current=null,d.current&&(e.registry.unregister(d.current),d.current=null));w.useEffect(()=>{if(!a.current&&f.current){const l=(c,m)=>{var u;m.defaultMuiPrevented||(u=f.current)==null||u.call(f,c,m)};a.current=o.$$subscribeEvent(i,l)}return d.current&&e.registry&&(e.registry.unregister(d.current),d.current=null),()=>{var l;(l=a.current)==null||l.call(a),a.current=null}},[o,i])}}const To={registry:null},wo=Co(To),Kt=(e=document)=>{const t=e.activeElement;return t?t.shadowRoot?Kt(t.shadowRoot):t:null},ko=(e,t)=>{let n=Be(t).find(o=>{if(!e.isItemNavigable(o))return!1;const i=e.getItemMeta(o);return i&&(i.parentId==null||e.isItemExpanded(i.parentId))});return n==null&&(n=Oe(e)),n},tt=({instance:e,params:t,state:n,setState:o,models:i,rootRef:g})=>{const p=ko(e,i.selectedItems.value),a=Re(I=>{const x=typeof I=="function"?I(n.focusedItemId):I;n.focusedItemId!==x&&o(C=>R({},C,{focusedItemId:x}))}),f=w.useCallback(()=>!!g.current&&g.current.contains(Kt(ho(g.current))),[g]),d=w.useCallback(I=>n.focusedItemId===I&&f(),[n.focusedItemId,f]),l=I=>{const x=e.getItemMeta(I);return x&&(x.parentId==null||e.isItemExpanded(x.parentId))},c=(I,x)=>{const C=e.getItemDOMElement(x);C&&C.focus(),a(x),t.onItemFocus&&t.onItemFocus(I,x)},m=Re((I,x)=>{l(x)&&c(I,x)}),u=Re(()=>{if(n.focusedItemId==null)return;if(e.getItemMeta(n.focusedItemId)){const x=e.getItemDOMElement(n.focusedItemId);x&&x.blur()}a(null)}),y=I=>I===p;wo(e,"removeItem",({id:I})=>{n.focusedItemId===I&&c(null,p)});const b=I=>x=>{var C;(C=I.onFocus)==null||C.call(I,x),!x.defaultMuiPrevented&&x.target===x.currentTarget&&c(x,p)};return{getRootProps:I=>({onFocus:b(I)}),publicAPI:{focusItem:m},instance:{isItemFocused:d,canItemBeTabbed:y,focusItem:m,removeFocusedItem:u}}};tt.getInitialState=()=>({focusedItemId:null});tt.params={onItemFocus:!0};const ye=(e,t)=>e.getAvailablePlugins().has(t),Eo=({props:e})=>{const{instance:t}=ve(),{label:n,itemId:o}=e,[i,g]=w.useState(n),p=t.isItemBeingEdited(o);return w.useEffect(()=>{p||g(n)},[p,n]),{propsEnhancers:{labelInput:({externalEventHandlers:a,interactions:f})=>t.isItemEditable(o)?{value:i??"","data-element":"labelInput",onChange:u=>{var y;(y=a.onChange)==null||y.call(a,u),g(u.target.value)},onKeyDown:u=>{var b;if((b=a.onKeyDown)==null||b.call(a,u),u.defaultMuiPrevented)return;const y=u.target;u.key==="Enter"&&y.value?f.handleSaveItemLabel(u,y.value):u.key==="Escape"&&f.handleCancelItemLabelEditing(u)},onBlur:u=>{var y;(y=a.onBlur)==null||y.call(a,u),!u.defaultMuiPrevented&&u.target.value&&f.handleSaveItemLabel(u,u.target.value)},autoFocus:!0,type:"text"}:{}}}},J=({instance:e,state:t,setState:n,params:o})=>{const i=w.useRef(t.editedItemId),g=c=>i.current===c,p=c=>{n(m=>R({},m,{editedItemId:c})),i.current=c},a=c=>c===t.editedItemId,f=!!o.isItemEditable,d=c=>{if(c==null||!f)return!1;const m=e.getItem(c);return m?typeof o.isItemEditable=="function"?o.isItemEditable(m):!!o.isItemEditable:!1},l=(c,m)=>{if(!m)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","The label of an item cannot be empty.",c].join(`
`));n(u=>{const y=u.items.itemMetaMap[c];return y.label!==m?R({},u,{items:R({},u.items,{itemMetaMap:R({},u.items.itemMetaMap,{[c]:R({},y,{label:m})})})}):u}),o.onItemLabelChange&&o.onItemLabelChange(c,m)};return{instance:{setEditedItemId:p,isItemBeingEdited:a,updateItemLabel:l,isItemEditable:d,isTreeViewEditable:f,isItemBeingEditedRef:g},publicAPI:{updateItemLabel:l}}};J.itemPlugin=Eo;J.getDefaultizedParams=({params:e,experimentalFeatures:t})=>{const n=t==null?void 0:t.labelEditing;return R({},e,{isItemEditable:n?e.isItemEditable??!1:!1})};J.getInitialState=()=>({editedItemId:null});J.params={onItemLabelChange:!0,isItemEditable:!0};function Ro(e){return!!e&&e.length===1&&!!e.match(/\S/)}const Ut=({instance:e,params:t,state:n})=>{const o=Sn(),i=w.useRef({}),g=Re(l=>{i.current=l(i.current)});w.useEffect(()=>{if(e.areItemUpdatesPrevented())return;const l={},c=m=>{l[m.id]=m.label.substring(0,1).toLowerCase()};Object.values(n.items.itemMetaMap).forEach(c),i.current=l},[n.items.itemMetaMap,t.getItemId,e]);const p=(l,c)=>{const m=c.toLowerCase(),u=x=>{const C=_e(e,x);return C===null?Oe(e):C};let y=null,b=u(l);const I={};for(;y==null&&!I[b];)i.current[b]===m?y=b:(I[b]=!0,b=u(b));return y},a=l=>!t.disableSelection&&!e.isItemDisabled(l),f=l=>!e.isItemDisabled(l)&&e.isItemExpandable(l);return{instance:{updateFirstCharMap:g,handleItemKeyDown:(l,c)=>{if(l.defaultMuiPrevented||l.altKey||$e(l.target,l.currentTarget))return;const m=l.ctrlKey||l.metaKey,u=l.key;switch(!0){case(u===" "&&a(c)):{l.preventDefault(),t.multiSelect&&l.shiftKey?e.expandSelectionRange(l,c):e.selectItem({event:l,itemId:c,keepExistingSelection:t.multiSelect,shouldBeSelected:t.multiSelect?void 0:!0});break}case u==="Enter":{ye(e,J)&&e.isItemEditable(c)&&!e.isItemBeingEdited(c)?e.setEditedItemId(c):f(c)?(e.toggleItemExpansion(l,c),l.preventDefault()):a(c)&&(t.multiSelect?(l.preventDefault(),e.selectItem({event:l,itemId:c,keepExistingSelection:!0})):e.isItemSelected(c)||(e.selectItem({event:l,itemId:c}),l.preventDefault()));break}case u==="ArrowDown":{const y=_e(e,c);y&&(l.preventDefault(),e.focusItem(l,y),t.multiSelect&&l.shiftKey&&a(y)&&e.selectItemFromArrowNavigation(l,c,y));break}case u==="ArrowUp":{const y=_t(e,c);y&&(l.preventDefault(),e.focusItem(l,y),t.multiSelect&&l.shiftKey&&a(y)&&e.selectItemFromArrowNavigation(l,c,y));break}case(u==="ArrowRight"&&!o||u==="ArrowLeft"&&o):{if(m)return;if(e.isItemExpanded(c)){const y=_e(e,c);y&&(e.focusItem(l,y),l.preventDefault())}else f(c)&&(e.toggleItemExpansion(l,c),l.preventDefault());break}case(u==="ArrowLeft"&&!o||u==="ArrowRight"&&o):{if(m)return;if(f(c)&&e.isItemExpanded(c))e.toggleItemExpansion(l,c),l.preventDefault();else{const y=e.getItemMeta(c).parentId;y&&(e.focusItem(l,y),l.preventDefault())}break}case u==="Home":{a(c)&&t.multiSelect&&m&&l.shiftKey?e.selectRangeFromStartToItem(l,c):e.focusItem(l,Oe(e)),l.preventDefault();break}case u==="End":{a(c)&&t.multiSelect&&m&&l.shiftKey?e.selectRangeFromItemToEnd(l,c):e.focusItem(l,Bt(e)),l.preventDefault();break}case u==="*":{e.expandAllSiblings(l,c),l.preventDefault();break}case(String.fromCharCode(l.keyCode)==="A"&&m&&t.multiSelect&&!t.disableSelection):{e.selectAllNavigableItems(l),l.preventDefault();break}case(!m&&!l.shiftKey&&Ro(u)):{const y=p(c,u);y!=null&&(e.focusItem(l,y),l.preventDefault());break}}}}}};Ut.params={};const Gt=({slots:e,slotProps:t})=>({contextValue:{icons:{slots:{collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,endIcon:e.endIcon},slotProps:{collapseIcon:t.collapseIcon,expandIcon:t.expandIcon,endIcon:t.endIcon}}}});Gt.params={};const jo=[Le,Ke,Ue,tt,Ut,Gt,J];function qt(e){const{instance:t,items:{onItemClick:n},selection:{multiSelect:o,checkboxSelection:i,disableSelection:g},expansion:{expansionTrigger:p}}=ve(),a=t.isItemExpandable(e),f=t.isItemExpanded(e),d=t.isItemFocused(e),l=t.isItemSelected(e),c=t.isItemDisabled(e),m=t!=null&&t.isItemBeingEdited?t==null?void 0:t.isItemBeingEdited(e):!1,u=t.isItemEditable?t.isItemEditable(e):!1,y=E=>{if(!c){d||t.focusItem(E,e);const P=o&&(E.shiftKey||E.ctrlKey||E.metaKey);a&&!(P&&t.isItemExpanded(e))&&t.toggleItemExpansion(E,e)}},b=E=>{c||(!d&&!m&&t.focusItem(E,e),o&&(E.shiftKey||E.ctrlKey||E.metaKey)?E.shiftKey?t.expandSelectionRange(E,e):t.selectItem({event:E,itemId:e,keepExistingSelection:!0}):t.selectItem({event:E,itemId:e,shouldBeSelected:!0}))},I=E=>{if(g||c)return;const P=E.nativeEvent.shiftKey;o&&P?t.expandSelectionRange(E,e):t.selectItem({event:E,itemId:e,keepExistingSelection:o,shouldBeSelected:E.target.checked})},x=E=>{(E.shiftKey||E.ctrlKey||E.metaKey||c)&&E.preventDefault()},C=()=>{ye(t,J)&&t.isItemEditable(e)&&(t.isItemBeingEdited(e)?t.setEditedItemId(null):t.setEditedItemId(e))};return{disabled:c,expanded:f,selected:l,focused:d,editable:u,editing:m,disableSelection:g,checkboxSelection:i,handleExpansion:y,handleSelection:b,handleCheckboxSelection:I,handleContentClick:n,preventSelection:x,expansionTrigger:p,toggleItemEditing:C,handleSaveItemLabel:(E,P)=>{ye(t,J)&&t.isItemBeingEditedRef(e)&&(t.updateItemLabel(e,P),C(),t.focusItem(E,e))},handleCancelItemLabelEditing:E=>{ye(t,J)&&t.isItemBeingEditedRef(e)&&(C(),t.focusItem(E,e))}}}const So=X("div",{name:"MuiTreeItem2DragAndDropOverlay",slot:"Root",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Se(e)&&e!=="action"})(({theme:e})=>({position:"absolute",left:0,display:"flex",top:0,bottom:0,right:0,pointerEvents:"none",variants:[{props:{action:"make-child"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderRadius:e.shape.borderRadius,backgroundColor:e.vars?`rgba(${e.vars.palette.primary.darkChannel} / ${e.vars.palette.action.focusOpacity})`:le(e.palette.primary.dark,e.palette.action.focusOpacity)}},{props:{action:"reorder-above"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderTop:`1px solid ${(e.vars||e).palette.action.active}`}},{props:{action:"reorder-below"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderBottom:`1px solid ${(e.vars||e).palette.action.active}`}},{props:{action:"move-to-parent"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * calc(var(--TreeView-itemDepth) - 1))",borderBottom:`1px solid ${(e.vars||e).palette.action.active}`}}]}));function Mo(e){return e.action==null?null:r.jsx(So,R({},e))}const Po=X("input",{name:"MuiTreeItem2",slot:"LabelInput",overridesResolver:(e,t)=>t.labelInput})(({theme:e})=>R({},e.typography.body1,{width:"100%",backgroundColor:e.palette.background.paper,borderRadius:e.shape.borderRadius,border:"none",padding:"0 2px",boxSizing:"border-box","&:focus":{outline:`1px solid ${e.palette.primary.main}`}})),Do=["classes","className","displayIcon","expansionIcon","icon","label","itemId","onClick","onMouseDown","dragAndDropOverlayProps","labelInputProps"],Wt=w.forwardRef(function(t,n){const{classes:o,className:i,displayIcon:g,expansionIcon:p,icon:a,label:f,itemId:d,onClick:l,onMouseDown:c,dragAndDropOverlayProps:m,labelInputProps:u}=t,y=se(t,Do),{disabled:b,expanded:I,selected:x,focused:C,editing:j,editable:A,disableSelection:E,checkboxSelection:P,handleExpansion:h,handleSelection:z,handleCheckboxSelection:_,handleContentClick:K,preventSelection:U,expansionTrigger:ae,toggleItemEditing:Y}=qt(d),H=a||p||g,te=w.useRef(null),be=N=>{U(N),c&&c(N)},ce=N=>{var ne;K==null||K(N,d),!((ne=te.current)!=null&&ne.contains(N.target))&&(ae==="content"&&h(N),P||z(N),l&&l(N))},Ie=N=>{N.defaultMuiPrevented||Y()};return r.jsxs("div",R({},y,{className:ze(o.root,i,I&&o.expanded,x&&o.selected,C&&o.focused,b&&o.disabled,j&&o.editing,A&&o.editable),onClick:ce,onMouseDown:be,ref:n,children:[r.jsx("div",{className:o.iconContainer,children:H}),P&&r.jsx(Rt,{className:o.checkbox,checked:x,onChange:_,disabled:b||E,ref:te,tabIndex:-1}),j?r.jsx(Po,R({},u,{className:o.labelInput})):r.jsx("div",R({className:o.label},A&&{onDoubleClick:Ie},{children:f})),m&&r.jsx(Mo,R({},m))]}))});function Ao(e){return Qe("MuiTreeItem",e)}const re=At("MuiTreeItem",["root","groupTransition","content","expanded","selected","focused","disabled","iconContainer","label","checkbox","labelInput","editable","editing","dragAndDropOverlay"]),Jt=jt(r.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"TreeViewExpandIcon"),Xt=jt(r.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"TreeViewCollapseIcon");function Zt(e){const{children:t,itemId:n}=e,{wrapItem:o,instance:i}=ve();return o({children:t,itemId:n,instance:i})}Zt.propTypes={children:G.node,itemId:G.string.isRequired};const Oo=["children","className","slots","slotProps","ContentComponent","ContentProps","itemId","id","label","onClick","onMouseDown","onFocus","onBlur","onKeyDown"],$o=["ownerState"],Lo=["ownerState"],Fo=["ownerState"],No=Ot(),Vo=e=>{const{classes:t}=e;return Dt({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],checkbox:["checkbox"],label:["label"],labelInput:["labelInput"],editing:["editing"],editable:["editable"],groupTransition:["groupTransition"]},Ao,t)},_o=X("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(e,t)=>t.root})({listStyle:"none",margin:0,padding:0,outline:0}),Bo=X(Wt,{name:"MuiTreeItem",slot:"Content",overridesResolver:(e,t)=>[t.content,t.iconContainer&&{[`& .${re.iconContainer}`]:t.iconContainer},t.label&&{[`& .${re.label}`]:t.label}],shouldForwardProp:e=>Se(e)&&e!=="indentationAtItemLevel"})(({theme:e})=>({padding:e.spacing(.5,1),borderRadius:e.shape.borderRadius,width:"100%",boxSizing:"border-box",position:"relative",display:"flex",alignItems:"center",gap:e.spacing(1),cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${re.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${re.focused}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${re.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:le(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:le(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:le(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${re.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:le(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`& .${re.iconContainer}`]:{width:16,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${re.label}`]:R({width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},e.typography.body1),[`& .${re.checkbox}`]:{padding:0},variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:`calc(${e.spacing(1)} + var(--TreeView-itemChildrenIndentation) * var(--TreeView-itemDepth))`}}]})),zo=X(St,{name:"MuiTreeItem",slot:"GroupTransition",overridesResolver:(e,t)=>t.groupTransition,shouldForwardProp:e=>Se(e)&&e!=="indentationAtItemLevel"})({margin:0,padding:0,paddingLeft:"var(--TreeView-itemChildrenIndentation)",variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:0}}]}),Ko=w.forwardRef(function(t,n){var rt,it,st,lt;const{icons:o,runItemPlugins:i,items:{disabledItemsFocusable:g,indentationAtItemLevel:p},selection:{disableSelection:a},expansion:{expansionTrigger:f},treeId:d,instance:l}=ve(),c=w.useContext(et),m=No({props:t,name:"MuiTreeItem"}),{children:u,className:y,slots:b,slotProps:I,ContentComponent:x=Wt,ContentProps:C,itemId:j,id:A,label:E,onClick:P,onMouseDown:h,onBlur:z,onKeyDown:_}=m,K=se(m,Oo),{expanded:U,focused:ae,selected:Y,disabled:H,editing:te,handleExpansion:be,handleCancelItemLabelEditing:ce,handleSaveItemLabel:Ie}=qt(j),{contentRef:N,rootRef:ne,propsEnhancers:V}=i(m),ue=w.useRef(null),Ce=w.useRef(null),Me=je(n,ne,ue),Pe=je(C==null?void 0:C.ref,N,Ce),oe={expandIcon:(b==null?void 0:b.expandIcon)??o.slots.expandIcon??Jt,collapseIcon:(b==null?void 0:b.collapseIcon)??o.slots.collapseIcon??Xt,endIcon:(b==null?void 0:b.endIcon)??o.slots.endIcon,icon:b==null?void 0:b.icon,groupTransition:b==null?void 0:b.groupTransition},Te=O=>Array.isArray(O)?O.length>0&&O.some(Te):!!O,de=Te(u),he=R({},m,{expanded:U,focused:ae,selected:Y,disabled:H,indentationAtItemLevel:p}),k=Vo(he),T=oe.groupTransition??void 0,s=xe({elementType:T,ownerState:{},externalSlotProps:I==null?void 0:I.groupTransition,additionalProps:R({unmountOnExit:!0,in:U,component:"ul",role:"group"},p?{indentationAtItemLevel:!0}:{}),className:k.groupTransition}),v=O=>{f==="iconContainer"&&be(O)},M=U?oe.collapseIcon:oe.expandIcon,D=xe({elementType:M,ownerState:{},externalSlotProps:O=>U?R({},ie(o.slotProps.collapseIcon,O),ie(I==null?void 0:I.collapseIcon,O)):R({},ie(o.slotProps.expandIcon,O),ie(I==null?void 0:I.expandIcon,O)),additionalProps:{onClick:v}}),L=se(D,$o),S=de&&M?r.jsx(M,R({},L)):null,F=de?void 0:oe.endIcon,pe=xe({elementType:F,ownerState:{},externalSlotProps:O=>de?{}:R({},ie(o.slotProps.endIcon,O),ie(I==null?void 0:I.endIcon,O))}),B=se(pe,Lo),De=F?r.jsx(F,R({},B)):null,Ge=oe.icon,tn=xe({elementType:Ge,ownerState:{},externalSlotProps:I==null?void 0:I.icon}),nn=se(tn,Fo),on=Ge?r.jsx(Ge,R({},nn)):null;let Fe;Y?Fe=!0:a||H?Fe=void 0:Fe=!1;function rn(O){!ae&&(!H||g)&&O.currentTarget===O.target&&l.focusItem(O,j)}function sn(O){var we,Ae,at,ct;z==null||z(O),!(te||O.relatedTarget&&$e(O.relatedTarget,ue.current)&&(O.target&&((Ae=(we=O.target)==null?void 0:we.dataset)==null?void 0:Ae.element)==="labelInput"&&$e(O.target,ue.current)||((ct=(at=O.relatedTarget)==null?void 0:at.dataset)==null?void 0:ct.element)==="labelInput"))&&l.removeFocusedItem()}const ln=O=>{var we,Ae;_==null||_(O),((Ae=(we=O.target)==null?void 0:we.dataset)==null?void 0:Ae.element)!=="labelInput"&&l.handleItemKeyDown(O,j)},an=Ye({itemId:j,treeId:d,id:A}),cn=l.canItemBeTabbed(j)?0:-1,Ne={rootRefObject:ue,contentRefObject:Ce,interactions:{handleSaveItemLabel:Ie,handleCancelItemLabelEditing:ce}},un=((rt=V.root)==null?void 0:rt.call(V,R({},Ne,{externalEventHandlers:W(K)})))??{},dn=((it=V.content)==null?void 0:it.call(V,R({},Ne,{externalEventHandlers:W(C)})))??{},nt=((st=V.dragAndDropOverlay)==null?void 0:st.call(V,R({},Ne,{externalEventHandlers:{}})))??{},ot=((lt=V.labelInput)==null?void 0:lt.call(V,R({},Ne,{externalEventHandlers:{}})))??{};return r.jsx(Zt,{itemId:j,children:r.jsxs(_o,R({className:ze(k.root,y),role:"treeitem","aria-expanded":de?U:void 0,"aria-selected":Fe,"aria-disabled":H||void 0,id:an,tabIndex:cn},K,{ownerState:he,onFocus:rn,onBlur:sn,onKeyDown:ln,ref:Me,style:p?R({},K.style,{"--TreeView-itemDepth":typeof c=="function"?c(j):c}):K.style},un,{children:[r.jsx(Bo,R({as:x,classes:{root:k.content,expanded:k.expanded,selected:k.selected,focused:k.focused,disabled:k.disabled,editable:k.editable,editing:k.editing,iconContainer:k.iconContainer,label:k.label,labelInput:k.labelInput,checkbox:k.checkbox},label:E,itemId:j,onClick:P,onMouseDown:h,icon:on,expansionIcon:S,displayIcon:De,ownerState:he},C,dn,nt.action==null?{}:{dragAndDropOverlayProps:nt},ot.value==null?{}:{labelInputProps:ot},{ref:Pe})),u&&r.jsx(zo,R({as:T},s,{children:u}))]}))})}),Uo=["ownerState"];function Go({slots:e,slotProps:t,label:n,id:o,itemId:i,itemsToRender:g}){const p=(e==null?void 0:e.item)??Ko,a=xe({elementType:p,externalSlotProps:t==null?void 0:t.item,additionalProps:{itemId:i,id:o,label:n},ownerState:{itemId:i,label:n}}),f=se(a,Uo),d=w.useMemo(()=>g?r.jsx(Qt,{itemsToRender:g,slots:e,slotProps:t}):null,[g,e,t]);return r.jsx(p,R({},f,{children:d}))}function Qt(e){const{itemsToRender:t,slots:n,slotProps:o}=e;return r.jsx(w.Fragment,{children:t.map(i=>r.jsx(Go,{slots:n,slotProps:o,label:i.label,id:i.id,itemId:i.itemId,itemsToRender:i.children},i.itemId))})}const qo=Ot(),Wo=e=>{const{classes:t}=e;return Dt({root:["root"]},Qn,t)},Jo=X("ul",{name:"MuiRichTreeView",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,margin:0,listStyle:"none",outline:0,position:"relative"}),pr=w.forwardRef(function(t,n){const o=qo({props:t,name:"MuiRichTreeView"}),{getRootProps:i,contextValue:g,instance:p}=lo({plugins:jo,rootRef:n,props:o}),{slots:a,slotProps:f}=o,d=Wo(o),l=(a==null?void 0:a.root)??Jo,c=xe({elementType:l,externalSlotProps:f==null?void 0:f.root,className:d.root,getSlotProps:i,ownerState:o});return r.jsx(ao,{value:g,children:r.jsx(l,R({},c,{children:r.jsx(Qt,{slots:a,slotProps:f,itemsToRender:p.getItemsToRender()})}))})}),Yt=e=>Array.isArray(e)?e.length>0&&e.some(Yt):!!e,Xo=({itemId:e,children:t})=>{const{instance:n,selection:{multiSelect:o},publicAPI:i}=ve(),g={expandable:Yt(t),expanded:n.isItemExpanded(e),focused:n.isItemFocused(e),selected:n.isItemSelected(e),disabled:n.isItemDisabled(e),editing:n!=null&&n.isItemBeingEdited?n==null?void 0:n.isItemBeingEdited(e):!1,editable:n.isItemEditable?n.isItemEditable(e):!1},p=u=>{if(g.disabled)return;g.focused||n.focusItem(u,e);const y=o&&(u.shiftKey||u.ctrlKey||u.metaKey);g.expandable&&!(y&&n.isItemExpanded(e))&&n.toggleItemExpansion(u,e)},a=u=>{if(g.disabled)return;!g.focused&&!g.editing&&n.focusItem(u,e),o&&(u.shiftKey||u.ctrlKey||u.metaKey)?u.shiftKey?n.expandSelectionRange(u,e):n.selectItem({event:u,itemId:e,keepExistingSelection:!0}):n.selectItem({event:u,itemId:e,shouldBeSelected:!0})},f=u=>{const y=u.nativeEvent.shiftKey;o&&y?n.expandSelectionRange(u,e):n.selectItem({event:u,itemId:e,keepExistingSelection:o,shouldBeSelected:u.target.checked})},d=()=>{ye(n,J)&&n.isItemEditable(e)&&(n.isItemBeingEdited(e)?n.setEditedItemId(null):n.setEditedItemId(e))};return{interactions:{handleExpansion:p,handleSelection:a,handleCheckboxSelection:f,toggleItemEditing:d,handleSaveItemLabel:(u,y)=>{ye(n,J)&&n.isItemBeingEditedRef(e)&&(n.updateItemLabel(e,y),d(),n.focusItem(u,e))},handleCancelItemLabelEditing:u=>{ye(n,J)&&n.isItemBeingEditedRef(e)&&(d(),n.focusItem(u,e))}},status:g,publicAPI:i}},Zo=e=>{const{runItemPlugins:t,items:{onItemClick:n,disabledItemsFocusable:o,indentationAtItemLevel:i},selection:{disableSelection:g,checkboxSelection:p},expansion:{expansionTrigger:a},treeId:f,instance:d,publicAPI:l}=ve(),c=w.useContext(et),{id:m,itemId:u,label:y,children:b,rootRef:I}=e,{rootRef:x,contentRef:C,propsEnhancers:j}=t(e),{interactions:A,status:E}=Xo({itemId:u,children:b}),P=w.useRef(null),h=w.useRef(null),z=je(I,x,P),_=je(C,h),K=w.useRef(null),U=Ye({itemId:u,treeId:f,id:m}),ae=d.canItemBeTabbed(u)?0:-1,Y={rootRefObject:P,contentRefObject:h,interactions:A},H=k=>T=>{var v;if((v=k.onFocus)==null||v.call(k,T),T.defaultMuiPrevented)return;const s=!E.disabled||o;!E.focused&&s&&T.currentTarget===T.target&&d.focusItem(T,u)},te=k=>T=>{var v,M,D,L,S;if((v=k.onBlur)==null||v.call(k,T),T.defaultMuiPrevented)return;const s=d.getItemDOMElement(u);E.editing||T.relatedTarget&&$e(T.relatedTarget,s)&&(T.target&&((D=(M=T.target)==null?void 0:M.dataset)==null?void 0:D.element)==="labelInput"&&$e(T.target,s)||((S=(L=T.relatedTarget)==null?void 0:L.dataset)==null?void 0:S.element)==="labelInput")||d.removeFocusedItem()},be=k=>T=>{var s,v,M;(s=k.onKeyDown)==null||s.call(k,T),!(T.defaultMuiPrevented||((M=(v=T.target)==null?void 0:v.dataset)==null?void 0:M.element)==="labelInput")&&d.handleItemKeyDown(T,u)},ce=k=>T=>{var s;(s=k.onDoubleClick)==null||s.call(k,T),!T.defaultMuiPrevented&&A.toggleItemEditing()},Ie=k=>T=>{var s,v;(s=k.onClick)==null||s.call(k,T),n==null||n(T,u),!(T.defaultMuiPrevented||(v=K.current)!=null&&v.contains(T.target))&&(a==="content"&&A.handleExpansion(T),p||A.handleSelection(T))},N=k=>T=>{var s;(s=k.onMouseDown)==null||s.call(k,T),!T.defaultMuiPrevented&&(T.shiftKey||T.ctrlKey||T.metaKey||E.disabled)&&T.preventDefault()},ne=k=>T=>{var s;(s=k.onChange)==null||s.call(k,T),!T.defaultMuiPrevented&&(g||E.disabled||A.handleCheckboxSelection(T))},V=k=>T=>{var s;(s=k.onClick)==null||s.call(k,T),!T.defaultMuiPrevented&&a==="iconContainer"&&A.handleExpansion(T)};return{getRootProps:(k={})=>{var D;const T=R({},W(e),W(k));let s;E.selected?s=!0:g||E.disabled?s=void 0:s=!1;const v=R({},T,{ref:z,role:"treeitem",tabIndex:ae,id:U,"aria-expanded":E.expandable?E.expanded:void 0,"aria-selected":s,"aria-disabled":E.disabled||void 0},k,{onFocus:H(T),onBlur:te(T),onKeyDown:be(T)});i&&(v.style={"--TreeView-itemDepth":typeof c=="function"?c(u):c});const M=((D=j.root)==null?void 0:D.call(j,R({},Y,{externalEventHandlers:T})))??{};return R({},v,M)},getContentProps:(k={})=>{var M;const T=W(k),s=R({},T,k,{ref:_,onClick:Ie(T),onMouseDown:N(T),status:E});i&&(s.indentationAtItemLevel=!0);const v=((M=j.content)==null?void 0:M.call(j,R({},Y,{externalEventHandlers:T})))??{};return R({},s,v)},getGroupTransitionProps:(k={})=>{const T=W(k),s=R({},T,{unmountOnExit:!0,component:"ul",role:"group",in:E.expanded,children:b},k);return i&&(s.indentationAtItemLevel=!0),s},getIconContainerProps:(k={})=>{const T=W(k);return R({},T,k,{onClick:V(T)})},getCheckboxProps:(k={})=>{const T=W(k);return R({},T,{visible:p,ref:K,checked:E.selected,disabled:g||E.disabled,tabIndex:-1},k,{onChange:ne(T)})},getLabelProps:(k={})=>{const T=R({},W(k)),s=R({},T,{children:y},k,{onDoubleClick:ce(T)});return d.isTreeViewEditable&&(s.editable=E.editable),s},getLabelInputProps:(k={})=>{var v;const T=W(k),s=((v=j.labelInput)==null?void 0:v.call(j,{rootRefObject:P,contentRefObject:h,externalEventHandlers:T,interactions:A}))??{};return R({},k,s)},getDragAndDropOverlayProps:(k={})=>{var v;const T=W(k),s=((v=j.dragAndDropOverlay)==null?void 0:v.call(j,R({},Y,{externalEventHandlers:T})))??{};return R({},k,s)},rootRef:z,status:E,publicAPI:l}},fr=Zo;function gr(e){const{slots:t,slotProps:n,status:o}=e,i=ve(),g=R({},i.icons.slots,{expandIcon:i.icons.slots.expandIcon??Jt,collapseIcon:i.icons.slots.collapseIcon??Xt}),p=i.icons.slotProps;let a;t!=null&&t.icon?a="icon":o.expandable?o.expanded?a="collapseIcon":a="expandIcon":a="endIcon";const f=(t==null?void 0:t[a])??g[a],d=xe({elementType:f,externalSlotProps:l=>R({},ie(p[a],l),ie(n==null?void 0:n[a],l)),ownerState:{}});return f?r.jsx(f,R({},d)):null}const Qo=["visible"],mr=X("li",{name:"MuiTreeItem2",slot:"Root",overridesResolver:(e,t)=>t.root})({listStyle:"none",margin:0,padding:0,outline:0}),br=X("div",{name:"MuiTreeItem2",slot:"Content",overridesResolver:(e,t)=>t.content,shouldForwardProp:e=>Se(e)&&e!=="status"&&e!=="indentationAtItemLevel"})(({theme:e})=>({padding:e.spacing(.5,1),borderRadius:e.shape.borderRadius,width:"100%",boxSizing:"border-box",position:"relative",display:"flex",alignItems:"center",gap:e.spacing(1),cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:`calc(${e.spacing(1)} + var(--TreeView-itemChildrenIndentation) * var(--TreeView-itemDepth))`}},{props:({status:t})=>t.disabled,style:{opacity:(e.vars||e).palette.action.disabledOpacity,backgroundColor:"transparent"}},{props:({status:t})=>t.focused,style:{backgroundColor:(e.vars||e).palette.action.focus}},{props:({status:t})=>t.selected,style:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:le(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:le(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:le(e.palette.primary.main,e.palette.action.selectedOpacity)}}}},{props:({status:t})=>t.selected&&t.focused,style:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:le(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}]})),Ir=X("div",{name:"MuiTreeItem2",slot:"Label",overridesResolver:(e,t)=>t.label,shouldForwardProp:e=>Se(e)&&e!=="editable"})(({theme:e})=>R({width:"100%",boxSizing:"border-box",minWidth:0,position:"relative",overflow:"hidden"},e.typography.body1,{variants:[{props:({editable:t})=>t,style:{paddingLeft:"2px"}}]})),hr=X("div",{name:"MuiTreeItem2",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})({width:16,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}}),xr=X(St,{name:"MuiTreeItem2",slot:"GroupTransition",overridesResolver:(e,t)=>t.groupTransition,shouldForwardProp:e=>Se(e)&&e!=="indentationAtItemLevel"})({margin:0,padding:0,paddingLeft:"var(--TreeView-itemChildrenIndentation)",variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:0}}]}),yr=X(w.forwardRef((e,t)=>{const{visible:n}=e,o=se(e,Qo);return n?r.jsx(Rt,R({},o,{ref:t})):null}),{name:"MuiTreeItem2",slot:"Checkbox",overridesResolver:(e,t)=>t.checkbox})({padding:0}),Ve="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='icon%20icon-tabler%20icons-tabler-outline%20icon-tabler-tool'%3e%3cpath%20stroke='none'%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M7%2010h3v-3l-3.5%20-3.5a6%206%200%200%201%208%208l6%206a2%202%200%200%201%20-3%203l-6%20-6a6%206%200%200%201%20-8%20-8l3.5%203.5'%20/%3e%3c/svg%3e",Ht=({type:e,children:t,isDarkMode:n})=>{const o=i=>{switch(i){case"string":return{color:n?"#9cdcfe":"green"};case"number":return{color:n?"#b5cea8":"darkorange"};case"boolean":return{color:n?"#569cd6":"blue"};case"null":return{color:n?"#d4d4d4":"magenta"};case"key":return{color:"#ff5733"};default:return{}}};return r.jsx("span",{style:o(e),children:t})};function Yo(e,t){if(!e)return[];const n=[];let o=0;const i=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),g=/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g;let p,a=0;for(;(p=g.exec(i))!==null;){if(p.index>a){const l=i.substring(a,p.index);l&&n.push(r.jsx("span",{children:l},`plain-${o++}`))}let f="number";const d=p[0];/^"/.test(d)?/:$/.test(d)?f="key":f="string":/true|false/.test(d)?f="boolean":/null/.test(d)&&(f="null"),n.push(r.jsx(Ht,{type:f,isDarkMode:t,children:d},`token-${o++}`)),a=p.index+p[0].length}if(a<i.length){const f=i.substring(a);f&&n.push(r.jsx("span",{children:f},`remaining-${o++}`))}return n}const ee=({data:e,maxHeight:t="400px"})=>{const n=Mt(),i=Pt(a=>a.customization).isDarkMode,g=JSON.stringify(e,null,2),p=Yo(g,i);return r.jsx($,{sx:{border:1,borderColor:"divider",borderRadius:1,p:2,backgroundColor:n.palette.background.default,width:"100%",overflow:"auto",maxHeight:t},children:r.jsx("pre",{style:{margin:0,fontFamily:"'Inter', 'Roboto', 'Arial', sans-serif",fontSize:"0.875rem",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:p})})};ee.propTypes={data:G.object,maxHeight:G.string};Ht.propTypes={type:G.string.isRequired,children:G.node.isRequired,isDarkMode:G.bool.isRequired};const Ho=(e,t)=>me.post(`/internal-prediction/${e}`,t),er=(e,t)=>me.post(`/internal-prediction/stream/${e}`,t),tr=(e,t)=>me.post(`/prediction/${e}`,t),wt={sendMessageAndGetPrediction:Ho,sendMessageAndStreamPrediction:er,sendMessageAndGetPredictionPublic:tr},en=({data:e,label:t,status:n,metadata:o,isPublic:i,onProceedSuccess:g})=>{var N,ne,V,ue,Ce,Me,Pe,oe,Te,de,he,k,T;const[p,a]=w.useState("rendered"),[f,d]=w.useState(!1),[l,c]=w.useState(""),[m,u]=w.useState(""),[y,b]=w.useState(!1),[I,x]=w.useState(""),[C,j]=w.useState(!1),[A,E]=w.useState({}),P=Pt(s=>s.customization),h=Mt(),{enqueueSnackbar:z}=gn(),_=s=>{const v=P.isDarkMode;switch(s){case"assistant":case"ai":return{bg:v?fe(h.palette.success.dark,.5):h.palette.success.light,color:v?"white":h.palette.success.dark,border:h.palette.success.main};case"system":return{bg:v?fe(h.palette.warning.dark,.5):h.palette.warning.light,color:v?"white":h.palette.warning.dark,border:h.palette.warning.main};case"developer":return{bg:v?fe(h.palette.info.dark,.5):h.palette.info.light,color:v?"white":h.palette.info.dark,border:h.palette.info.main};case"user":case"human":return{bg:v?fe(h.palette.primary.main,.5):h.palette.primary.light,color:v?"white":h.palette.primary.dark,border:h.palette.primary.main};case"tool":case"function":return{bg:v?fe(h.palette.secondary.main,.5):h.palette.secondary.light,color:v?"white":h.palette.secondary.dark,border:h.palette.secondary.main};default:return{bg:v?fe(h.palette.grey[700],.5):h.palette.grey[300],color:v?"white":h.palette.grey[800],border:v?h.palette.grey[600]:h.palette.grey[500]}}},K=(s,v)=>{s.stopPropagation(),v!==null&&a(v)},U=async(s,v="")=>{b(!0),x("Submitting feedback...");const M={question:v||s.charAt(0).toUpperCase()+s.slice(1),chatId:o==null?void 0:o.sessionId,humanInput:{type:s,startNodeId:e.id,feedback:v}};try{let D;i?D=await wt.sendMessageAndGetPredictionPublic(o==null?void 0:o.agentflowId,M):D=await wt.sendMessageAndGetPrediction(o==null?void 0:o.agentflowId,M),D&&D.data&&(z("Successfully submitted response",{variant:"success"}),g&&g(D.data))}catch(D){console.error(D),z((D==null?void 0:D.message)||"Failed to submit response",{variant:"error"})}finally{b(!1),x("")}},ae=()=>{e.input&&e.input.humanInputEnableFeedback?(u("proceed"),d(!0)):U("proceed")},Y=()=>{e.input&&e.input.humanInputEnableFeedback?(u("reject"),d(!0)):U("reject")},H=s=>{const v=s.src;Array.isArray(v)||typeof v=="object"?navigator.clipboard.writeText(JSON.stringify(v,null,"  ")):navigator.clipboard.writeText(v)},te=(s,v)=>{E({data:s,title:v}),j(!0)},be=()=>{U(m,l),d(!1),c(""),u("")},ce=async s=>{try{const v=await xn.post(`${Z}/api/v1/openai-assistants-file/download`,{fileName:s.fileName,chatflowId:o==null?void 0:o.agentflowId,chatId:o==null?void 0:o.sessionId},{responseType:"blob"}),M=new Blob([v.data],{type:v.headers["content-type"]}),D=window.URL.createObjectURL(M),L=document.createElement("a");L.href=D,L.download=s.fileName,document.body.appendChild(L),L.click(),L.remove()}catch(v){console.error("Download failed:",v)}},Ie=s=>s.filter(M=>M.isFulfilled).map((M,D)=>M.type==="string"&&M.operation==="equal"&&M.value1===""&&M.value2===""?r.jsx($,{sx:{border:1,borderColor:"success.main",borderRadius:1,p:2,backgroundColor:h.palette.background.default},children:r.jsxs($,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(q,{variant:"body1",children:"Else condition fulfilled"}),r.jsx(Q,{label:M.isFulfilled?"Fulfilled":"Not Fulfilled",size:"small",sx:{color:"white",backgroundColor:h.palette.success.dark},variant:"filled"})]})},`else-${D}`):r.jsxs($,{sx:{border:1,borderColor:"success.main",borderRadius:1,p:2,backgroundColor:h.palette.background.default},children:[r.jsxs($,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[r.jsxs(q,{variant:"subtitle2",children:["Condition ",D]}),r.jsx(Q,{label:M.isFulfilled?"Fulfilled":"Not Fulfilled",size:"small",variant:"filled",sx:{color:"white",backgroundColor:h.palette.success.dark}})]}),r.jsx(ee,{data:M})]},`condition-${D}`));return r.jsxs($,{sx:{position:"relative"},children:[r.jsxs($,{sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:[r.jsx($,{item:!0,style:{width:50},children:(()=>{var M;const s=(e==null?void 0:e.name)||((M=e==null?void 0:e.id)==null?void 0:M.split("_")[0]),v=mn.find(D=>D.name===s);return v?r.jsx("div",{style:{...h.typography.commonAvatar,...h.typography.mediumAvatar,borderRadius:"15px",backgroundColor:v.color,display:"flex",justifyContent:"center",alignItems:"center",background:v.color,cursor:"default"},children:r.jsx(v.icon,{size:20,color:"white"})}):r.jsx("div",{style:{...h.typography.commonAvatar,...h.typography.mediumAvatar,borderRadius:"50%",backgroundColor:"white",cursor:"default"},children:r.jsx("img",{style:{width:"100%",height:"100%",padding:5,objectFit:"contain"},src:`${Z}/api/v1/node-icon/${s}`,alt:s})})})()}),r.jsx(q,{variant:"h5",gutterBottom:!0,children:t}),r.jsx("div",{style:{flex:1}}),e.output&&e.output.timeMetadata&&e.output.timeMetadata.delta&&r.jsx(Q,{icon:r.jsx(Tn,{size:17}),label:`${(e.output.timeMetadata.delta/1e3).toFixed(2)} seconds`,variant:"contained",color:"secondary",size:"small",sx:{ml:1,"& .MuiChip-icon":{mr:.2,ml:1}}}),e.output&&e.output.usageMetadata&&e.output.usageMetadata.total_tokens&&r.jsx(Q,{icon:r.jsx(Rn,{size:17}),label:`${e.output.usageMetadata.total_tokens} tokens`,variant:"contained",color:"primary",size:"small",sx:{ml:1,"& .MuiChip-icon":{mr:.2,ml:1}}})]}),r.jsx($,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2},children:r.jsxs(wn,{sx:{borderRadius:2,maxHeight:40},value:p,color:"primary",exclusive:!0,onChange:K,children:[r.jsx(ut,{sx:{borderColor:h.palette.grey[900]+25,borderRadius:2,color:(N=h==null?void 0:h.customization)!=null&&N.isDarkMode?"white":"inherit"},variant:"contained",value:"rendered",title:"Rendered",children:"Rendered"}),r.jsx(ut,{sx:{borderColor:h.palette.grey[900]+25,borderRadius:2,color:(ne=h==null?void 0:h.customization)!=null&&ne.isDarkMode?"white":"inherit"},variant:"contained",value:"raw",title:"Raw",children:"Raw"})]})}),p==="rendered"&&r.jsxs($,{children:[e.output&&e.output.availableTools&&e.output.availableTools.length>0&&r.jsxs($,{children:[r.jsx(q,{sx:{mt:2},variant:"h5",gutterBottom:!0,children:"Tools"}),e.output.availableTools.map((s,v)=>{var D;const M=e.output.usedTools&&Array.isArray(e.output.usedTools)&&e.output.usedTools.some(L=>L.tool===s.name);return r.jsxs(mt,{sx:{mb:1,"&:before":{display:"none"},backgroundColor:M?(D=h==null?void 0:h.customization)!=null&&D.isDarkMode?`${h.palette.success.dark}22`:`${h.palette.success.light}44`:h.palette.background.default,border:1,borderRadius:1,borderColor:M?"success.main":"divider",overflow:"hidden"},children:[r.jsx(bt,{expandIcon:r.jsx(dt,{}),"aria-controls":`tool-${v}-content`,id:`tool-${v}-header`,children:r.jsxs($,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[r.jsx("div",{style:{...h.typography.commonAvatar,...h.typography.smallAvatar,marginRight:8,borderRadius:"50%",backgroundColor:"white",overflow:"hidden"},children:r.jsx("img",{style:{width:"100%",height:"100%",padding:3,objectFit:"contain"},src:(()=>{if(e.output&&e.output.availableTools&&Array.isArray(e.output.availableTools)){const L=e.output.availableTools.find(S=>S.name===s.name);if(L&&L.toolNode&&L.toolNode.name)return`${Z}/api/v1/node-icon/${L.toolNode.name}`}return`${Z}/api/v1/node-icon/${s.name}`})(),alt:s.name,onError:L=>{L.target.onerror=null,L.target.style.padding="5px",L.target.src=Ve}})}),r.jsx(q,{variant:"body1",children:(()=>{if(e.output&&e.output.availableTools&&Array.isArray(e.output.availableTools)){const L=e.output.availableTools.find(S=>S.name===s.name);if(L&&L.toolNode)return L.toolNode.label||s.name}return s.name||"Tool Call"})()}),M&&r.jsx(Q,{label:"Used",size:"small",sx:{ml:2,color:"white",backgroundColor:h.palette.success.dark}})]})}),r.jsx(It,{children:r.jsx(ee,{data:s})})]},`tool-${v}`)})]}),r.jsx(q,{sx:{mt:2},variant:"h5",gutterBottom:!0,children:"Input"}),e&&e.input&&e.input.messages&&Array.isArray(e.input.messages)&&e.input.messages.length>0?e.input.messages.map((s,v)=>{var M,D,L;return r.jsxs($,{sx:{mt:1,border:1,borderColor:"divider",borderRadius:1,p:1,pl:2,pr:2,backgroundColor:h.palette.background.default},children:[r.jsx(Q,{sx:{mt:1,backgroundColor:_(s.role).bg,color:_(s.role).color,borderColor:_(s.role).border},label:s.role,variant:"outlined",size:"small"}),s.name&&r.jsx(Q,{sx:{mt:1,ml:1,backgroundColor:_(s.role).bg,color:_(s.role).color,borderColor:_(s.role).border},label:s.name,variant:"outlined",size:"small"}),s.tool_calls&&(Array.isArray(s.tool_calls)?s.tool_calls.map((S,F)=>{var pe;return r.jsxs(mt,{sx:{mt:1,mb:1,"&:before":{display:"none"},backgroundColor:(pe=h==null?void 0:h.customization)!=null&&pe.isDarkMode?`${h.palette.warning.dark}22`:`${h.palette.warning.light}44`,border:1,borderRadius:1,borderColor:"warning.main",overflow:"hidden"},children:[r.jsx(bt,{expandIcon:r.jsx(dt,{color:P.isDarkMode?"white":fe(h.palette.warning.dark,.5)}),"aria-controls":`tool-call-${F}-content`,id:`tool-call-${F}-header`,children:r.jsxs($,{sx:{display:"flex",alignItems:"center"},children:[r.jsx("div",{style:{...h.typography.commonAvatar,...h.typography.smallAvatar,marginRight:8,borderRadius:"50%",backgroundColor:"white",overflow:"hidden"},children:r.jsx("img",{style:{width:"100%",height:"100%",padding:3,objectFit:"contain"},src:(()=>{if(e.output&&e.output.availableTools&&Array.isArray(e.output.availableTools)){const B=e.output.availableTools.find(De=>De.name===S.name);if(B&&B.toolNode&&B.toolNode.name)return`${Z}/api/v1/node-icon/${B.toolNode.name}`}return`${Z}/api/v1/node-icon/${S.name}`})(),alt:S.name,onError:B=>{B.target.onerror=null,B.target.style.padding="5px",B.target.src=Ve}})}),r.jsx(q,{variant:"body1",children:(()=>{if(e.output&&e.output.availableTools&&Array.isArray(e.output.availableTools)){const B=e.output.availableTools.find(De=>De.name===S.name);if(B&&B.toolNode)return B.toolNode.label||S.name}return S.name||"Tool Call"})()}),r.jsx(Q,{label:"Called",size:"small",sx:{ml:2,color:"white",backgroundColor:fe(h.palette.warning.dark,.5)}})]})}),r.jsx(It,{children:r.jsx(ee,{data:S})})]},`tool-call-${F}`)}):r.jsx(ee,{data:s.tool_calls})),s.role==="tool"&&s.name&&r.jsxs($,{sx:{display:"flex",alignItems:"center",mb:1,mt:1,py:1},children:[r.jsx("div",{style:{...h.typography.commonAvatar,...h.typography.smallAvatar,marginRight:8,borderRadius:"50%",backgroundColor:"white",overflow:"hidden"},children:r.jsx("img",{style:{width:"100%",height:"100%",padding:3,objectFit:"contain"},src:(()=>{if(e.output&&e.output.availableTools&&Array.isArray(e.output.availableTools)){const S=e.output.availableTools.find(F=>F.name===s.name);if(S&&S.toolNode&&S.toolNode.name)return`${Z}/api/v1/node-icon/${S.toolNode.name}`}return`${Z}/api/v1/node-icon/${s.name}`})(),alt:s.name,onError:S=>{S.target.onerror=null,S.target.style.padding="5px",S.target.src=Ve}})}),r.jsxs(q,{variant:"body1",children:[(()=>{if(e.output&&e.output.availableTools&&Array.isArray(e.output.availableTools)){const S=e.output.availableTools.find(F=>F.name===s.name);if(S&&S.toolNode)return S.toolNode.label||s.name}return s.name})(),s.tool_call_id&&r.jsx(Q,{label:s.tool_call_id,size:"small",variant:"outlined",sx:{ml:1,height:"20px",color:"info",border:1,py:1.5,borderColor:P.isDarkMode?"white":"divider"}})]})]}),((M=s.additional_kwargs)==null?void 0:M.usedTools)&&s.additional_kwargs.usedTools.length>0&&r.jsx("div",{style:{display:"block",flexDirection:"row",width:"100%",marginTop:"10px"},children:s.additional_kwargs.usedTools.map((S,F)=>S?r.jsx(Q,{size:"small",label:S.tool,sx:{mr:1,mt:1,borderColor:S.error?"error.main":void 0,color:S.error?"error.main":void 0},variant:"outlined",icon:r.jsx(pt,{size:15,color:S.error?h.palette.error.main:void 0}),onClick:()=>te(S,"Used Tools")},F):null)}),((D=s.additional_kwargs)==null?void 0:D.artifacts)&&s.additional_kwargs.artifacts.length>0&&r.jsx($,{sx:{mt:2,mb:1},children:r.jsx($,{sx:{display:"flex",flexDirection:"column",gap:2},children:s.additional_kwargs.artifacts.map((S,F)=>S.type==="png"||S.type==="jpeg"?r.jsx(qe,{sx:{p:0,m:0,flex:"0 0 auto",border:1,borderColor:"divider",borderRadius:1,overflow:"hidden"},children:r.jsx(We,{component:"img",image:S.data.startsWith("FILE-STORAGE::")?`${Z}/api/v1/get-upload-file?chatflowId=${o==null?void 0:o.agentflowId}&chatId=${o==null?void 0:o.sessionId}&fileName=${S.data.replace("FILE-STORAGE::","")}`:S.data,sx:{height:"auto",maxHeight:"500px",objectFit:"contain"},alt:`artifact-${F}`})},`artifact-${F}`):S.type==="html"?r.jsx($,{sx:{mt:1,border:1,borderColor:"divider",borderRadius:1,p:2,backgroundColor:h.palette.background.paper},children:r.jsx(xt,{html:S.data})},`artifact-${F}`):r.jsx($,{sx:{mt:1,border:1,borderColor:"divider",borderRadius:1,p:2,backgroundColor:h.palette.background.paper},children:r.jsx(ge,{children:S.data})},`artifact-${F}`))})}),s.role==="user"&&Array.isArray(s.content)&&s.content.length>0&&s.content.map((S,F)=>r.jsx(qe,{sx:{p:0,m:0,flex:"0 0 auto",border:1,borderColor:"divider",borderRadius:1,overflow:"hidden",maxWidth:"100%",mb:2,mt:2},children:r.jsx(We,{component:"img",image:S.type==="stored-file"?`${Z}/api/v1/get-upload-file?chatflowId=${o==null?void 0:o.agentflowId}&chatId=${o==null?void 0:o.sessionId}&fileName=${S.name}`:S.name,onError:pe=>{pe.target.onerror=null,pe.target.style.padding="5px",pe.target.src=Ve},sx:{height:"auto",maxHeight:"500px",width:"100%",objectFit:"contain",display:"block"},alt:`file-uploads-${F}`})},`file-uploads-${F}`)),(()=>{if(s.content)try{const S=JSON.parse(s.content);return r.jsx("div",{style:{marginTop:10,marginBottom:10},children:r.jsx(ee,{data:S})})}catch{return r.jsx(ge,{children:s.content})}else return r.jsx(ge,{children:"*No data*"})})(),((L=s.additional_kwargs)==null?void 0:L.fileAnnotations)&&s.additional_kwargs.fileAnnotations.length>0&&r.jsx("div",{style:{display:"block",flexDirection:"row",width:"100%",marginTop:"16px",marginBottom:"8px"},children:s.additional_kwargs.fileAnnotations.map((S,F)=>r.jsx(ke,{sx:{fontSize:"0.85rem",textTransform:"none",mb:1,mr:1},variant:"outlined",onClick:()=>ce(S),endIcon:r.jsx(ht,{color:h.palette.primary.main}),children:S.fileName},F))})]},v)}):(V=e==null?void 0:e.input)!=null&&V.form||(ue=e==null?void 0:e.input)!=null&&ue.http||(Ce=e==null?void 0:e.input)!=null&&Ce.conditions?r.jsx(ee,{data:e.input.form||e.input.http||e.input.conditions}):(Me=e==null?void 0:e.input)!=null&&Me.code?r.jsx($,{sx:{mt:1,border:1,borderColor:"divider",borderRadius:1,overflow:"hidden",backgroundColor:h.palette.background.default},children:r.jsx(Cn,{disabled:!0,value:e.input.code,height:"max-content",theme:P.isDarkMode?"dark":"light",lang:"js",basicSetup:{lineNumbers:!1,foldGutter:!1,autocompletion:!1,highlightActiveLine:!1}})}):r.jsx($,{sx:{mt:1,border:1,borderColor:"divider",borderRadius:1,p:1,pl:2,pr:2,backgroundColor:h.palette.background.default},children:r.jsx(ge,{children:((Pe=e==null?void 0:e.input)==null?void 0:Pe.question)||"*No data*"})}),r.jsx(q,{sx:{mt:2},variant:"h5",gutterBottom:!0,children:"Output"}),(oe=e==null?void 0:e.output)!=null&&oe.form||(Te=e==null?void 0:e.output)!=null&&Te.http?r.jsx(ee,{data:e.output.form||e.output.http}):(de=e==null?void 0:e.output)!=null&&de.conditions?Ie(e.output.conditions):r.jsxs($,{sx:{mt:1,border:1,borderColor:"divider",borderRadius:1,p:1,pl:2,pr:2,backgroundColor:h.palette.background.default},children:[((he=e.output)==null?void 0:he.usedTools)&&e.output.usedTools.length>0&&r.jsx("div",{style:{display:"block",flexDirection:"row",width:"100%"},children:e.output.usedTools.map((s,v)=>s?r.jsx(Q,{size:"small",label:s.tool,sx:{mr:1,mt:1,borderColor:s.error?"error.main":void 0,color:s.error?"error.main":void 0},variant:"outlined",icon:r.jsx(pt,{size:15,color:s.error?h.palette.error.main:void 0}),onClick:()=>te(s,"Used Tools")},v):null)}),((k=e.output)==null?void 0:k.artifacts)&&e.output.artifacts.length>0&&r.jsx($,{sx:{mt:2,mb:1},children:r.jsx($,{sx:{display:"flex",flexDirection:"column",gap:2},children:e.output.artifacts.map((s,v)=>s.type==="png"||s.type==="jpeg"||s.type==="jpg"?r.jsx(qe,{sx:{p:0,m:0,flex:"0 0 auto",border:1,borderColor:"divider",borderRadius:1,overflow:"hidden"},children:r.jsx(We,{component:"img",image:s.data.startsWith("FILE-STORAGE::")?`${Z}/api/v1/get-upload-file?chatflowId=${o==null?void 0:o.agentflowId}&chatId=${o==null?void 0:o.sessionId}&fileName=${s.data.replace("FILE-STORAGE::","")}`:s.data,sx:{height:"auto",maxHeight:"500px",objectFit:"contain"},alt:`artifact-${v}`})},`artifact-${v}`):s.type==="html"?r.jsx($,{sx:{mt:1,border:1,borderColor:"divider",borderRadius:1,p:2,backgroundColor:h.palette.background.paper},children:r.jsx(xt,{html:s.data})},`artifact-${v}`):r.jsx($,{sx:{mt:1,border:1,borderColor:"divider",borderRadius:1,p:2,backgroundColor:h.palette.background.paper},children:r.jsx(ge,{children:s.data})},`artifact-${v}`))})}),(()=>{var s,v;if((s=e==null?void 0:e.output)!=null&&s.content)try{const M=JSON.parse(e.output.content);return r.jsx("div",{style:{marginTop:10,marginBottom:10},children:r.jsx(ee,{data:M})})}catch{return r.jsx(ge,{children:((v=e==null?void 0:e.output)==null?void 0:v.content)||"*No data*"})}else return r.jsx(ge,{children:"*No data*"})})(),((T=e.output)==null?void 0:T.fileAnnotations)&&e.output.fileAnnotations.length>0&&r.jsx("div",{style:{display:"block",flexDirection:"row",width:"100%",marginTop:"16px",marginBottom:"8px"},children:e.output.fileAnnotations.map((s,v)=>r.jsx(ke,{sx:{fontSize:"0.85rem",textTransform:"none",mb:1,mr:1},variant:"outlined",onClick:()=>ce(s),endIcon:r.jsx(ht,{color:h.palette.primary.main}),children:s.fileName},v))})]}),e.error&&r.jsxs(r.Fragment,{children:[r.jsx(q,{sx:{mt:2},variant:"h5",gutterBottom:!0,color:"error",children:"Error"}),r.jsx($,{sx:{mt:1,border:1,borderColor:"error.main",borderRadius:1,p:1,pl:2,pr:2,backgroundColor:h.palette.background.default},children:r.jsx(ge,{children:typeof(e==null?void 0:e.error)=="object"?JSON.stringify(e.error,null,2):(e==null?void 0:e.error)||"*No error details*"})})]}),e.state&&Object.keys(e.state).length>0&&r.jsxs(r.Fragment,{children:[r.jsx(q,{sx:{mt:2},variant:"h5",gutterBottom:!0,children:"State"}),r.jsx(ee,{data:e.state})]})]}),p==="raw"&&r.jsx($,{sx:{mt:2,border:1,borderColor:"divider"},onClick:s=>s.stopPropagation(),children:r.jsx(vn,{theme:P.isDarkMode?"ocean":"rjv-default",style:{padding:10,borderRadius:10},src:e,name:null,quotesOnKeys:!1,enableClipboard:s=>H(s),displayDataTypes:!1,collapsed:1})}),n==="STOPPED"&&r.jsxs(r.Fragment,{children:[r.jsxs($,{sx:{position:"fixed",bottom:15,right:25,p:1.5,backgroundColor:h.palette.background.paper,boxShadow:"0 4px 20px rgba(0,0,0,0.15)",borderRadius:"25px",display:"flex",justifyContent:"flex-end",gap:1,zIndex:1e3},children:[r.jsx(ke,{variant:"outlined",color:"error",sx:{borderRadius:"25px"},onClick:Y,disabled:y,children:"Reject"}),r.jsx(ke,{variant:"contained",color:"primary",sx:{borderRadius:"25px"},onClick:ae,disabled:y,children:"Proceed"})]}),r.jsxs(ft,{maxWidth:"md",fullWidth:!0,open:f,onClose:()=>!y&&d(!1),children:[r.jsx(bn,{variant:"h5",children:"Provide Feedback"}),r.jsx(gt,{children:r.jsx(kn,{autoFocus:!0,margin:"dense",label:"Feedback",fullWidth:!0,multiline:!0,rows:4,value:l,onChange:s=>c(s.target.value),disabled:y})}),r.jsxs(In,{children:[r.jsx(ke,{onClick:()=>d(!1),disabled:y,children:"Cancel"}),r.jsx(ke,{onClick:be,variant:"contained",disabled:y,children:"Submit"})]})]}),r.jsx(ft,{open:y,PaperProps:{style:{backgroundColor:h.palette.background.paper,boxShadow:h.shadows[5],borderRadius:8,padding:20}},children:r.jsx(gt,{children:r.jsxs($,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:[r.jsx(hn,{size:60}),r.jsx(q,{variant:"h6",sx:{mt:2},children:I})]})})})]}),r.jsx(yn,{show:C,dialogProps:A,onCancel:()=>j(!1)})]})};en.propTypes={data:G.object.isRequired,label:G.string,status:G.string,metadata:G.object,isPublic:G.bool,onProceedSuccess:G.func};en.displayName="NodeExecutionDetails";export{en as N,pr as R,Zt as T,Ln as a,hr as b,gr as c,Bn as d,dr as e,yr as f,Mo as g,xr as h,mr as i,br as j,Ir as k,wt as p,fr as u};
