import{a as q,t as F,u as W,s as $,d6 as O,r,j as e,M as U,S as x,o as a,Y as X,B as l,a5 as Y,aa as z,bh as H,q as D,i as I,L as J,N as K}from"./index-B5bgjFPS.js";import{I as m}from"./Input-CajAyvOv.js";import{B as Q}from"./BackdropLoader-Ch3nVEPr.js";import{v as Z}from"./validation-D5cE1cK5.js";import{A as _,I as ee}from"./IconExclamationCircle-Dzy6pM40.js";import"./ListItem-BfStHUI0.js";import"./FormControl-o0rphY-g.js";import"./schemas-3ZMdv4w1.js";import"./Close-DT9tpzn1.js";const de=()=>{const u=q();F();const E=W(),j=$(),w=(...s)=>j(J(...s)),f=(...s)=>j(K(...s)),T={label:"Email",name:"email",type:"email",placeholder:"user@company.com"},R={label:"Password",name:"password",type:"password",placeholder:"********"},V={label:"Confirm Password",name:"confirmPassword",type:"password",placeholder:"********"},B={label:"Reset Token",name:"resetToken",type:"text"},[L]=O(),N=L.get("token"),[y,g]=r.useState(""),[n,v]=r.useState(""),[P,k]=r.useState(""),[c,b]=r.useState(N??""),[S,d]=r.useState(!1),[p,i]=r.useState([]),A=()=>{E("/signin",{replace:!0})},M=async s=>{s.preventDefault();const t=[];i([]),c||t.push("Token cannot be left blank!"),n!==P&&t.push("New Password and Confirm Password do not match.");const C=Z(n);if(C.length>0&&t.push(...C),t.length>0){i(t);return}const G={user:{email:y,tempToken:c,password:n}};d(!0);try{const o=await H.resetPassword(G);i([]),d(!1),o.data&&(w({message:"Password reset successful",options:{key:new Date().getTime()+Math.random(),variant:"success",action:h=>e.jsx(D,{style:{color:"white"},onClick:()=>f(h),children:e.jsx(I,{})})}}),g(""),b(""),v(""),k(""),A())}catch(o){d(!1),i([typeof o.response.data=="object"?o.response.data.message:o.response.data]),w({message:"Failed to reset password!",options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:h=>e.jsx(D,{style:{color:"white"},onClick:()=>f(h),children:e.jsx(I,{})})}})}};return e.jsxs(e.Fragment,{children:[e.jsx(U,{children:e.jsxs(x,{flexDirection:"column",sx:{maxWidth:"480px",gap:3},children:[p&&p.length>0&&e.jsx(_,{icon:e.jsx(ee,{}),variant:"filled",severity:"error",children:e.jsx("ul",{style:{margin:0},children:p.map((s,t)=>e.jsx("li",{children:s},t))})}),e.jsxs(x,{sx:{gap:1},children:[e.jsx(a,{variant:"h1",children:"Reset Password"}),e.jsxs(a,{variant:"body2",sx:{color:u.palette.grey[600]},children:[e.jsx(X,{style:{color:u.palette.primary.main},to:"/signin",children:"Back to Login"}),"."]})]}),e.jsx("form",{onSubmit:M,children:e.jsxs(x,{sx:{width:"100%",flexDirection:"column",alignItems:"left",justifyContent:"center",gap:2},children:[e.jsxs(l,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[e.jsxs(a,{children:["Email",e.jsx("span",{style:{color:"red"},children:" *"})]}),e.jsx(a,{align:"left"}),e.jsx("div",{style:{flexGrow:1}})]}),e.jsx(m,{inputParam:T,onChange:s=>g(s),value:y,showDialog:!1})]}),e.jsxs(l,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[e.jsxs(a,{children:["Reset Token",e.jsx("span",{style:{color:"red"},children:" *"})]}),e.jsx("div",{style:{flexGrow:1}})]}),e.jsx(Y,{fullWidth:!0,type:"string",placeholder:"Paste in the reset token.",multiline:!0,rows:3,inputParam:B,onChange:s=>b(s.target.value),value:c,sx:{mt:"8px"}}),e.jsx(a,{variant:"caption",children:e.jsx("i",{children:"Please copy the token you received in your email."})})]}),e.jsxs(l,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[e.jsxs(a,{children:["New Password",e.jsx("span",{style:{color:"red"},children:" *"})]}),e.jsx(a,{align:"left"}),e.jsx("div",{style:{flexGrow:1}})]}),e.jsx(m,{inputParam:R,onChange:s=>v(s),value:n,showDialog:!1}),e.jsx(a,{variant:"caption",children:e.jsx("i",{children:"Password must be at least 8 characters long and contain at least one lowercase letter, one uppercase letter, one digit, and one special character."})})]}),e.jsxs(l,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[e.jsxs(a,{children:["Confirm Password",e.jsx("span",{style:{color:"red"},children:" *"})]}),e.jsx("div",{style:{flexGrow:1}})]}),e.jsx(m,{inputParam:V,onChange:s=>k(s),value:P,showDialog:!1}),e.jsx(a,{variant:"caption",children:e.jsx("i",{children:"Confirm your new password. Must match the password typed above."})})]}),e.jsx(z,{variant:"contained",style:{borderRadius:12,height:40,marginRight:5},type:"submit",children:"Update Password"})]})})]})}),S&&e.jsx(Q,{open:S})]})};export{de as default};
