import{a as j,r as p,j as t,y as A,B as a,d as F,o as h,E as c,q as M,M as R,P as T,u as D,f as E,cM as I,cS as B,am as O}from"./index-B5bgjFPS.js";import{C as L,I as W,a as $,B as G}from"./style-CyLs_DYe.js";/* empty css              */import{N as f,u as _,b as z,R as H}from"./DocStoreInputHandler-BDJBQrwa.js";import{b as J,A as q,S as U}from"./StickyNote-wl5UQ3md.js";import{L as V}from"./llamaindex-B_JSDULd.js";import{M as Z}from"./MarketplaceCanvasHeader-BNtRlBPp.js";import"./Dropdown-D8Rr64ju.js";import"./FormControl-o0rphY-g.js";import"./Autocomplete-CinIIKT5.js";import"./Close-DT9tpzn1.js";import"./TextField-OmGdqrIf.js";import"./InputLabel-BtU13bbu.js";import"./MultiDropdown-BUXEvYds.js";import"./CredentialInputHandler-C4W2GUgN.js";import"./CredentialListDialog-ZkUPpHPz.js";import"./TooltipWithParser-D26Faoyy.js";import"./index-D--Rb2MU.js";import"./Tooltip-CXmeiPEa.js";import"./ConfirmDialog-Dfe34hOz.js";import"./Input-CajAyvOv.js";import"./ListItem-BfStHUI0.js";import"./Switch-D5M093wC.js";import"./main-Dw2W3SKo.js";import"./IconArrowsMaximize-BLCViMbK.js";import"./IconAlertTriangle-7YQ2ldQl.js";import"./InputAdornment-v58Edx4J.js";import"./IconSearch-4bUU90FL.js";import"./Delete-4D-T7tnN.js";import"./IconPlus-j8jP5X4Z.js";import"./GridActionsCellItem-B3aQ_RGo.js";import"./Grid-DGDGmzGP.js";import"./toPropertyKey-C9c9JG92.js";import"./createStyled-DlEbU-rO.js";import"./KeyboardArrowRight-BvTOCIXU.js";import"./LastPage--XaxDP-k.js";import"./Skeleton-DJP3nnUt.js";import"./File-km8sc6Tq.js";import"./CodeEditor-BbQJOBPh.js";import"./index-C-cusT-F.js";import"./suggestionOption-DCQ-1oAJ.js";import"./TabPanel-C-h4h7GL.js";import"./ExpandMore-BZIzyY2F.js";import"./nodes-Qb-8otVq.js";import"./MemoizedReactMarkdown-mGWPD7hJ.js";import"./unsupportedIterableToArray-Bh0GkvIo.js";import"./BackdropLoader-Ch3nVEPr.js";import"./ExpandTextDialog-XWdUWqGp.js";import"./LoadingButton-CJHvS9bV.js";import"./IconTrash-CekgWF9B.js";import"./IconRefresh-CtZoTUkg.js";import"./ToolDialog-DZ6z_iak.js";import"./ExportAsTemplateDialog-481ESzFy.js";import"./AssistantDialog-CJzYVebb.js";import"./assistants-DZYxhrU8.js";import"./v4-CtRu48qb.js";import"./Stepper-BCbMjc86.js";import"./IconLanguage-BXvwKb3u.js";import"./documentstore-CRtiIDJT.js";import"./string-BbYD24iH.js";import"./IconBulb-BQTovKvQ.js";import"./IconCopy-bbAsun7S.js";import"./IconChevronLeft-DxxY-T-U.js";const K=A(R)(({theme:e})=>({background:e.palette.card.main,color:e.darkTextPrimary,border:"solid 1px",borderColor:e.palette.primary[200]+75,width:"300px",height:"auto",padding:"10px",boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)","&:hover":{borderColor:e.palette.primary.main}})),b=({data:e})=>{const i=j(),[m,l]=p.useState(!1),[n,d]=p.useState({}),g=()=>{const o={data:e,inputParams:e.inputParams.filter(s=>s.additionalParams),disabled:!0,confirmButtonName:"Save",cancelButtonName:"Cancel"};d(o),l(!0)};return t.jsxs(t.Fragment,{children:[t.jsx(K,{content:!1,sx:{padding:0,borderColor:e.selected?i.palette.primary.main:i.palette.text.secondary},border:!1,children:t.jsxs(a,{children:[t.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[t.jsx(a,{style:{width:50,marginRight:10,padding:5},children:t.jsx("div",{style:{...i.typography.commonAvatar,...i.typography.largeAvatar,borderRadius:"50%",backgroundColor:"white",cursor:"grab"},children:t.jsx("img",{style:{width:"100%",height:"100%",padding:5,objectFit:"contain"},src:`${F}/api/v1/node-icon/${e.name}`,alt:"Notification"})})}),t.jsx(a,{children:t.jsx(h,{sx:{fontSize:"1rem",fontWeight:500},children:e.label})}),t.jsx("div",{style:{flexGrow:1}}),e.tags&&e.tags.includes("LlamaIndex")&&t.jsx(t.Fragment,{children:t.jsx("div",{style:{borderRadius:"50%",padding:15},children:t.jsx("img",{style:{width:"25px",height:"25px",borderRadius:"50%",objectFit:"contain"},src:V,alt:"LlamaIndex"})})})]}),(e.inputAnchors.length>0||e.inputParams.length>0)&&t.jsxs(t.Fragment,{children:[t.jsx(c,{}),t.jsx(a,{sx:{background:i.palette.asyncSelect.main,p:1},children:t.jsx(h,{sx:{fontWeight:500,textAlign:"center"},children:"Inputs"})}),t.jsx(c,{})]}),e.inputAnchors.map((o,s)=>t.jsx(f,{disabled:!0,inputAnchor:o,data:e},s)),e.inputParams.filter(o=>o.display!==!1).map((o,s)=>t.jsx(f,{disabled:!0,inputParam:o,data:e},s)),e.inputParams.find(o=>o.additionalParams)&&t.jsx("div",{style:{textAlign:"center",marginTop:e.inputParams.filter(o=>o.additionalParams).length===e.inputParams.length+e.inputAnchors.length?20:0},children:t.jsx(M,{sx:{borderRadius:25,width:"90%",mb:2},variant:"outlined",onClick:g,children:"Additional Parameters"})}),t.jsx(c,{}),t.jsx(a,{sx:{background:i.palette.asyncSelect.main,p:1},children:t.jsx(h,{sx:{fontWeight:500,textAlign:"center"},children:"Output"})}),t.jsx(c,{}),e.outputAnchors.map((o,s)=>t.jsx(J,{disabled:!0,outputAnchor:o,data:e},s))]})}),t.jsx(q,{show:m,dialogProps:n,onCancel:()=>l(!1)})]})};b.propTypes={data:T.object};const Q={customNode:b,stickyNote:U},X={buttonedge:""},pe=()=>{const e=j(),i=D(),m=E(r=>r.customization),{state:l}=I(),{flowData:n,name:d}=l,[g,o,s]=_(),[y,v,w]=z(),[x,C]=p.useState(!1),N=p.useRef(null);p.useEffect(()=>{if(n){const r=JSON.parse(n);o(r.nodes||[]),v(r.edges||[])}},[n]);const S=r=>{const P=((r==null?void 0:r.nodes)||[]).some(u=>u.data.category==="Multi Agents"||u.data.category==="Sequential Agents"),k=JSON.stringify(r);i(`/${P?"agentcanvas":"canvas"}`,{state:{templateFlowData:k}})};return t.jsx(t.Fragment,{children:t.jsxs(a,{children:[t.jsx(B,{enableColorOnDark:!0,position:"fixed",color:"inherit",elevation:1,sx:{bgcolor:e.palette.background.default},children:t.jsx(O,{children:t.jsx(Z,{flowName:d,flowData:JSON.parse(n),onChatflowCopy:r=>S(r)})})}),t.jsx(a,{sx:{pt:"70px",height:"100vh",width:"100%"},children:t.jsx("div",{className:"reactflow-parent-wrapper",children:t.jsx("div",{className:"reactflow-wrapper",ref:N,children:t.jsxs(H,{nodes:g,edges:y,onNodesChange:s,onEdgesChange:w,nodesDraggable:!1,nodeTypes:Q,edgeTypes:X,fitView:!0,minZoom:.1,snapGrid:[25,25],snapToGrid:x,children:[t.jsx(L,{className:m.isDarkMode?"dark-mode-controls":"",style:{display:"flex",flexDirection:"row",left:"50%",transform:"translate(-50%, -50%)"},children:t.jsx("button",{className:"react-flow__controls-button react-flow__controls-interactive",onClick:()=>{C(!x)},title:"toggle snapping","aria-label":"toggle snapping",children:x?t.jsx(W,{}):t.jsx($,{})})}),t.jsx(G,{color:"#aaa",gap:16})]})})})})]})})};export{pe as default};
