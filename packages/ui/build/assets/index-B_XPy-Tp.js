import{a as M,f as N,j as e,Q as O,R as P,U as q,V,W as D,y as W,X as R,o as u,h as G,_ as H,$ as S,P as d,b4 as B,r as l,b as X,c as Q,s as U,t as Y,M as _,S as w,B as J,q as k,i as F,L as K,N as Z}from"./index-B5bgjFPS.js";import{W as ee}from"./workflow_empty-BmvH5JwJ.js";import{V as te}from"./ViewHeader-t5dVj9Vk.js";import{E as se}from"./ErrorBoundary-x4bZaoHs.js";import{S as n}from"./Skeleton-DJP3nnUt.js";import{T as v}from"./Tooltip-CXmeiPEa.js";import{I as ie}from"./IconTrash-CekgWF9B.js";import{u as ae,C as re}from"./ConfirmDialog-Dfe34hOz.js";import"./StyledFab-DFomU4Vk.js";import"./IconSearch-4bUU90FL.js";import"./IconCopy-bbAsun7S.js";const s=W(H)(({theme:i})=>({borderColor:i.palette.grey[900]+25,[`&.${S.head}`]:{color:i.palette.grey[900]},[`&.${S.body}`]:{fontSize:14,height:64}})),g=W(D)(()=>({"&:last-child td, &:last-child th":{border:0}})),E=({data:i,isLoading:h,filterFunction:p,handleDelete:x})=>{const c=M(),j=N(a=>a.customization);return e.jsx(e.Fragment,{children:e.jsx(O,{sx:{border:1,borderColor:c.palette.grey[900]+25,borderRadius:2},component:P,children:e.jsxs(q,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[e.jsx(V,{sx:{backgroundColor:j.isDarkMode?c.palette.common.black:c.palette.grey[100],height:56},children:e.jsxs(D,{children:[e.jsx(s,{component:"th",scope:"row",style:{width:"25%"},children:"Name"},"0"),e.jsx(s,{style:{width:"40%"},children:"Path"},"1"),e.jsx(s,{style:{width:"25%"},children:"Size"},"2"),e.jsx(s,{style:{width:"10%"},children:"Actions"},"3")]})}),e.jsx(R,{children:h?e.jsxs(e.Fragment,{children:[e.jsxs(g,{children:[e.jsx(s,{children:e.jsx(n,{variant:"text"})}),e.jsx(s,{children:e.jsx(n,{variant:"text"})}),e.jsx(s,{children:e.jsx(n,{variant:"text"})}),e.jsx(s,{children:e.jsx(n,{variant:"text"})})]}),e.jsxs(g,{children:[e.jsx(s,{children:e.jsx(n,{variant:"text"})}),e.jsx(s,{children:e.jsx(n,{variant:"text"})}),e.jsx(s,{children:e.jsx(n,{variant:"text"})}),e.jsx(s,{children:e.jsx(n,{variant:"text"})})]})]}):e.jsx(e.Fragment,{children:i==null?void 0:i.filter(p).map((a,m)=>e.jsxs(g,{children:[e.jsx(s,{children:e.jsx(v,{title:a.name,children:e.jsx(u,{sx:{display:"-webkit-box",fontSize:14,fontWeight:500,WebkitLineClamp:1,WebkitBoxOrient:"vertical",textOverflow:"ellipsis",overflow:"hidden"},children:a.name.split("/").pop()})})},"0"),e.jsx(s,{children:e.jsx(v,{title:a.path,children:e.jsx(u,{sx:{display:"-webkit-box",fontSize:14,fontWeight:500,WebkitLineClamp:1,WebkitBoxOrient:"vertical",textOverflow:"ellipsis",overflow:"hidden"},children:a.path})})},"1"),e.jsx(s,{children:e.jsx(u,{sx:{alignItems:"center",display:"flex",fontSize:".9rem",fontWeight:200},children:`${a.size.toFixed(2)} MB`})},"2"),e.jsx(s,{children:e.jsx(G,{color:"error",onClick:()=>x(a),size:"small",children:e.jsx(ie,{})})},"3")]},m))})})]})})})};E.propTypes={data:d.array,images:d.object,isLoading:d.bool,filterFunction:d.func,handleDelete:d.func};const oe=()=>B.get("/files"),ne=i=>B.delete("/files",{params:{path:i}}),T={getAllFiles:oe,deleteFile:ne},ye=()=>{const{confirm:i}=ae(),[h,p]=l.useState(!0),{error:x,setError:c}=X(),[j,a]=l.useState([]),[m,z]=l.useState(""),r=Q(T.getAllFiles),b=U();Y();const y=(...t)=>b(K(...t)),C=(...t)=>b(Z(...t)),L=t=>{z(t.target.value)};function A(t){return t.name.toLowerCase().indexOf(m.toLowerCase())>-1||t.category&&t.category.toLowerCase().indexOf(m.toLowerCase())>-1}const $=async t=>{const I={title:"Delete",description:`Delete ${t.name}? This process cannot be undone.`,confirmButtonName:"Delete",cancelButtonName:"Cancel"};if(await i(I))try{const o=await T.deleteFile(t.path);o!=null&&o.data&&y({message:"File deleted",options:{key:new Date().getTime()+Math.random(),variant:"success",action:f=>e.jsx(k,{style:{color:"white"},onClick:()=>C(f),children:e.jsx(F,{})})}}),await r.request()}catch(o){c(o),y({message:typeof o.response.data=="object"?o.response.data.message:o.response.data,options:{key:new Date().getTime()+Math.random(),variant:"error",persist:!0,action:f=>e.jsx(k,{style:{color:"white"},onClick:()=>C(f),children:e.jsx(F,{})})}})}};return l.useEffect(()=>{r.request()},[]),l.useEffect(()=>{p(r.loading)},[r.loading]),l.useEffect(()=>{if(r.data)try{const t=r.data;a(t)}catch(t){console.error(t)}},[r.data]),e.jsxs(_,{children:[x?e.jsx(se,{error:x}):e.jsxs(w,{flexDirection:"column",sx:{gap:3},children:[e.jsx(te,{onSearchChange:L,search:!0,searchPlaceholder:"Search File",title:"Files"}),e.jsx(E,{data:j,filterFunction:A,handleDelete:$,isLoading:h}),!h&&(!r.data||r.data.length===0)&&e.jsxs(w,{sx:{alignItems:"center",justifyContent:"center"},flexDirection:"column",children:[e.jsx(J,{sx:{p:2,height:"auto"},children:e.jsx("img",{style:{objectFit:"cover",height:"25vh",width:"auto"},src:ee,alt:"WorkflowEmptySVG"})}),e.jsx("div",{children:"No Files Yet"})]})]}),e.jsx(re,{})]})};export{ye as default};
