import{a$ as $,b0 as N,r as x,b1 as V,aO as z,bM as O,aP as y,j as e,y as T,aJ as M,b2 as B,f as E,S as U,o as _,bN as q,B as H,aA as G,aB as u,a4 as m,d as J,P as i,a as W,bJ as D,bO as X,a5 as Y,a9 as K}from"./index-B5bgjFPS.js";import{L as g}from"./ListItem-BfStHUI0.js";import{F as S}from"./FormControl-o0rphY-g.js";function Q(t){return $("MuiListItemAvatar",t)}N("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Z=["className"],P=t=>{const{alignItems:a,classes:n}=t;return B({root:["root",a==="flex-start"&&"alignItemsFlexStart"]},Q,n)},ee=T("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.root,n.alignItems==="flex-start"&&a.alignItemsFlexStart]}})(({ownerState:t})=>y({minWidth:56,flexShrink:0},t.alignItems==="flex-start"&&{marginTop:8})),b=x.forwardRef(function(a,n){const c=V({props:a,name:"MuiListItemAvatar"}),{className:l}=c,d=z(c,Z),s=x.useContext(O),h=y({},c,{alignItems:s.alignItems}),r=P(h);return e.jsx(ee,y({className:M(r.root,l),ownerState:h,ref:n},d))}),te="/assets/robot-CdlpHV-J.png",se="/assets/chathistory-iygi9HAP.png",ae="/assets/floppy-disc-BFpYbhCA.png",re="/assets/fileAttachment-z5hzHcu7.png",oe=[{primary:"$flow.state.messages",secondary:"All messages from the start of the conversation till now"},{primary:"$flow.state.<replace-with-key>",secondary:"Current value of the state variable with specified key"},{primary:"$flow.state.messages[0].content",secondary:"First message content"},{primary:"$flow.state.messages[-1].content",secondary:"Last message content"}],R=({availableNodesForVariable:t,disabled:a=!1,onSelectAndReturnVal:n,isSequentialAgent:c})=>{const l=E(s=>s.customization),d=(s,h)=>{const p=`{{${s?`${s.id}.data.instance`:h}}}`;n(p)};return e.jsx(e.Fragment,{children:!a&&e.jsxs("div",{style:{flex:30},children:[e.jsx(U,{flexDirection:"row",sx:{mb:1,ml:2,mt:2},children:e.jsx(_,{variant:"h5",children:"Select Variable"})}),e.jsx(q,{style:{height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden"},children:e.jsx(H,{sx:{pl:2,pr:2},children:e.jsxs(G,{children:[e.jsx(u,{sx:{p:0,borderRadius:`${l.borderRadius}px`,boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)",mb:1},disabled:a,onClick:()=>d(null,"question"),children:e.jsxs(g,{alignItems:"center",children:[e.jsx(b,{children:e.jsx("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white"},children:e.jsx("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:"AI",src:te})})}),e.jsx(m,{sx:{ml:1},primary:"question",secondary:"User's question from chatbox"})]})}),e.jsx(u,{sx:{p:0,borderRadius:`${l.borderRadius}px`,boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)",mb:1},disabled:a,onClick:()=>d(null,"chat_history"),children:e.jsxs(g,{alignItems:"center",children:[e.jsx(b,{children:e.jsx("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white"},children:e.jsx("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:"chatHistory",src:se})})}),e.jsx(m,{sx:{ml:1},primary:"chat_history",secondary:"Past conversation history between user and AI"})]})}),e.jsx(u,{sx:{p:0,borderRadius:`${l.borderRadius}px`,boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)",mb:1},disabled:a,onClick:()=>d(null,"file_attachment"),children:e.jsxs(g,{alignItems:"center",children:[e.jsx(b,{children:e.jsx("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white"},children:e.jsx("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:"fileAttachment",src:re})})}),e.jsx(m,{sx:{ml:1},primary:"file_attachment",secondary:"Files uploaded from the chat when Full File Upload is enabled on the Configuration"})]})}),t&&t.length>0&&t.map((s,h)=>{const r=s.data.outputAnchors.length&&s.data.outputAnchors[0].options&&s.data.outputAnchors[0].options.find(p=>p.name===s.data.outputs.output);return e.jsx(u,{sx:{p:0,borderRadius:`${l.borderRadius}px`,boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)",mb:1},disabled:a,onClick:()=>d(s),children:e.jsxs(g,{alignItems:"center",children:[e.jsx(b,{children:e.jsx("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white"},children:e.jsx("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:s.data.name,src:`${J}/api/v1/node-icon/${s.data.name}`})})}),e.jsx(m,{sx:{ml:1},primary:s.data.inputs.chainName??s.data.inputs.functionName??s.data.inputs.variableName??s.data.id,secondary:s.data.name==="ifElseFunction"?`${s.data.description}`:`${(r==null?void 0:r.label)??"output"} from ${s.data.label}`})]})},h)}),c&&(oe||[]).map((s,h)=>e.jsx(u,{sx:{p:0,borderRadius:`${l.borderRadius}px`,boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)",mb:1},disabled:a,onClick:()=>n(s.primary),children:e.jsxs(g,{alignItems:"center",children:[e.jsx(b,{children:e.jsx("div",{style:{width:50,height:50,borderRadius:"50%",backgroundColor:"white"},children:e.jsx("img",{style:{width:"100%",height:"100%",padding:10,objectFit:"contain"},alt:"state",src:ae})})}),e.jsx(m,{sx:{ml:1},primary:s.primary,secondary:s.secondary})]})},h))]})})})]})})};R.propTypes={availableNodesForVariable:i.array,disabled:i.bool,onSelectAndReturnVal:i.func,isSequentialAgent:i.bool};const ie=({inputParam:t,value:a,nodes:n,edges:c,nodeId:l,onChange:d,disabled:s=!1})=>{const h=W(),[r,p]=x.useState(a??""),[f,j]=x.useState(null),[A,F]=x.useState([]),w=x.useRef(null),k=!!f,v=()=>{j(null)},L=o=>{const C=r+o.substring(2);d(C),p(C)},I=o=>{switch(o){case"string":return"text";case"password":return"password";case"number":return"number";case"email":return"email";default:return"text"}};return x.useEffect(()=>{if(!s&&n&&c&&l&&t){const o=t!=null&&t.acceptVariable?D(n,c,l,t.id):[];F(o)}},[s,t,n,c,l]),x.useEffect(()=>{typeof r=="string"&&r&&r.endsWith("{{")&&j(w.current)},[r]),e.jsxs(e.Fragment,{children:[t.name==="note"?e.jsx(S,{sx:{width:"100%",height:"auto"},size:"small",children:e.jsx(X,{id:l,size:"small",disabled:s,type:I(t.type),placeholder:t.placeholder,multiline:!!t.rows,minRows:t.rows??1,value:r,name:t.name,onChange:o=>{p(o.target.value),d(o.target.value)},inputProps:{step:t.step??1,style:{border:"none",background:"none",color:"inherit"}},sx:{border:"none",background:"none",padding:"10px 14px",textarea:{"&::placeholder":{color:"#616161"}}}})}):e.jsx(S,{sx:{mt:1,width:"100%"},size:"small",children:e.jsx(Y,{id:t.name,size:"small",disabled:s,type:I(t.type),placeholder:t.placeholder,multiline:!!t.rows,rows:t.rows??1,value:r,name:t.name,onChange:o=>{p(o.target.value),d(o.target.value)},inputProps:{step:t.step??1,style:{height:t.rows?"90px":"inherit"}},sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:h.palette.grey[900]+25}}})}),e.jsx("div",{ref:w}),(t==null?void 0:t.acceptVariable)&&e.jsx(K,{open:k,anchorEl:f,onClose:v,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:e.jsx(R,{disabled:s,availableNodesForVariable:A,onSelectAndReturnVal:o=>{L(o),v()}})})]})};ie.propTypes={inputParam:i.object,value:i.oneOfType([i.string,i.number]),onChange:i.func,disabled:i.bool,nodes:i.array,edges:i.array,nodeId:i.string};export{ie as I,b as L,R as S,te as r};
