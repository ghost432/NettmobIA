import{a as M,f as re,j as e,Q as se,R as ae,U as ie,V as ne,W as G,y as O,X as le,o as A,q as ce,_ as de,$ as L,P as S,c as pe,b as me,r as s,M as xe,S as N,T as F,I as he,B as f,ac as ue,ab as ge,e as je,g as z}from"./index-B5bgjFPS.js";import{I as fe}from"./ItemCard-DNyTDo1v.js";import{T as be,t as ye}from"./ToolDialog-DZ6z_iak.js";import{V as Te}from"./ViewHeader-t5dVj9Vk.js";import{E as Ce}from"./ErrorBoundary-x4bZaoHs.js";import{S as l}from"./Skeleton-DJP3nnUt.js";import{D as Se,T as ve}from"./TablePagination-DXVFzOgw.js";import{T as we}from"./ToggleButtonGroup-RXBzXyLf.js";import{I as Ie}from"./IconLayoutGrid-Ck6ndNoY.js";import{B as Pe}from"./ButtonGroup-DgM5AEGL.js";import{I as ke}from"./IconPlus-j8jP5X4Z.js";import"./Tooltip-CXmeiPEa.js";import"./Grid-DGDGmzGP.js";import"./toPropertyKey-C9c9JG92.js";import"./Autocomplete-CinIIKT5.js";import"./Close-DT9tpzn1.js";import"./createStyled-DlEbU-rO.js";import"./InputLabel-BtU13bbu.js";import"./InputAdornment-v58Edx4J.js";import"./FormControl-o0rphY-g.js";import"./TextField-OmGdqrIf.js";import"./KeyboardArrowRight-BvTOCIXU.js";import"./LastPage--XaxDP-k.js";import"./TooltipWithParser-D26Faoyy.js";import"./index-D--Rb2MU.js";import"./Delete-4D-T7tnN.js";import"./ConfirmDialog-Dfe34hOz.js";import"./CodeEditor-BbQJOBPh.js";import"./index-C-cusT-F.js";import"./ExportAsTemplateDialog-481ESzFy.js";import"./GridActionsCellItem-B3aQ_RGo.js";import"./StyledFab-DFomU4Vk.js";import"./IconSearch-4bUU90FL.js";import"./IconCopy-bbAsun7S.js";import"./Pagination-BU6C4W3P.js";const a=O(de)(({theme:r})=>({borderColor:r.palette.grey[900]+25,[`&.${L.head}`]:{color:r.palette.grey[900]},[`&.${L.body}`]:{fontSize:14,height:64}})),v=O(G)(()=>({"&:last-child td, &:last-child th":{border:0}})),V=({data:r,isLoading:i,onSelect:m})=>{const d=M(),c=re(n=>n.customization);return e.jsx(e.Fragment,{children:e.jsx(se,{sx:{border:1,borderColor:d.palette.grey[900]+25,borderRadius:2},component:ae,children:e.jsxs(ie,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[e.jsx(ne,{sx:{backgroundColor:c.isDarkMode?d.palette.common.black:d.palette.grey[100],height:56},children:e.jsxs(G,{children:[e.jsx(a,{component:"th",scope:"row",children:"Name"},"0"),e.jsx(a,{children:"Description"},"1"),e.jsx(a,{component:"th",scope:"row",children:"Â "},"3")]})}),e.jsx(le,{children:i?e.jsxs(e.Fragment,{children:[e.jsxs(v,{children:[e.jsx(a,{children:e.jsx(l,{variant:"text"})}),e.jsx(a,{children:e.jsx(l,{variant:"text"})}),e.jsx(a,{children:e.jsx(l,{variant:"text"})})]}),e.jsxs(v,{children:[e.jsx(a,{children:e.jsx(l,{variant:"text"})}),e.jsx(a,{children:e.jsx(l,{variant:"text"})}),e.jsx(a,{children:e.jsx(l,{variant:"text"})})]})]}):e.jsx(e.Fragment,{children:r==null?void 0:r.map((n,b)=>e.jsxs(v,{children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx("div",{style:{width:35,height:35,display:"flex",flexShrink:0,marginRight:10,borderRadius:"50%",backgroundImage:`url(${n.iconSrc})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center center"}}),e.jsx(A,{sx:{display:"-webkit-box",fontSize:14,fontWeight:500,WebkitLineClamp:2,WebkitBoxOrient:"vertical",textOverflow:"ellipsis",overflow:"hidden"},children:e.jsx(ce,{onClick:()=>m(n),sx:{textAlign:"left"},children:n.templateName||n.name})})]},"0"),e.jsx(a,{children:e.jsx(A,{sx:{overflowWrap:"break-word",whiteSpace:"pre-line"},children:n.description||""})},"1"),e.jsx(a,{},"3")]},b))})})]})})})};V.propTypes={data:S.array,isLoading:S.bool,onSelect:S.func};const Be="/assets/tools_empty-ini-pB8C.svg",pt=()=>{var k,B,E,R;const r=M(),i=pe(ye.getAllTools),{error:m,setError:d}=me(),[c,n]=s.useState(!0),[b,p]=s.useState(!1),[W,y]=s.useState({}),[T,U]=s.useState(localStorage.getItem("toolsDisplayStyle")||"card"),w=s.useRef(null),[x,_]=s.useState(1),[h,$]=s.useState(Se),[u,H]=s.useState(0),q=(t,o)=>{_(t),$(o),C(t,o)},C=(t,o)=>{const g={page:t||x,limit:o||h};i.request(g)},J=(t,o)=>{o!==null&&(localStorage.setItem("toolsDisplayStyle",o),U(o))},Q=t=>{try{const o={title:"Add New Tool",type:"IMPORT",cancelButtonName:"Cancel",confirmButtonName:"Save",data:JSON.parse(t)};y(o),p(!0)}catch(o){console.error(o)}},X=t=>{if(!t.target.files)return;const o=t.target.files[0],g=new FileReader;g.onload=j=>{var D;if(!((D=j==null?void 0:j.target)!=null&&D.result))return;const{result:oe}=j.target;Q(oe)},g.readAsText(o)},Y=()=>{y({title:"Add New Tool",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add"}),p(!0)},I=t=>{y({title:"Edit Tool",type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",data:t}),p(!0)},K=()=>{p(!1),C(x,h)},[P,Z]=s.useState(""),ee=t=>{Z(t.target.value)};function te(t){return t.name.toLowerCase().indexOf(P.toLowerCase())>-1||t.description.toLowerCase().indexOf(P.toLowerCase())>-1}return s.useEffect(()=>{C(x,h)},[]),s.useEffect(()=>{n(i.loading)},[i.loading]),s.useEffect(()=>{i.data&&H(i.data.total)},[i.data]),e.jsxs(e.Fragment,{children:[e.jsx(xe,{children:m?e.jsx(Ce,{error:m}):e.jsxs(N,{flexDirection:"column",sx:{gap:3},children:[e.jsxs(Te,{onSearchChange:ee,search:!0,searchPlaceholder:"Search Tools",title:"Tools",description:"External functions or APIs the agent can use to take action",children:[e.jsxs(we,{sx:{borderRadius:2,maxHeight:40},value:T,color:"primary",disabled:u===0,exclusive:!0,onChange:J,children:[e.jsx(F,{sx:{borderColor:r.palette.grey[900]+25,borderRadius:2,color:(k=r==null?void 0:r.customization)!=null&&k.isDarkMode?"white":"inherit"},variant:"contained",value:"card",title:"Card View",children:e.jsx(Ie,{})}),e.jsx(F,{sx:{borderColor:r.palette.grey[900]+25,borderRadius:2,color:(B=r==null?void 0:r.customization)!=null&&B.isDarkMode?"white":"inherit"},variant:"contained",value:"list",title:"List View",children:e.jsx(he,{})})]}),e.jsxs(f,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ue,{permissionId:"tools:create",variant:"outlined",onClick:()=>w.current.click(),startIcon:e.jsx(ge,{}),sx:{borderRadius:2,height:40},children:"Load"}),e.jsx("input",{style:{display:"none"},ref:w,type:"file",hidden:!0,accept:".json",onChange:t=>X(t)})]}),e.jsx(Pe,{disableElevation:!0,"aria-label":"outlined primary button group",children:e.jsx(je,{permissionId:"tools:create",variant:"contained",onClick:Y,startIcon:e.jsx(ke,{}),sx:{borderRadius:2,height:40},children:"Create"})})]}),c&&e.jsxs(f,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:z,children:[e.jsx(l,{variant:"rounded",height:160}),e.jsx(l,{variant:"rounded",height:160}),e.jsx(l,{variant:"rounded",height:160})]}),!c&&u>0&&e.jsxs(e.Fragment,{children:[!T||T==="card"?e.jsx(f,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:z,children:(R=(E=i.data)==null?void 0:E.data)==null?void 0:R.filter(te).map((t,o)=>e.jsx(fe,{data:t,onClick:()=>I(t)},o))}):e.jsx(V,{data:i.data.data,isLoading:c,onSelect:I}),e.jsx(ve,{currentPage:x,limit:h,total:u,onChange:q})]}),!c&&u===0&&e.jsxs(N,{sx:{alignItems:"center",justifyContent:"center"},flexDirection:"column",children:[e.jsx(f,{sx:{p:2,height:"auto"},children:e.jsx("img",{style:{objectFit:"cover",height:"20vh",width:"auto"},src:Be,alt:"ToolEmptySVG"})}),e.jsx("div",{children:"No Tools Created Yet"})]})]})}),e.jsx(be,{show:b,dialogProps:W,onCancel:()=>p(!1),onConfirm:K,setError:d})]})};export{pt as default};
