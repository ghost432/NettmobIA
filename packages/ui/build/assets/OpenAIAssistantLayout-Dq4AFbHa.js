import{c as w,r as s,j as t,D as R,m as G,n as H,B as u,S,o as b,p as M,aa as V,w as W,P as m,u as z,M as U,ac as Y,ab as K,e as Q,g as O}from"./index-B5bgjFPS.js";import{I as X}from"./ItemCard-DNyTDo1v.js";import{A as Z}from"./AssistantDialog-CJzYVebb.js";import{C as _}from"./CredentialInputHandler-C4W2GUgN.js";import{D as $}from"./Dropdown-D8Rr64ju.js";import{a as B}from"./assistants-DZYxhrU8.js";import{V as tt}from"./ViewHeader-t5dVj9Vk.js";import{E as st}from"./ErrorBoundary-x4bZaoHs.js";import{A as et}from"./assistant_empty-BAOmXGQM.js";import{I as at}from"./IconPlus-j8jP5X4Z.js";import{S as D}from"./Skeleton-DJP3nnUt.js";import"./Tooltip-CXmeiPEa.js";import"./TooltipWithParser-D26Faoyy.js";import"./index-D--Rb2MU.js";import"./MultiDropdown-BUXEvYds.js";import"./FormControl-o0rphY-g.js";import"./Autocomplete-CinIIKT5.js";import"./Close-DT9tpzn1.js";import"./TextField-OmGdqrIf.js";import"./InputLabel-BtU13bbu.js";import"./File-km8sc6Tq.js";import"./BackdropLoader-Ch3nVEPr.js";import"./ConfirmDialog-Dfe34hOz.js";import"./Switch-D5M093wC.js";import"./v4-CtRu48qb.js";import"./CredentialListDialog-ZkUPpHPz.js";import"./Input-CajAyvOv.js";import"./ListItem-BfStHUI0.js";import"./main-Dw2W3SKo.js";import"./IconArrowsMaximize-BLCViMbK.js";import"./IconAlertTriangle-7YQ2ldQl.js";import"./InputAdornment-v58Edx4J.js";import"./IconSearch-4bUU90FL.js";import"./StyledFab-DFomU4Vk.js";import"./IconCopy-bbAsun7S.js";const N=({show:g,dialogProps:a,onCancel:h,onAssistantSelected:I,setError:c})=>{const p=document.getElementById("portal"),i=w(B.getAllAvailableAssistants),[o,x]=s.useState(""),[A,f]=s.useState([]),[l,j]=s.useState("");s.useEffect(()=>()=>{x(""),f([]),j("")},[a]),s.useEffect(()=>{if(i.data&&i.data.length){const r=[];for(let d=0;d<i.data.length;d+=1)r.push({label:i.data[d].name,name:i.data[d].id,description:i.data[d].instructions});f(r)}},[i.data]),s.useEffect(()=>{i.error&&c&&c(i.error)},[i.error]);const C=g?t.jsxs(R,{fullWidth:!0,maxWidth:"xs",open:g,onClose:h,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[t.jsx(G,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:a.title}),t.jsxs(H,{children:[t.jsxs(u,{sx:{p:2},children:[t.jsx(S,{sx:{position:"relative"},direction:"row",children:t.jsxs(b,{variant:"overline",children:["OpenAI Credential",t.jsx("span",{style:{color:"red"},children:" *"})]})}),t.jsx(_,{data:o?{credential:o}:{},inputParam:{label:"Connect Credential",name:"credential",type:"credential",credentialNames:["openAIApi"]},onSelect:r=>{x(r),r&&i.request(r)}},o)]}),o&&t.jsxs(u,{sx:{p:2},children:[t.jsx(S,{sx:{position:"relative"},direction:"row",children:t.jsxs(b,{variant:"overline",children:["Assistants",t.jsx("span",{style:{color:"red"},children:" *"})]})}),t.jsx($,{name:l,options:A,onSelect:r=>j(r),value:l??"choose an option"})]})]}),l&&t.jsx(M,{children:t.jsx(V,{variant:"contained",onClick:()=>I(l,o),children:"Load"})})]}):null;return W.createPortal(C,p)};N.propTypes={show:m.bool,dialogProps:m.object,onCancel:m.func,onAssistantSelected:m.func,setError:m.func};const Rt=()=>{var E;const g=z(),a=w(B.getAllAssistants),[h,I]=s.useState(!0),[c,p]=s.useState(null),[i,o]=s.useState(!1),[x,A]=s.useState({}),[f,l]=s.useState(!1),[j,C]=s.useState({}),r=()=>{C({title:"Load Existing Assistant"}),l(!0)},[d,L]=s.useState(""),k=e=>{L(e.target.value)},T=(e,n)=>{l(!1),y(e,n)},y=(e,n)=>{A({title:"Add New Assistant",type:"ADD",cancelButtonName:"Cancel",confirmButtonName:"Add",selectedOpenAIAssistantId:e,credential:n}),o(!0)},q=e=>{A({title:"Edit Assistant",type:"EDIT",cancelButtonName:"Cancel",confirmButtonName:"Save",data:e}),o(!0)},F=()=>{o(!1),a.request("OPENAI")};function J(e){const n=JSON.parse(e.details);return n&&n.name&&n.name.toLowerCase().indexOf(d.toLowerCase())>-1}return s.useEffect(()=>{a.request("OPENAI")},[]),s.useEffect(()=>{I(a.loading)},[a.loading]),s.useEffect(()=>{a.error&&p(a.error)},[a.error]),t.jsxs(t.Fragment,{children:[t.jsx(U,{children:c?t.jsx(st,{error:c}):t.jsxs(S,{flexDirection:"column",sx:{gap:3},children:[t.jsxs(tt,{isBackButton:!0,onSearchChange:k,search:!0,searchPlaceholder:"Search Assistants",title:"OpenAI Assistant",description:"Create assistants using OpenAI Assistant API",onBack:()=>g(-1),children:[t.jsx(Y,{permissionId:"assistants:create",variant:"outlined",onClick:r,startIcon:t.jsx(K,{}),sx:{borderRadius:2,height:40},children:"Load"}),t.jsx(Q,{permissionId:"assistants:create",variant:"contained",sx:{borderRadius:2,height:40},onClick:y,startIcon:t.jsx(at,{}),children:"Add"})]}),h?t.jsxs(u,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:O,children:[t.jsx(D,{variant:"rounded",height:160}),t.jsx(D,{variant:"rounded",height:160}),t.jsx(D,{variant:"rounded",height:160})]}):t.jsx(u,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:O,children:a.data&&((E=a.data)==null?void 0:E.filter(J).map((e,n)=>{var v,P;return t.jsx(X,{data:{name:(v=JSON.parse(e.details))==null?void 0:v.name,description:(P=JSON.parse(e.details))==null?void 0:P.instructions,iconSrc:e.iconSrc},onClick:()=>q(e)},n)}))}),!h&&(!a.data||a.data.length===0)&&t.jsxs(S,{sx:{alignItems:"center",justifyContent:"center"},flexDirection:"column",children:[t.jsx(u,{sx:{p:2,height:"auto"},children:t.jsx("img",{style:{objectFit:"cover",height:"20vh",width:"auto"},src:et,alt:"AssistantEmptySVG"})}),t.jsx("div",{children:"No OpenAI Assistants Added Yet"})]})]})}),t.jsx(N,{show:f,dialogProps:j,onCancel:()=>l(!1),onAssistantSelected:T,setError:p}),t.jsx(Z,{show:i,dialogProps:x,onCancel:()=>o(!1),onConfirm:F,setError:p})]})};export{Rt as default};
